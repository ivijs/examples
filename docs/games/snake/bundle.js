(function(){'use strict';var aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},n;if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var r;a:{var ba={D:!0},ca={};try{ca.__proto__=ba;r=ca.D;break a}catch(a){}r=!1}n=r?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var da=n;
function ea(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(da)da(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.T=b.prototype}var fa="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;var ha=[];function ia(a){return function(){try{return a.apply(null,arguments)}catch(c){for(var b=0;b<ha.length;++b)ha[b](c);throw c;}}}var la=Object.prototype.hasOwnProperty;function ma(){}function t(){this.g=[]}t.prototype.add=function(a){this.g.push(a)};function na(a){for(var b=0;b<a.g.length;++b)if(!0===(0,a.g[b])()){var c=a.g,d=b--,f=c.length-1,e=c.pop();d!==f&&(c[d]=e)}}var oa=navigator.userAgent,u=0;!/iPad|iPhone|iPod/.test(oa)||"MSStream"in window||(u|="standalone"in navigator?3:1);
-1<oa.indexOf("Android")&&(u|=4);var v=0;try{var pa=Object.defineProperty({},"passive",{get:function(){v|=1}});window.addEventListener("test",null,pa)}catch(a){}void 0!==document.createElementNS("http://www.w3.org/2000/svg","svg").innerHTML&&(v|=2);"key"in KeyboardEvent.prototype&&(v|=4);"buttons"in MouseEvent.prototype&&(v|=8);"ontouchstart"in window&&(v|=16);"PointerEvent"in window&&(v|=32,0<navigator.maxTouchPoints&&(v|=64,1<navigator.maxTouchPoints&&(v|=128)));
"sourceCapabilities"in UIEvent.prototype&&(v|=256);var w=Node.prototype,x=Element.prototype,A=w.insertBefore,B=w.removeChild,qa=w.replaceChild,ra=w.cloneNode,D=x.setAttribute,sa=x.setAttributeNS,ta=x.removeAttribute;function ua(){return{flags:0,write:[],read:[],I:[]}}var E=0,F=[],va=[],wa=[],G,xa=new t,ya=new t,za=ma,Aa=ua(),Ba=ua(),H=null;function Ca(){for(;0<F.length;){var a=F;F=[];for(var b=0;b<a.length;++b)a[b]()}E^=4}
(new MessageChannel).port1.onmessage=function(){E^=8;var a=va;va=[];for(var b=0;b<a.length;++b)a[b]()};function Da(){var a=G();if(0!==(E&1)!==a){E^=3;!1===a&&0<xa.g.length&&I();for(var b=0;b<wa.length;++b)wa[b](a);E^=2}}"undefined"!==typeof document.hidden?(G=function(){return document.hidden},document.addEventListener("visibilitychange",Da)):"undefined"!==typeof document.webkitHidden?(G=function(){return document.webkitHidden},document.addEventListener("webkitvisibilitychange",Da)):G=function(){return!0};
!0===G()&&(E|=1);function Ea(){0!==(E&16)&&requestAnimationFrame(Fa)}function I(){if(0===(E&16)){E|=16;var a=Ea;0===(E&4)&&(E|=4,Promise.resolve().then(Ca));F.push(a)}}
function Fa(){E^=48;var a,b=Ba;Ba=Aa;Aa=b;na(ya);do{for(;0!==(b.flags&4);){b.flags^=4;var c=b.read;b.read=[];for(a=0;a<c.length;++a)c[a]()}for(;0!==(b.flags&3);){if(0!==(b.flags&2))for(b.flags^=2,c=b.write,b.write=[],a=0;a<c.length;++a)c[a]();0!==(b.flags&1)&&(b.flags^=1,za())}}while(0!==(b.flags&7));E^=32;for(0===(E&1)&&na(xa);0!==(b.flags&8);)for(b.flags^=8,c=b.I,b.I=[],a=0;a<c.length;++a)c[a]();null!==H&&(H.focus(),H=null);0<xa.g.length&&I()}
function Ga(){var a=Ha,b=Ba;b.flags|=2;var c=b.write;null===c?a=[a]:(c.push(a),a=c);b.write=a}function Ia(a){this.flags=0;this.u=a}Ia.prototype.B=function(){};function J(a,b,c,d,f){this.c=a;this.l=this;this.b=null;this.a=f;this.o=b;this.i=0;this.f=c;this.h=null;this.v=d;this.m=this.w=null}function Ja(a,b){a.w=b;return a}J.prototype.e=function(a){this.c|=512;this.m=a;return this};J.prototype.D=function(a){this.f=a;return this};
J.prototype.J=function(){for(var a=arguments,b=null,c=null,d=0,f=0;d<a.length;++d,++f){var e=a[d];if(null!==e){"object"!==typeof e&&(e=new J(1,null,null,void 0,e));var h=e.l,g=e.c;if(h===e)0===(g&128)&&(e.i=f);else if(0===(g&256)){g=e;do 0===(g.c&128)&&(g.i=f),++f,g=g.b;while(null!==g);--f}null!==c?(e.l=c,c.b=e):b=e;c=h}}null!==b&&(b.l=c,this.c|=32,this.a=b);return this};J.prototype.value=function(a){this.a=a;return this};J.prototype.checked=function(a){this.a=a;return this};
J.prototype.autofocus=function(a){!0===a&&(this.c|=262144);return this};function K(a){return 0!==(a.c&98328)?K(a.a):a.h}function Ka(a,b){if(a.length){for(var c=b(a[0],0),d=c,f=1;f<a.length;f++){var e=b(a[f],f);e.l=d;d=d.b=e}c.l=d;c.c|=256;return c}return null}function La(a){a=a.target||window;void 0!==a.O&&(a=a.O);return a}var Ma=0!==(v&1)?{capture:!0,passive:!0}:!0,Pa=0!==(v&1)?{passive:!0}:!1;function Qa(a){return 0!==(a&2)?0!==(a&1)?Ma:Pa:0!==(a&1)?!0:!1}function Ra(a){return void 0===a?0:a}
function Sa(a,b,c){a=a.R;var d=0;if(Array.isArray(a))for(var f=0;f<a.length;++f){var e=a[f];0!==(e.flags&c)&&(d|=Ra(e.N(b)))}else 0!==(a.flags&c)&&(d=Ra(a.N(b)));b.flags|=d}function Ta(a,b){this.flags=a;this.timestamp=b}Ta.prototype.preventDefault=function(){this.flags|=1};function Ua(a,b,c,d){Ta.call(this,a,c);this.target=b;this.S=d}ea(Ua,Ta);function L(a){a.source.addListener(a)}function M(a){a.source.removeListener(a)}
function Va(a){if(a.constructor!==Array)L(a);else for(var b=0;b<a.length;++b){var c=a[b];null!==c&&L(c)}}function Wa(a){if(a.constructor!==Array)M(a);else for(var b=0;b<a.length;++b){var c=a[b];null!==c&&M(c)}}
var Xa=new function(){var a=this;this.P=function(b){return b.source===a.M};this.A=ia(function(b){var c=[];if(0<a.C)for(var d=La(b),f=a.P;null!==d;){var e=void 0,h=d,g=f,m=h.H;if(null!==m&&void 0!==m){if(m.constructor!==Array)!0===g(m)&&(e=m);else for(var p=0,l=0;l<m.length;++l){var k=m[l];null!==k&&!0===g(k)&&(0===p?e=k:1===p?e=[e,k]:e.push(k),++p)}void 0!==e&&c.push({target:h,R:e})}d=d.parentElement}if(0<c.length){d=new Ua(0,La(b),b.timeStamp,b);if(0<c.length)a:{f=0!==(a.flags&4);for(e=c.length-
1;0<=e;)if(h=c[e--],Sa(h,d,1),0!==(d.flags&2))break a;if(!0===f)for(d.flags|=32,e=0;e<c.length&&(Sa(c[e],d,2),0===(d.flags&2));++e);}0!==(d.flags&1)&&b.preventDefault()}});this.M={addListener:function(){++a.C;0===a.g++&&document.addEventListener(a.name,a.A,Qa(a.flags))},removeListener:function(){--a.C;0===--a.g&&document.removeEventListener(a.name,a.A,Qa(a.flags))}};this.C=this.g=0;this.flags=5;this.name="keydown"};
function Ya(a,b,c){if(null===b){if(null!==c)for(h in a=a.style,c)a.setProperty(h,c[h])}else if(a=a.style,null===c)for(h in b)a.removeProperty(h);else{var d=0;for(h in b){var f=c[h];void 0!==f?(b[h]!==f&&a.setProperty(h,f),++d):a.removeProperty(h)}f=Object.keys(c);for(var e=0;d<f.length&&e<f.length;++e){var h=f[e];!1===la.call(b,h)&&(a.setProperty(h,c[h]),++d)}}}
function Za(a,b,c,d){"boolean"===typeof d&&(d=!0===d?"":void 0);if(void 0===d)ta.call(a,c);else{if(!0===b&&5<c.length&&120===c.charCodeAt(0)&&(58===c.charCodeAt(3)||58===c.charCodeAt(5))){if(109===c.charCodeAt(1)&&108===c.charCodeAt(2)){sa.call(a,"http://www.w3.org/XML/1998/namespace",c,d);return}if(108===c.charCodeAt(1)&&105===c.charCodeAt(2)&&110===c.charCodeAt(3)&&107===c.charCodeAt(4)){sa.call(a,"http://www.w3.org/1999/xlink",c,d);return}}D.call(a,c,d)}}
function $a(a,b,c,d){if(null===c){if(null!==d)for(g in d)Za(a,b,g,d[g])}else if(null===d)for(g in c)ta.call(a,g);else{var f=0;for(g in c){var e=d[g];void 0===e?ta.call(a,g):(c[g]!==e&&Za(a,b,g,e),++f)}e=Object.keys(d);for(var h=0;f<e.length&&h<e.length;++h){var g=e[h];!1===la.call(c,g)&&(Za(a,b,g,d[g]),++f)}}}function N(a){var b=a.c;if(0!==(b&544)){if(0!==(b&32)){var c=a.a;do N(c),c=c.b;while(null!==c)}0!==(b&512)&&Va(a.m)}else 0!==(b&98328)&&N(a.a)}
function O(a){var b=a.c;if(0!==(b&544)){if(0!==(b&32)){var c=a.a;do O(c),c=c.b;while(null!==c)}0!==(b&512)&&Wa(a.m)}else 0!==(b&98328)&&(O(a.a),0!==(b&16)&&(a=a.h,a.flags|=1))}
function P(a,b,c,d){var f=b.c,e=0;if(0<(f&-2147385288))if(0!==(f&32)){var h=b.h;f=b.a;do e|=P(h,f,c,d),f=f.b;while(null!==f)}else if(0!==(f&16))h=b.h,f=b.a,0!==(h.flags&6)?(b=b.a=R(h),S(a,f,b,c,d,!0),h.flags&=-7,e=1):e=P(a,f,c,d);else if(0!==(f&32768)){var g=b.o;h=b.h;var m=g.select(h,b.f,c);f=b.a;h===m?e=P(a,f,c,d):(e=1,b.a=R(g),b.h=m,S(a,f,b.a,c,d,!0))}else 0!==(f&65536)&&(!0===d&&(b.h=Object.assign({},c,b.f)),c=b.h),e=P(a,b.a,c,d);return e}
function ab(a,b){a.textContent="";a=b;do O(a),a=a.b;while(null!==a)}
function T(a,b,c){var d=b.c,f=null;if(0!==(d&3)){if(0!==(d&1))a=document.createTextNode(b.a);else{f=0!==(d&16384);if(0===(d&4)){var e=b.o;0!==(d&21504)?!0===f?a=document.createElementNS("http://www.w3.org/2000/svg",e):(a=document.createElement(0!==(d&1024)?"input":"button"),""!==e&&(a.type=e)):a=document.createElement(e)}else e=b.o,null===e.h&&T(a,e,c),a=ra.call(e.h,!1);0!==(d&262144)&&(H=a);void 0!==b.v&&(!0===f?D.call(a,"class",b.v):a.className=b.v);null!==b.f&&$a(a,f,null,b.f);null!==b.w&&Ya(a,
null,b.w);null!==b.m&&(a.H=b.m);f=b.a;if(null!==f)if(0!==(d&32)){do d=T(a,f,c),A.call(a,d,null),f=f.b;while(null!==f)}else 0!==(d&3072)?(c=a,d=f,"string"===typeof d?c.value=d:c.checked=d):a.innerHTML=f}f=a}else 0!==(d&16)?(d=f=new b.o(b.f),d=b.a=R(d),a=T(a,d,c)):(0!==(d&98304)?0!==(d&32768)?(d=b.o,f=d.select(null,b.f,c),b.a=R(d)):c=f=Object.assign({},c,b.f):b.a=R(b.o),a=T(a,b.a,c));b.h=f;return a}function U(a,b,c,d){d=T(a,c,d);A.call(a,d,b);N(c)}
function S(a,b,c,d,f,e){if(b===c)P(a,c,d,f);else{var h=c.c;if(0!==((b.c^c.c)&268041439)||0!==(b.c&32796)&&b.o!==c.o||!1!==e&&b.i!==c.i)e=T(a,c,d),qa.call(a,e,K(b)),O(b),N(c);else if(c.h=e=b.h,0!==(h&3))if(0!==(h&1))b.a!==c.a&&(e.nodeValue=c.a);else{a=0!==(h&16384);if(b.v!==c.v){var g=void 0===c.v?"":c.v;!0===a?D.call(e,"class",g):e.className=g}b.f!==c.f&&$a(e,a,b.f,c.f);b.w!==c.w&&Ya(e,b.w,c.w);if(b.m!==c.m){a=b.m;g=c.m;var m;if(null===a)null!==g&&Va(g);else if(null===g)Wa(a);else if(a.constructor!==
Array)Va(g),M(a);else if(g.constructor!==Array)for(L(g),m=0;m<a.length;++m){var p=a[m];null!==p&&M(p)}else{for(m=0;m<a.length&&m<g.length;){p=a[m];var l=g[m++];p!==l&&(null!==l&&L(l),null!==p&&M(p))}for(;m<g.length;)p=g[m++],null!==p&&L(p);for(;m<a.length;)p=a[m++],null!==p&&M(p)}e.H=c.m}a=b.a;c=c.a;if(a!==c)if(b=b.c,null===a)if(0!==(h&32)){do U(e,null,c,d),c=c.b;while(null!==c)}else if(0!==(h&3072)){var k=e,q=c;"string"===typeof q?k.value=q:k.checked=q}else e.innerHTML=c;else if(null===c)0!==(b&
32)?ab(e,a):0!==(b&64)&&(e.textContent="");else if(0!==(b&32)){b=e;p=f;f=a;e=c;h=a.l;c=c.l;var ja=0;g=0;a:for(;;){for(;!0===(f.i===e.i&&0===((f.c^e.c)&128));)if(S(b,f,e,d,p,!1),ja++,f===h?g|=1:f=f.b,e===c?g|=2:e=e.b,g)break a;for(;!0===(h.i===c.i&&0===((h.c^c.c)&128));)if(S(b,h,c,d,p,!1),ja++,f===h?g|=1:h=h.l,e===c?g|=2:c=c.l,g)break a;break}if(g){if(3!==g)if(1===g){k=null===c.b?null:K(c.b);do U(b,k,e,d),e=e.b;while(e!==c.b)}else{do k=f,B.call(b,K(k)),O(k),f=f.b;while(f!==h.b)}}else{var ka=0,y=0,
Na=!1;l=e;do l.c&128?(void 0===k&&(k=new Map),k.set(l.i,y)):(void 0===q&&(q=new Map),q.set(l.i,y)),y++,l=l.b;while(l!==c.b);var Oa=Array(y);m=Array(y).fill(-1);l=e;for(g=0;g<y;g++)Oa[g]=l,l=l.b;var Q=0;g=0;var C=f;do{var z=C.c&128?k?k.get(C.i):void 0:q?q.get(C.i):void 0;void 0===z?C.i=null:(m[z]=ka,g>z?Na=!0:g=z,l=Oa[z],S(b,C,l,d,p,!1),Q++);ka++;C=C.b}while(C!==h.b);if(ja||Q){for(g=ka-Q;0<g;)null===f.i&&(k=f,B.call(b,K(k)),O(k),g--),f=f.b;if(Na)for(q=bb(m),z=q.length-1,l=c,g=y-1;0<=g;g--)-1===m[g]?
(k=null===l.b?null:K(l.b),U(b,k,l,d)):0>z||g!==q[z]?(k=null===l.b?null:K(l.b),A.call(b,K(l),k)):z--,l=l.l;else if(Q!==y)for(l=c,g=y-1;0<=g;g--)-1===m[g]&&(k=null===l.b?null:K(l.b),U(b,k,l,d)),l=l.l}else for(ab(b,a);e!==c.b;)U(b,null,e,d),e=e.b}}else 0!==(b&64)?e.innerHTML=c:"string"===typeof c?e.value!==c&&(e.value=c):e.checked=c}else 0!==(h&16)?(k=e,e=b.f,h=c.f,k.u=h,q=b.a,0!==(k.flags&6)||e!==h===!0?(b=c.a=R(k),S(a,q,b,d,f,!0),k.flags&=-7):(c.a=b.a,P(a,q,d,f))):(k=c.o,0!==(h&98304)?0!==(h&32768)?
(k=c.o,q=e,e=k.select(q,c.f,d),c.h=e,q===e?(c.a=b.a,P(a,c,d,f)):(c.a=R(k),S(a,b.a,c.a,d,f,!0))):(!0===f||b.f!==c.f?(f=!0,d=c.h=Object.assign({},d,c.f)):d=c.h=e,S(a,b.a,c.a,d,f,!0)):b.f===c.f||0!==(h&131072)&&b.f!==c.f!==!0?(c.a=b.a,P(a,c.a,d,f)):(q=b.a,k=c.a=R(k),S(a,q,k,d,f,!0)))}}
function bb(a){var b=a.slice(),c=[];c.push(0);for(var d,f,e=0,h=a.length;e<h;++e)if(-1!==a[e])if(d=c[c.length-1],a[d]<a[e])b[e]=d,c.push(e);else{d=0;for(f=c.length-1;d<f;){var g=(d+f)/2|0;a[c[g]]<a[e]?d=g+1:f=g}a[e]<a[c[d]]&&(0<d&&(b[e]=c[d-1]),c[d]=e)}d=c.length;for(f=c[d-1];0<d--;)c[d]=f,f=b[f];return c}var V=[],cb={},W=!1;
function Ha(){if(W){W=!1;for(var a=0;a<V.length;++a){var b=V[a],c=b.K,d=b.L;if(b.B){var f=b.G;f?(d?S(c,d,f,cb,!1,!0):(U(c,null,f,cb),u&1&&(c.onclick=ma)),b.L=f):d&&(B.call(c,K(d)),O(d),c=V.pop(),c!==b&&V.length&&(V[V.indexOf(b)]=c));b.G=null;b.B=!1}else d&&P(c,d,cb,!1)}}}za=function(){W||(W=!0,I(),Ga());0!==(E&16)&&Fa()};function db(a){return new J(30408706,"div",null,a,null)}var eb={x:-1,y:0},fb={x:1,y:0},gb={x:0,y:-1},hb={x:0,y:1};
function ib(a){a=void 0===a?{x:0,y:0}:a;this.body=[];this.A=4;this.body.push(a)}fa.Object.defineProperties(ib.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return this.body[this.body.length-1]}}});function jb(){var a=void 0===a?20:a;var b=void 0===b?20:b;this.rows=a;this.cols=b;this.cells=Array(a*b).fill(0)}function X(a,b){return a.cols*b.y+b.x}function Y(a,b,c){a.cells[X(a,b)]|=c}function kb(a,b){var c=Z.j;c.cells[X(c,a)]&=~b}
function lb(a){do var b=Math.random()*a.cells.length|0;while(0!==a.cells[b]);a.cells[b]|=4}function mb(a,b){return{x:a.x+b.x,y:a.y+b.y}}function nb(){Ia.apply(this,arguments);var a=this;this.g={source:Xa.M,flags:2,N:function(b){switch(b.S.keyCode){case 37:return a.u.value.s=eb,1;case 38:return a.u.value.s=gb,1;case 39:return a.u.value.s=fb,1;case 40:return a.u.value.s=hb,1}},C:0,u:null,state:null}}ea(nb,Ia);
function R(a){var b=a.u.value.j;return db(a.u.value.F?"SnakeGame gameOver":"SnakeGame").J(Ja(db("Grid").D({tabIndex:0}),{width:30*b.cols+"px",height:30*b.rows+"px"}).e(a.g).autofocus(!0).J(Ka(b.cells,function(a){return db(a&1?a&2?"Cell body head":"Cell body":a&4?"Cell food":"Cell")})))}
var ob=function(a){return function(b){return new J(16,a,b,void 0,null)}}(nb),pb=document.getElementById("app"),Z=new function(){var a=this;this.F=!1;this.direction={x:1,y:0};this.j=new jb;this.g=new ib;this.s=null;this.g.body.forEach(function(b){Y(a.j,b,1)});Y(this.j,this.g.g,2);lb(this.j)};
function qb(){if(!Z.F){if(Z.s){var a=mb(Z.direction,Z.s);if(0!==a.x||0!==a.y)Z.direction=Z.s;Z.s=null}a=mb(Z.g.g,Z.direction);var b=Z.j.cols,c=Z.j.rows;a={x:(a.x%b+b)%b,y:(a.y%c+c)%c};kb(Z.g.g,2);b=Z.g;b.body.push(a);b.A?(b.A--,b=null):(c=b.body[0],b.body=b.body.splice(1),b=c);b&&kb(b,1);Y(Z.j,a,2);b=Z.j;b.cells[X(b,a)]&1?Z.F=!0:(b=Z.j,b.cells[X(b,a)]&4&&(Z.g.A=3,kb(a,4),lb(Z.j)));Y(Z.j,a,1)}a=ob({value:Z});a:{for(b=0;b<V.length;++b)if(c=V[b],c.K===pb){b=c;break a}b=void 0}b?(b.G=a,b.B=!0):V.push({K:pb,
L:null,G:a,B:!0});W||(W=!0,I(),Ga());0!==(E&16)&&Fa();setTimeout(qb,100)}qb();}).call(this);

//# sourceMappingURL=bundle.js.map
