{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/operations.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/factories.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/shortcuts.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/empty_object.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/context.ts","webpack:////home/void/w/ts/ivi/packages/ivi-scheduler/src/index.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/array.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/repeatable_task_list.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/noop.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/error.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/core/feature_detection.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/dom/namespaces.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/state.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/reconciler.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/root.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/scheduler/index.ts","webpack:////home/void/w/ts/ivi/packages/ivi/src/vdom/hooks.ts","webpack:////home/void/w/ts/ivi/packages/ivi-html/src/index.ts","webpack:////home/void/w/ts/ivi-examples/node_modules/perf-monitor/dist/es5/perf-monitor.js","webpack:///./src/css.ts","webpack:///./src/init.ts","webpack:///./src/state.ts","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","createOpType","flags","descriptor","TRACK_BY_KEY","createOpNode","type","data","operations_key","k","v","TrackByKey","items","factories_element","tag","svg","className","attrs","children","htmlElement","component","shouldUpdate","props","nodeProto","Node","shortcuts_elementProto","Element","_","insertBefore","removeChild","replaceChild","cloneNode","setAttribute","setAttributeNS","removeAttribute","EMPTY_OBJECT","_context","setContext","context","tmp","restoreContext","getContext","rAF","requestAnimationFrame","sMT","fn","Promise","resolve","then","unorderedArrayDeleteByIndex","array","index","length","last","pop","unorderedArrayDelete","item","indexOf","runRepeatableTasks","tasks","NOOP","ERROR_HANDLERS","catchError","apply","arguments","e","forEach","h","opts","[object Object]","window","addEventListener","KeyboardEvent","MouseEvent","IOS_GESTURE_EVENT","SVG_NAMESPACE","createStateNode","op","state","getDOMNode","node","_nextNode","_index","_deepStateFlags","_dirtyContext","_moveNode","_singleChild","_pushDeepState","_popDeepState","prev","current","_dirtyCheck","parentElement","stateNode","hooks","deepState","dirtyCheck","_update","update","domNode","assign","prevContext","_unmountWalk","unmountHooks","unmount","_unmount","_mountText","document","createTextNode","_createElement","opType","createElementNS","createElement","_updateAttrs","_mountObject","opData","opFlags","proto","childrenState","stateFlags","nextNode","deepStateFlags","Array","_mountChildren","_mount","child","result","j","push","nextOp","prevOp","stateChildren","nodeValue","prevData","nextData","nextClassName","nextChildren","_updateChildren","nextProps","textContent","updateChildrenTrackByKeys","dirtyContext","a","b","aStartNode","bStartNode","start","aEnd","bEnd","aEndNode","bEndNode","outer","aLength","bLength","nullableState","sources","pos","updated","keyIndex","Map","set","opNode","seq","lis","slice","u","updateStyle","element","style","bValue","setProperty","removeProperty","_updateAttr","next","ROOTS","findRoot","container","find","root","onclick","run","_flags","_clock","_microtasks","_mutationEffects","_domLayoutEffects","_beforeMutations","_afterMutations","_frameStartTime","withSchedulerTick","inner","runMicrotasks","clock","scheduleMicrotask","task","withNextFrame","time","performance","now","_handleNextFrame","requestNextFrame","requestDirtyCheck","render","addHook","hook","useSelect","selector","prevSelector","lastChecked","nextState","useDetached","withEffect","reset","detached","handler","div","span","table","tbody","td","tr","extendStatics","MonitorWidgetFlags","MonitorMaxSamples","MonitorSamplesResult","min","max","mean","this","MonitorSamples","maxSamples","samples","_i","addSample","each","calc","sum","frameTasks","rafId","__extends","setPrototypeOf","__proto__","__","constructor","MonitorGraphHeight","MonitorGraphWidth","Widget","_this","_sync","sync","_dirty","cssText","invalidate","Error","MonitorWidget","_super","unitName","label","text","HideMin","minText","appendChild","HideMax","maxText","HideMean","meanText","HideLast","lastText","HideGraph","canvas","width","height","ctx","scale","RoundValues","toFixed","Math","round","toString","fillStyle","fillRect","perf_monitor_container","CounterWidget","counter","checkInit","body","startFPSMonitor","w","fps","startMemMonitor","undefined","memory","usedJSHeapSize","setTimeout","ProfilerDetails","widget","startTime","profilerInstances","initProfiler","profiler","endProfile","queryClassName","elapsed","countClassName","count","mutations","N","parseQueryString","split","decodeURIComponent","replace","randomQuery","query","random","randomQueries","queries","floor","EMPTY_QUERY","_nextId","createDB","id","getTopFiveQueries","db","qs","sort","randomUpdate","entryFormatElapsed","minutes","comps","main_state","createState","arrow","Popover","DatabaseList","getDB","idx","topFiveQueries","map","q","Main","dbs","location","search","substr","parseInt","parseFloat","sliderContainer","display","slider","marginBottom","marginTop","Number","target","firstChild","init","main_container","getElementById","tick"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","import { EventHandler } from \"../events/event_handler\";\nimport { NodeFlags } from \"./node_flags\";\nimport { StateNode } from \"./state\";\nimport { ElementProtoDescriptor } from \"./element_proto\";\nimport { ComponentDescriptor } from \"./component\";\n\nexport interface OpType {\n  readonly flags: NodeFlags;\n  readonly descriptor: ComponentDescriptor | ElementProtoDescriptor | string | null;\n}\n\nexport const createOpType = (\n  flags: NodeFlags,\n  descriptor: ComponentDescriptor | ElementProtoDescriptor | string | null,\n): OpType => ({ flags, descriptor });\n\nconst EVENTS = createOpType(NodeFlags.Events, null);\nconst REF = createOpType(NodeFlags.Ref, null);\nconst CONTEXT = createOpType(NodeFlags.Context, null);\nconst TRACK_BY_KEY = createOpType(NodeFlags.TrackByKey | NodeFlags.MultipleChildren, null);\n\nexport interface OpNode<T = any> {\n  readonly type: OpType;\n  readonly data: T;\n}\n\nexport const createOpNode = <T>(type: OpType, data: T): OpNode<T> => ({ type, data });\n\nexport interface ElementData<T = any> {\n  readonly className: string | undefined;\n  readonly attrs: T | undefined;\n  readonly children: OpChildren;\n}\n\nexport type OpChildren = string | number | OpNode | RecursiveOpChildrenArray | null;\nexport interface RecursiveOpChildrenArray extends Array<OpChildren> { }\n\nexport interface OpData<T = any> {\n  readonly data: T;\n  readonly child: OpNode;\n}\n\nexport interface Ref<T> {\n  v: T;\n}\n\nexport type EventsData = OpData<EventHandler | Array<EventHandler | null> | null>;\nexport type RefData = OpData<Ref<StateNode>>;\nexport type ContextData = OpData<{}>;\n\nexport const Events = (\n  data: EventHandler | Array<EventHandler | null> | null, child: OpNode,\n): OpNode<EventsData> => (\n    createOpNode(EVENTS, { data, child })\n  );\n\nexport const Ref = (data: Ref<StateNode>, child: OpNode): OpNode<RefData> => createOpNode(REF, { data, child });\nexport const Context = (data: {}, child: OpNode): OpNode<ContextData> => createOpNode(CONTEXT, { data, child });\n\nexport interface Key<K, V> {\n  readonly k: K;\n  readonly v: V;\n}\nexport const key = <K, V>(k: K, v: V): Key<K, V> => ({ k, v });\n\nexport const TrackByKey = (items: Key<any, OpNode | number | string>[]) => createOpNode(TRACK_BY_KEY, items);\n","// import { CSSStyleProps } from \"../dom/style\";\nimport { NodeFlags } from \"./node_flags\";\nimport { OpNode, OpChildren, ElementData, createOpNode, createOpType } from \"./operations\";\nimport { StateNode } from \"./state\";\n\nfunction element<T, U>(tag: string, svg: boolean) {\n  const type = createOpType(\n    svg === true ? (NodeFlags.Element | NodeFlags.Svg) : NodeFlags.Element,\n    tag,\n  );\n  return (\n    className?: string,\n    attrs?: {},\n    children: OpChildren = null,\n  ) => (\n      createOpNode<ElementData>(type, { className, attrs, children })\n    );\n}\n\nexport const htmlElement: <T, U>(tag: string) => (\n  className?: string,\n  attrs?: {},\n  children?: OpChildren,\n) => OpNode<ElementData<T>> = (tag: string) => element(tag, false);\nexport const svgElement: <T, U>(tag: string) => (\n  className?: string,\n  attrs?: {},\n  children?: OpChildren,\n) => OpNode<ElementData<T>> = (tag: string) => element(tag, true);\n\n/**\n * `element()` creates a factory that produces elements with predefined attributes.\n *\n * @example\n *\n *     const DivWithIdAttribute = element(div(_, { id: \"predefined-id\" }));\n *\n *     render(\n *       DivWithIdAttribute(\"class-name\", { title: \"Title\" }, \"Hello World\"),\n *       document.getElementById(\"app\")!,\n *     );\n *\n * @param proto - Element prototype\n * @returns factory that produces elements with predefined attributes\n */\nexport function elementProto<P>(proto: OpNode<P>) {\n  const type = createOpType(proto.type.flags | NodeFlags.ElementProto, { node: null, proto });\n  return (\n    className?: string,\n    attrs?: {},\n    children: OpChildren = null,\n  ) => createOpNode<ElementData>(type, { className, attrs, children });\n}\n\n/**\n * component creates a virtual DOM node factory that produces nodes for components.\n *\n * @example\n *\n *     const A = component<string>(() => {\n *       let _text;\n *       const click = onClick((ev) => console.log(_text));\n *\n *       return (text) => (\n *         _text = text,\n *         button()\n *           .e(click(text))\n *           .t(\"Click Me\")\n *       );\n *     });\n *\n * @param c - Component function.\n * @param shouldUpdate - `shouldUpdate` function.\n * @returns factory that produces component nodes\n */\nexport function component(\n  c: (c: StateNode) => () => OpNode,\n): () => OpNode<undefined>;\n\n/**\n * component creates a virtual DOM node factory that produces nodes for components.\n *\n * @example\n *\n *     const A = component<string>(() => {\n *       let _text;\n *       const click = onClick((ev) => console.log(_text));\n *\n *       return (text) => (\n *         _text = text,\n *         button()\n *           .e(click(text))\n *           .t(\"Click Me\")\n *       );\n *     });\n *\n * @param c - Component function.\n * @param shouldUpdate - `shouldUpdate` function.\n * @returns factory that produces component nodes\n */\nexport function component<P>(\n  c: (c: StateNode) => (props: P) => OpNode,\n  shouldUpdate?: undefined extends P ? undefined : (prev: P, next: P) => boolean,\n): undefined extends P ? (props?: P) => OpNode<P> : (props: P) => OpNode<P>;\n\n/**\n * component creates a virtual DOM node factory that produces nodes for components.\n *\n * @example\n *\n *     const A = component<string>(() => {\n *       let _text;\n *       const click = onClick((ev) => console.log(_text));\n *\n *       return (text) => (\n *         _text = text,\n *         button()\n *           .e(click(text))\n *           .t(\"Click Me\")\n *       );\n *     });\n *\n * @param c - Component function.\n * @param shouldUpdate - `shouldUpdate` function.\n * @returns factory that produces component nodes\n */\nexport function component<P>(\n  c: (c: StateNode) => (props: P) => OpNode,\n  shouldUpdate?: (prev: P, next: P) => boolean,\n): (props: P) => OpNode<P> {\n  const type = createOpType(NodeFlags.Component, { c, shouldUpdate });\n  return (props: P) => createOpNode(type, props);\n}\n\n/**\n * statelessComponent creates a virtual DOM node factory that produces nodes for stateless components.\n *\n * @example\n *\n *     const A = statelessComponent<string>(() => {\n *       return (text) => div().t(text);\n *     });\n *\n * @param update - Update function.\n * @param shouldUpdate - `shouldUpdate` function.\n * @returns factory that produces stateless component nodes\n */\nexport function statelessComponent(\n  update: () => OpNode,\n): () => OpNode<undefined>;\n\n/**\n * statelessComponent creates a virtual DOM node factory that produces nodes for stateless components.\n *\n * @example\n *\n *     const A = statelessComponent<string>(() => {\n *       return (text) => div().t(text);\n *     });\n *\n * @param update - Update function.\n * @param shouldUpdate - `shouldUpdate` function.\n * @returns factory that produces stateless component nodes\n */\nexport function statelessComponent<P>(\n  update: (props: P) => OpNode,\n  shouldUpdate?: undefined extends P ? undefined : (prev: P, next: P) => boolean,\n): undefined extends P ? (props?: P) => OpNode<P> : (props: P) => OpNode<P>;\n\n/**\n * statelessComponent creates a virtual DOM node factory that produces nodes for stateless components.\n *\n * @example\n *\n *     const A = statelessComponent<string>(() => {\n *       return (text) => div().t(text);\n *     });\n *\n * @param update - Update function.\n * @param shouldUpdate - `shouldUpdate` function.\n * @returns factory that produces stateless component nodes\n */\nexport function statelessComponent<P>(\n  update: (props: P) => OpNode,\n  shouldUpdate?: undefined extends P ? undefined : (prev: P, next: P) => boolean,\n): (props: P) => OpNode<P> {\n  return component(() => update, shouldUpdate);\n}\n\n/**\n * context creates a virtual DOM node that will modify current context.\n *\n * @example\n *\n *     render(\n *       context({ key: 123 },\n *         ChildComponent(),\n *       ),\n *       DOMContainer,\n *     );\n *\n * @param ctx - Context object\n * @param child - child Virtual DOM node\n * @returns context node\n */\n// export function context<T = {}>(ctx: T, child: OpNode): OpNode<T> {\n//   /* istanbul ignore else */\n//   if (DEBUG) {\n//     if (child._l !== child) {\n//       throw new Error(\"Context node contains an invalid child. Child should be a singular VNode.\");\n//     }\n//   }\n//   const n = new OpNode<T>(\n//     VNodeFlags.UpdateContext,\n//     null,\n//     ctx,\n//     \"\",\n//     void 0,\n//   );\n//   n._c = child;\n//   return n;\n// }\n","const nodeProto = Node.prototype;\nconst elementProto = Element.prototype;\n\n/**\n * Shortcut for an `Object.prototype.hasOwnProperty`.\n */\nexport const objectHasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Shortcut for a `Node.prototype.insertBefore`.\n */\nexport const nodeInsertBefore = nodeProto.insertBefore;\n\n/**\n * Shortcut for a `Node.prototype.removeChild`.\n */\nexport const nodeRemoveChild = nodeProto.removeChild;\n\n/**\n * Shortcut for a `Node.prototype.replaceChild`.\n */\nexport const nodeReplaceChild = nodeProto.replaceChild;\n\n/**\n * Shortcut for a `Node.prototype.cloneNode`.\n */\nexport const nodeCloneNode = nodeProto.cloneNode;\n\n/**\n * Shortcut for an `Element.prototype.setAttribute`.\n */\nexport const elementSetAttribute = elementProto.setAttribute;\n\n/**\n * Shortcut for an `Element.prototype.setAttributeNS`.\n */\nexport const elementSetAttributeNS = elementProto.setAttributeNS;\n\n/**\n * Shortcut for an `Element.prototype.removeAttribute`.\n */\nexport const elementRemoveAttribute = elementProto.removeAttribute;\n\n/**\n * Shortcut for an `undefined` value.\n */\nexport const _ = void 0;\n","/**\n * Empty object.\n */\nexport const EMPTY_OBJECT = /* istanbul ignore else */DEBUG ? Object.freeze({}) : {};\n","/**\n * Current context.\n */\nlet _context = {};\n\n/**\n * setContext assigns current context.\n *\n * Should be executed before going deeper into Context node.\n *\n * @param context - Current context.\n * @returns previous context\n */\nexport function setContext(context: {}): {} {\n  const tmp = _context;\n  _context = context;\n  return tmp;\n}\n\n/**\n * restoreContext restores previous context.\n *\n * Should be executed after processing Context node.\n *\n * @param context - Previous context.\n */\nexport function restoreContext(context: {}): void {\n  _context = context;\n}\n\n/**\n * getContext retrieves current context.\n *\n * @returns current context\n */\nexport function getContext(): {} {\n  return _context;\n}\n","export const rAF = requestAnimationFrame;\nexport const sMT = (fn: () => void) => { Promise.resolve().then(fn); };\n","/**\n * append pushes item to an array and automatically creates a new array when it doesn't exist.\n *\n * @param array - Array\n * @param item - Item\n * @returns Array\n */\nexport const append = <T>(array: T[] | null, item: T) => array === null ? [item] : (array.push(item), array);\n\n/**\n * unorderedArrayDeleteIndex deletes item from an array with O(1) complexity.\n *\n * It swaps item at `index` position with the last item and removes the last one.\n *\n * @param array - Array\n * @param index - Index of an item to delete\n */\nexport function unorderedArrayDeleteByIndex<T>(array: T[], index: number): void {\n  const length = array.length - 1;\n  const last = array.pop();\n  if (index !== length) {\n    array[index] = last!;\n  }\n}\n\n/**\n * unorderedArrayDelete deletes item from an array with O(1) complexity.\n *\n * It swaps item at `index` position with the last item and deletes the last one.\n *\n * @param array - Array\n * @param item - Item to delete\n */\nexport function unorderedArrayDelete<T>(array: T[], item: T): void {\n  const index = array.indexOf(item);\n  /* istanbul ignore else */\n  if (DEBUG) {\n    if (index === -1) {\n      throw new Error(`Failed to delete an item from an array, item doesn't exist in the array`);\n    }\n  }\n  unorderedArrayDeleteByIndex(array, index);\n}\n","import { unorderedArrayDeleteByIndex } from \"./array\";\n\n/**\n * RepeatableTaskList is a data structure for tasks that will be repeated until they return `true` value.\n */\nexport type RepeatableTaskList = Array<() => boolean | void>;\n\n/**\n * runRepeatableTasks runs repeatable tasks.\n *\n * @param tasks - Repeatable tasks\n */\nexport function runRepeatableTasks(tasks: RepeatableTaskList): void {\n  for (let i = 0; i < tasks.length; ++i) {\n    if (tasks[i]() === true) {\n      unorderedArrayDeleteByIndex(tasks, i--);\n    }\n  }\n}\n","/**\n * NOOP function.\n */\nexport const NOOP = () => { /**/ };\n\n/**\n * NOOP_FALSE function always returns `false` value.\n *\n * @returns `false` value.\n */\nexport const NOOP_FALSE = () => false;\n\n/**\n * NOOP_TRUE function always returns `true` value.\n *\n * @returns `true` value.\n */\nexport const NOOP_TRUE = () => true;\n","const ERROR_HANDLERS: Array<(e: any) => void> = [];\n\n/**\n * addErrorHandler adds an error handler for errors catched by functions decorated with `catchError()`.\n *\n * @param handler error handler.\n */\nexport function addErrorHandler(handler: (e: any) => void): void {\n  ERROR_HANDLERS.push(handler);\n}\n\n/**\n * catchError is a decorator that catches exceptions and invokes error handlers registered with `addErrorHandler()`.\n *\n * @noinline\n * @throws\n * @param fn - Function to decorate\n * @returns function decorated with a catchError\n */\nexport function catchError<T>(fn: (...args: any[]) => T): (...args: any[]) => T;\nexport function catchError<T>(fn: () => T): (...args: any[]) => T {\n  return function () {\n    try {\n      return fn.apply(void 0, arguments);\n    } catch (e) {\n      ERROR_HANDLERS.forEach((h) => { h(e); });\n      throw e;\n    }\n  };\n}\n","/**\n * Feature Detection is used to implement polyfills or just disable some features when browser doesn't support them.\n * For example, when browser doesn't support passive events, we can just ignore it and always use active events.\n */\n\n/* istanbul ignore next */\n/**\n * Passive event listeners are a new feature in the DOM spec that enable developers to opt-in to better scroll\n * performance by eliminating the need for scrolling to block on touch and wheel event listeners. Developers can\n * annotate touch and wheel listeners with {passive: true} to indicate that they will never invoke preventDefault.\n *\n * https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nexport const PASSIVE_EVENTS = /*#__PURE__*/((TARGET === \"electron\") ? true :\n  (() => {\n    let v = false;\n    try {\n      // Test via a getter in the options object to see if the passive property is accessed\n      const opts = Object.defineProperty({}, \"passive\", {\n        get() {\n          v = true;\n        },\n      });\n      window.addEventListener(\"test\", null as any as (ev: Event) => void, opts);\n    } catch (e) {\n      // ignore\n    }\n    return v;\n  })());\n\n/* istanbul ignore next */\n/**\n * `key` property is available on KeyboardEvent instances.\n */\nexport const KEYBOARD_EVENT_KEY = /*#__PURE__*/(\n  (TARGET === \"electron\") ||\n  (TARGET === \"evergreen\") ||\n  KeyboardEvent.prototype.hasOwnProperty(\"key\")\n);\n\n/* istanbul ignore next */\n/**\n * `buttons` property is available on MouseEvent instances.\n */\nexport const MOUSE_EVENT_BUTTONS = /*#__PURE__*/(\n  (TARGET === \"electron\") ||\n  (TARGET === \"evergreen\") ||\n  MouseEvent.prototype.hasOwnProperty(\"buttons\")\n);\n\n/* istanbul ignore next */\n/**\n * Touch Events support.\n */\nexport const TOUCH_EVENTS = (\"ontouchstart\" in window);\n\n/* istanbul ignore next */\n/**\n * Pointer Events support.\n */\nexport const POINTER_EVENTS = ((TARGET === \"electron\") || (\"PointerEvent\" in window));\n\n/* istanbul ignore next */\n/**\n * InputDeviceCapabilities support.\n *\n * http://wicg.github.io/InputDeviceCapabilities/\n */\nexport const INPUT_DEVICE_CAPABILITIES = ((TARGET === \"electron\") || \"InputDeviceCapabilities\" in window);\n\n/* istanbul ignore next */\n/**\n * iOS proprietary GestureEvent.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/GestureEvent}\n */\nexport const IOS_GESTURE_EVENT = (TARGET !== \"electron\") && (\"GestureEvent\" in window);\n","export const SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nexport const XLINK_NAMESPACE = \"http://www.w3.org/1999/xlink\";\nexport const XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\n","import { NodeFlags } from \"./node_flags\";\nimport { OpNode } from \"./operations\";\nimport { ComponentHooks } from \"./component\";\n\nexport interface StateNode {\n  op: OpNode | string | number;\n  flags: NodeFlags;\n  children: StateNode | Array<StateNode | null> | null;\n  state: Node | ComponentHooks | {} | null;\n}\n\nexport const createStateNode = (op: OpNode | string | number): StateNode => (\n  { op, flags: 0, children: null, state: null }\n);\n\nexport function getDOMNode(node: StateNode): Node {\n  if ((node.flags & (NodeFlags.Element | NodeFlags.Text)) === 0) {\n    return getDOMNode(node.children as StateNode);\n  }\n  return node.state as Node;\n}\n","import { NodeFlags } from \"./node_flags\";\nimport { SVG_NAMESPACE } from \"../dom/namespaces\";\nimport { CSSStyleProps } from \"../dom/style\";\nimport { AttributeDirective } from \"./attribute_directive\";\nimport { OpNode, ElementData, RecursiveOpChildrenArray, Key, OpData, ContextData } from \"./operations\";\nimport { StateNode, createStateNode, getDOMNode } from \"./state\";\nimport { ElementProtoDescriptor } from \"./element_proto\";\nimport { ComponentDescriptor, ComponentHooks } from \"./component\";\nimport { getContext, setContext, restoreContext } from \"./context\";\n\nlet _nextNode!: Node | null;\nlet _index!: number;\nlet _deepStateFlags!: NodeFlags;\nlet _dirtyContext!: boolean;\nlet _moveNode!: boolean;\nlet _singleChild!: boolean;\n\nexport function _resetState(): void {\n  _nextNode = null;\n  _index = 0;\n  _deepStateFlags = 0;\n  _dirtyContext = false;\n  _moveNode = false;\n  _singleChild = false;\n}\n\nfunction _pushDeepState(): NodeFlags {\n  const s = _deepStateFlags;\n  _deepStateFlags = 0;\n  return s;\n}\n\nfunction _popDeepState(prev: NodeFlags, current: NodeFlags): NodeFlags {\n  const r = current | _deepStateFlags;\n  _deepStateFlags |= prev;\n  return r;\n}\n\nexport function _dirtyCheck(parentElement: Element, stateNode: StateNode): void {\n  const { flags, children } = stateNode;\n  let i;\n\n  if ((flags & NodeFlags.Component) !== 0) {\n    const hooks = stateNode.state as ComponentHooks;\n    const deepState = _pushDeepState();\n    if (\n      ((flags & NodeFlags.Dirty) !== 0) ||\n      ((flags & NodeFlags.DirtyCheck) !== 0 && hooks.dirtyCheck!(getContext()) === true)\n    ) {\n      stateNode.children = _update(\n        parentElement,\n        children as StateNode,\n        hooks.update!((stateNode.op as OpNode).data),\n      );\n    } else if ((flags & NodeFlags.DeepStateDirtyCheck) !== 0) {\n      _dirtyCheck(parentElement, children as StateNode);\n    } else {\n      const domNode = getDOMNode(stateNode);\n      if (_moveNode === true) {\n        _moveNode = false;\n        parentElement.insertBefore(domNode, _nextNode);\n      }\n      _nextNode = domNode;\n    }\n    stateNode.flags = (stateNode.flags & NodeFlags.SelfFlags) | _deepStateFlags;\n    _deepStateFlags |= deepState | ((stateNode.flags & NodeFlags.DeepStateFlags) << NodeFlags.DeepStateShift);\n  } else if ((flags & NodeFlags.DeepStateDirtyCheck) !== 0) {\n    const deepState = _pushDeepState();\n    if ((flags & (NodeFlags.Element | NodeFlags.Text)) !== 0) {\n      const domNode = stateNode.state as Node;\n      if (_moveNode === true) {\n        _moveNode = false;\n        parentElement.insertBefore(domNode, _nextNode);\n      }\n      if (children !== null) {\n        if ((flags & NodeFlags.MultipleChildren) !== 0) {\n          for (i = 0; i < (children as Array<StateNode | null>).length; i++) {\n            const c = (children as Array<StateNode | null>)[i];\n            if (c !== null) {\n              _dirtyCheck(domNode as Element, c);\n            }\n          }\n        } else {\n          _singleChild = true;\n          _dirtyCheck(domNode as Element, children as StateNode);\n          _singleChild = false;\n        }\n      }\n      _nextNode = domNode;\n    } else if ((flags & NodeFlags.TrackByKey) !== 0) {\n      i = (children as Array<StateNode>).length;\n      while (--i >= 0) {\n        _dirtyCheck(parentElement, (children as Array<StateNode>)[i]);\n      }\n    } else if ((flags & (NodeFlags.Events | NodeFlags.Ref)) !== 0) {\n      _dirtyCheck(parentElement, stateNode.children as StateNode);\n    } else {\n      if (_dirtyContext === true) {\n        stateNode.state = { ...getContext(), ...(stateNode.op as OpNode<ContextData>).data.data };\n      }\n      const prevContext = setContext(stateNode.state as {});\n      _dirtyCheck(parentElement, stateNode.children as StateNode);\n      restoreContext(prevContext);\n    }\n    stateNode.flags = _popDeepState(deepState, stateNode.flags);\n  } else {\n    const domNode = getDOMNode(stateNode);\n    if (_moveNode === true) {\n      _moveNode = false;\n      parentElement.insertBefore(domNode, _nextNode);\n    }\n    _nextNode = domNode;\n  }\n}\n\nfunction _unmountWalk(stateNode: StateNode): void {\n  const flags = stateNode.flags;\n  let i;\n\n  if ((flags & NodeFlags.DeepStateUnmount) !== 0) {\n    const children = stateNode.children;\n    if (children !== null) {\n      if ((flags & NodeFlags.MultipleChildren) !== 0) {\n        for (i = 0; i < (children as Array<StateNode | null>).length; i++) {\n          const c = (children as Array<StateNode | null>)[i];\n          if (typeof c === \"object\" && c !== null) {\n            _unmountWalk(c);\n          }\n        }\n      } else {\n        _unmountWalk(children as StateNode);\n      }\n    }\n  }\n\n  if ((flags & NodeFlags.Component) !== 0) {\n    const hooks = (stateNode.state as ComponentHooks);\n    const unmountHooks = hooks.unmount;\n    if (unmountHooks !== null) {\n      if (typeof unmountHooks === \"function\") {\n        unmountHooks();\n      } else {\n        for (i = 0; i < unmountHooks.length; i++) {\n          unmountHooks[i](true);\n        }\n      }\n    }\n  }\n}\n\nexport function _unmount(parentElement: Element, stateNode: StateNode): void {\n  if ((stateNode.flags & NodeFlags.TrackByKey) !== 0) {\n    const children = stateNode.children as StateNode[];\n    for (let i = 0; i < children.length; i++) {\n      parentElement.removeChild(getDOMNode(children[i]));\n    }\n  } else {\n    parentElement.removeChild(getDOMNode(stateNode));\n  }\n  _unmountWalk(stateNode);\n}\n\nfunction _mountText(\n  parentElement: Element,\n  stateNode: StateNode,\n  op: string | number,\n) {\n  const node = document.createTextNode(op as string);\n  parentElement.insertBefore(node, _nextNode);\n  _nextNode = node;\n  stateNode.state = node;\n  stateNode.flags = NodeFlags.Text;\n}\n\nfunction _createElement(node: Element | undefined, op: OpNode): Element {\n  const opType = op.type;\n  const svg = (opType.flags & NodeFlags.Svg) !== 0;\n  if (node === void 0) {\n    node = svg ?\n      document.createElementNS(SVG_NAMESPACE, opType.descriptor as string) :\n      document.createElement(opType.descriptor as string);\n  }\n\n  const { className, attrs } = op.data as ElementData;\n  if (className) {\n    /**\n     * SVGElement.className returns `SVGAnimatedString`\n     */\n    if (svg) {\n      (node as SVGElement).setAttribute(\"class\", className);\n    } else {\n      (node as HTMLElement).className = className;\n    }\n  }\n\n  if (attrs !== void 0) {\n    _updateAttrs(node, void 0, attrs);\n  }\n\n  return node;\n}\n\nfunction _mountObject(\n  parentElement: Element,\n  stateNode: StateNode,\n  op: OpNode,\n): void {\n  const opType = op.type;\n  const opData = op.data;\n  const opFlags = opType.flags;\n\n  if ((opFlags & NodeFlags.Element) !== 0) {\n    let node: Element | undefined;\n    const descriptor = opType.descriptor;\n    if ((opFlags & NodeFlags.ElementProto) !== 0) {\n      if ((descriptor as ElementProtoDescriptor).node === null) {\n        (descriptor as ElementProtoDescriptor).node = _createElement(\n          void 0,\n          (descriptor as ElementProtoDescriptor).proto,\n        );\n      }\n      node = (descriptor as ElementProtoDescriptor).node!.cloneNode(false) as Element;\n    }\n    node = _createElement(node, op);\n\n    let childrenState: StateNode | Array<StateNode | null> | null = null;\n    let stateFlags = opFlags;\n    const children = opData.children;\n    const nextNode = _nextNode;\n    _nextNode = null;\n    if (children !== null) {\n      const deepStateFlags = _pushDeepState();\n      if (children instanceof Array) {\n        stateFlags |= NodeFlags.MultipleChildren;\n        _mountChildren(node, children, childrenState = []);\n      } else {\n        childrenState = _mount(node, children);\n      }\n      stateFlags = _popDeepState(deepStateFlags, stateFlags);\n    }\n    parentElement.insertBefore(node, nextNode);\n    stateNode.flags = stateFlags;\n    stateNode.children = childrenState;\n    stateNode.state = node;\n    _nextNode = node;\n  } else if ((opFlags & NodeFlags.Component) !== 0) {\n    const hooks: ComponentHooks = { update: null, dirtyCheck: null, unmount: null };\n    stateNode.state = hooks;\n    const update = hooks.update = (op.type.descriptor as ComponentDescriptor).c(stateNode);\n    const deepStateFlags = _pushDeepState();\n    stateNode.children = _mount(parentElement, update(opData));\n    stateNode.flags = (stateNode.flags & NodeFlags.SelfFlags) | opFlags | _deepStateFlags;\n    _deepStateFlags |= deepStateFlags | ((stateNode.flags & NodeFlags.DeepStateFlags) << NodeFlags.DeepStateShift);\n  } else if ((opFlags & (NodeFlags.Events | NodeFlags.Ref | NodeFlags.Context)) !== 0) {\n    const deepStateFlags = _pushDeepState();\n    if ((opFlags & NodeFlags.Context) !== 0) {\n      const prevContext = setContext(\n        stateNode.state = { ...getContext(), ...(opData as OpData<ContextData>).data },\n      );\n      stateNode.children = _mount(parentElement, (opData as OpData<ContextData>).child);\n      restoreContext(prevContext);\n    } else {\n      if ((opFlags & NodeFlags.Ref) !== 0) {\n        opData.data.v = stateNode;\n      }\n      stateNode.children = _mount(parentElement, opData.child);\n    }\n    stateNode.flags = _popDeepState(deepStateFlags, opFlags);\n  } else { // ((opFlags & NodeFlags.TrackByKey) !== 0)\n    const items = opData as Key<any, OpNode>[];\n    const result = new Array(items.length);\n    let i = items.length;\n    const deepStateFlags = _pushDeepState();\n    while (--i >= 0) {\n      result[i] = _mount(parentElement, items[i].v);\n    }\n    stateNode.flags = _popDeepState(deepStateFlags, opFlags);\n    stateNode.children = result;\n  }\n}\n\nfunction _mountChildren(\n  parentElement: Element,\n  children: RecursiveOpChildrenArray,\n  result: Array<StateNode | null>,\n): void {\n  let j = children.length;\n  while (--j >= 0) {\n    const c = children[j];\n    if (c instanceof Array) {\n      _mountChildren(parentElement, c, result);\n    } else {\n      result.push(_mount(parentElement, c));\n    }\n  }\n}\n\nexport function _mount(\n  parentElement: Element,\n  op: OpNode | string | number | null,\n): StateNode | null {\n  if (op !== null) {\n    const stateNode = createStateNode(op);\n    if (typeof op === \"object\") {\n      _mountObject(parentElement, stateNode, op);\n    } else {\n      _mountText(parentElement, stateNode, op);\n    }\n    return stateNode;\n  }\n  return null;\n}\n\n/**\n * _update updates a stateNode with a next operation.\n *\n * @param parentElement - Parent DOM Element\n * @param stateNode - State Node\n * @param nextOp - Next Operation\n * @returns State Node\n */\nexport function _update(\n  parentElement: Element,\n  stateNode: StateNode,\n  nextOp: OpNode | string | number | null,\n): StateNode | null {\n  if (nextOp === null) { // null ops should be only inside of an element children lists\n    _unmount(parentElement, stateNode);\n    return null;\n  }\n  const prevOp = stateNode.op;\n  if (prevOp === nextOp) {\n    _dirtyCheck(parentElement, stateNode);\n    return stateNode;\n  }\n  stateNode.op = nextOp;\n  if (\n    (typeof prevOp !== typeof nextOp) ||\n    (typeof prevOp === \"object\" && prevOp.type !== (nextOp as OpNode).type)\n  ) {\n    // prevOp can't be === null (stateNode === null)\n    _unmount(parentElement, stateNode);\n    return _mount(parentElement, nextOp);\n  }\n\n  const stateFlags = stateNode.flags;\n  const stateChildren = stateNode.children;\n  const state = stateNode.state;\n  let deepStateFlags;\n\n  if ((stateFlags & (NodeFlags.Text | NodeFlags.Element)) !== 0) {\n    if (_moveNode === true) {\n      _moveNode = false;\n      parentElement.insertBefore(state as Node, _nextNode);\n    }\n    if ((stateFlags & NodeFlags.Text) !== 0) {\n      (state as Node).nodeValue = nextOp as string;\n    } else {\n      const prevData = (prevOp as OpNode<ElementData>).data;\n      const nextData = (nextOp as OpNode<ElementData>).data as ElementData;\n\n      let nextClassName = nextData.className;\n      if (prevData.className !== nextClassName) {\n        if (nextClassName === void 0) {\n          nextClassName = \"\";\n        }\n        if ((stateFlags & NodeFlags.Svg) !== 0) {\n          (state as Element).setAttribute(\"class\", nextClassName);\n        } else {\n          (state as Element).className = nextClassName;\n        }\n      }\n\n      if (prevData.attrs !== nextData.attrs) {\n        _updateAttrs(state as Element, prevData.attrs, nextData.attrs);\n      }\n\n      const nextChildren = nextData.children;\n      deepStateFlags = _pushDeepState();\n      if (prevData.children !== nextChildren) {\n        _nextNode = null;\n        if ((stateFlags & NodeFlags.MultipleChildren) !== 0) {\n          _index = 0;\n          _updateChildren(\n            state as Element,\n            stateChildren as Array<StateNode | null>,\n            nextChildren as RecursiveOpChildrenArray,\n          );\n        } else {\n          _singleChild = true;\n          stateNode.children = stateChildren === null ?\n            _mount(\n              state as Element,\n              nextChildren as string | OpNode,\n            ) :\n            _update(\n              state as Element,\n              stateChildren as StateNode,\n              nextChildren as string | OpNode,\n            );\n          _singleChild = false;\n        }\n      }\n      stateNode.flags = _popDeepState(deepStateFlags, stateNode.flags);\n    }\n\n    _nextNode = state as Node;\n    return stateNode;\n  }\n\n  if ((stateFlags & NodeFlags.Component) !== 0) {\n    const descriptor = ((nextOp as OpNode).type.descriptor as ComponentDescriptor);\n    const prevProps = (prevOp as OpNode).data;\n    const nextProps = (nextOp as OpNode).data;\n    if (\n      ((stateFlags & NodeFlags.Dirty) !== 0) ||\n      (\n        (prevProps !== nextProps) &&\n        (descriptor.shouldUpdate === void 0 || descriptor.shouldUpdate(prevProps, nextProps) === true)\n      )\n    ) {\n      deepStateFlags = _pushDeepState();\n      stateNode.children = _update(\n        parentElement,\n        stateChildren as StateNode,\n        (stateNode.state as ComponentHooks).update!(nextProps),\n      );\n      stateNode.flags = (stateNode.flags & NodeFlags.SelfFlags) | _deepStateFlags;\n      _deepStateFlags |= deepStateFlags | ((stateNode.flags & NodeFlags.DeepStateFlags) << NodeFlags.DeepStateShift);\n    } else {\n      _dirtyCheck(parentElement, stateNode);\n    }\n    return stateNode;\n  }\n\n  deepStateFlags = _pushDeepState();\n  if ((stateFlags & NodeFlags.TrackByKey) !== 0) {\n    const nextChildren = ((nextOp as OpNode).data as Key<any, OpNode>[]);\n    if (nextChildren.length === 0) {\n      if (_singleChild === true) {\n        parentElement.textContent = \"\";\n        for (let i = 0; i < (stateChildren as StateNode[]).length; i++) {\n          _unmountWalk((stateChildren as StateNode[])[i]);\n        }\n      } else {\n        for (let i = 0; i < (stateChildren as StateNode[]).length; i++) {\n          _unmount(parentElement, (stateChildren as StateNode[])[i]);\n        }\n      }\n      stateNode.children = [];\n    } else if ((stateChildren as StateNode[]).length === 0) {\n      return _mount(parentElement, nextOp)!;\n    } else {\n      stateNode.children = updateChildrenTrackByKeys(\n        parentElement,\n        stateNode.children! as StateNode[],\n        (prevOp as OpNode).data as Key<any, OpNode>[],\n        nextChildren,\n      );\n    }\n  } else if ((stateFlags & (NodeFlags.Events | NodeFlags.Ref)) !== 0) {\n    stateNode.children = _update(\n      parentElement,\n      stateNode.children as StateNode,\n      (nextOp as OpNode<OpData>).data.child,\n    );\n  } else { // if ((stateFlags & NodeFlags.Context) !== 0) {\n    const dirtyContext = _dirtyContext;\n    if (\n      (prevOp as OpNode<ContextData>).data.data !== (nextOp as OpNode<ContextData>).data.data ||\n      _dirtyContext === true\n    ) {\n      stateNode.state = { ...getContext(), ...(nextOp as OpNode<ContextData>).data.data };\n      _dirtyContext = true;\n    }\n    const context = setContext(stateNode.state as {});\n    _update(\n      parentElement,\n      stateNode.children as StateNode,\n      (nextOp as OpNode<ContextData>).data.child,\n    );\n    restoreContext(context);\n    _dirtyContext = dirtyContext;\n  }\n\n  stateNode.flags = _popDeepState(deepStateFlags, stateNode.flags);\n  return stateNode;\n}\n\n/**\n * Update children list with a static shape.\n *\n * @param parentElement - Parent DOM Element\n * @param a - Stateful nodes\n * @param b - Next children operations\n */\nfunction _updateChildren(\n  parentElement: Element,\n  a: Array<StateNode | null>,\n  b: RecursiveOpChildrenArray,\n): void {\n  let j = b.length;\n  while (--j >= 0) {\n    let i = _index;\n    const nextOp = b[j];\n    if (nextOp instanceof Array) {\n      _updateChildren(parentElement, a, nextOp);\n    } else {\n      const stateNode = a[i];\n      a[i] = (stateNode === null) ?\n        _mount(parentElement, nextOp) :\n        _update(parentElement, stateNode, nextOp);\n      _index = ++i;\n    }\n  }\n}\n\n/**\n * Update children list with track by key algorithm.\n *\n * High-level overview of the algorithm that is implemented in this function (slightly outdated, but the key ideas are\n * the same).\n *\n * This algorithm finds a minimum[1] number of DOM operations. It works in several steps:\n *\n * 1. Find common suffix and prefix.\n *\n * This optimization technique is searching for nodes with identical keys by simultaneously iterating over nodes in the\n * old children list `A` and new children list `B` from both sides:\n *\n *  A: -> [a b c d] <-\n *  B: -> [a b d] <-\n *\n * Here we can skip nodes \"a\" and \"b\" at the begininng, and node \"d\" at the end.\n *\n *  A: -> [c] <-\n *  B: -> [] <-\n *\n * Here it will check if the size of one of the list is equal to zero. When length of the old children list is zero,\n * it will insert all remaining nodes from the new list, and when length of the new children list is zero, it will\n * remove all remaining nodes from the old list.\n *\n * When algorithm can't find a solution with this simple optimization technique, it will go to the next step of the\n * algorithm. For example:\n *\n *  A: -> [a b c d e f g] <-\n *  B: -> [a c b h f e g] <-\n *\n * Nodes \"a\" and \"g\" at the edges are the same, skipping them.\n *\n *  A: -> [b c d e f] <-\n *  B: -> [c b h f e] <-\n *\n * Here we are stuck, so we need to switch to the next step.\n *\n * 2. Look for removed and inserted nodes, and simultaneously check if one of the nodes is moved.\n *\n * First we create an array `P` with the length of the new children list and assign to each position value `-1`, it has\n * a meaning of a new node that should be inserted. Later we will assign node positions in the old children list to this\n * array.\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *  P: [. . . . .] // . == -1\n *\n * Then we need to build an index `I` that maps keys with node positions of the remaining nodes from the new children\n * list.\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *  P: [. . . . .] // . == -1\n *  I: {\n *    c: 0,\n *    b: 1,\n *    h: 2,\n *    f: 3,\n *    e: 4,\n *  }\n *  last = 0\n *\n * With this index, we start to iterate over the remaining nodes from the old children list and check if we can find a\n * node with the same key in the index. If we can't find any node, it means that it should be removed, otherwise we\n * assign position of the node in the old children list to the positions array.\n *\n *  A: [b c d e f]\n *      ^\n *  B: [c b h f e]\n *  P: [. 0 . . .] // . == -1\n *  I: {\n *    c: 0,\n *    b: 1, <-\n *    h: 2,\n *    f: 3,\n *    e: 4,\n *  }\n *  last = 1\n *\n * When we assigning positions to the positions array, we also keep a position of the last seen node in the new children\n * list, if the last seen position is larger than current position of the node at the new list, then we are switching\n * `moved` flag to `true`.\n *\n *  A: [b c d e f]\n *        ^\n *  B: [c b h f e]\n *  P: [1 0 . . .] // . == -1\n *  I: {\n *    c: 0, <-\n *    b: 1,\n *    h: 2,\n *    f: 3,\n *    e: 4,\n *  }\n *  last = 1 // last > 0; moved = true\n *\n * The last position `1` is larger than current position of the node at the new list `0`, switching `moved` flag to\n * `true`.\n *\n *  A: [b c d e f]\n *          ^\n *  B: [c b h f e]\n *  P: [1 0 . . .] // . == -1\n *  I: {\n *    c: 0,\n *    b: 1,\n *    h: 2,\n *    f: 3,\n *    e: 4,\n *  }\n *  moved = true\n *\n * Node with key \"d\" doesn't exist in the index, removing node.\n *\n *  A: [b c d e f]\n *            ^\n *  B: [c b h f e]\n *  P: [1 0 . . 3] // . == -1\n *  I: {\n *    c: 0,\n *    b: 1,\n *    h: 2,\n *    f: 3,\n *    e: 4, <-\n *  }\n *  moved = true\n *\n * Assign position for `e`.\n *\n *  A: [b c d e f]\n *              ^\n *  B: [c b h f e]\n *  P: [1 0 . 4 3] // . == -1\n *  I: {\n *    c: 0,\n *    b: 1,\n *    h: 2,\n *    f: 3, <-\n *    e: 4,\n *  }\n *  moved = true\n *\n * Assign position for 'f'.\n *\n * At this point we are checking if `moved` flag is on, or if the length of the old children list minus the number of\n * removed nodes isn't equal to the length of the new children list. If any of this conditions is true, then we are\n * going to the next step.\n *\n * 3. Find minimum number of moves if `moved` flag is on, or insert new nodes if the length is changed.\n *\n * When `moved` flag is on, we need to find the\n * [longest increasing subsequence](http://en.wikipedia.org/wiki/Longest_increasing_subsequence) in the positions array,\n * and move all nodes that doesn't belong to this subsequence.\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *  P: [1 0 . 4 3] // . == -1\n *  LIS:     [1 4]\n *  moved = true\n *\n * Now we just need to simultaneously iterate over the new children list and LIS from the end and check if the current\n * position is equal to a value from LIS.\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *              ^  // new_pos == 4\n *  P: [1 0 . 4 3] // . == -1\n *  LIS:     [1 4]\n *              ^  // new_pos == 4\n *  moved = true\n *\n * Node \"e\" stays at the same place.\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *            ^    // new_pos == 3\n *  P: [1 0 . 4 3] // . == -1\n *  LIS:     [1 4]\n *            ^    // new_pos != 1\n *  moved = true\n *\n * Node \"f\" is moved, move it before the next node \"e\".\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *          ^      // new_pos == 2\n *  P: [1 0 . 4 3] // . == -1\n *          ^      // old_pos == -1\n *  LIS:     [1 4]\n *            ^\n *  moved = true\n *\n * Node \"h\" has a `-1` value in the positions array, insert new node \"h\".\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *        ^        // new_pos == 1\n *  P: [1 0 . 4 3] // . == -1\n *  LIS:     [1 4]\n *            ^    // new_pos == 1\n *  moved = true\n *\n * Node \"b\" stays at the same place.\n *\n *  A: [b c d e f]\n *  B: [c b h f e]\n *      ^          // new_pos == 0\n *  P: [1 0 . 4 3] // . == -1\n *  LIS:     [1 4]\n *          ^      // new_pos != undefined\n *  moved = true\n *\n * Node \"c\" is moved, move it before the next node \"b\".\n *\n * When moved flag is off, we don't need to find LIS, and we just iterate over the new children list and check its\n * current position in the positions array, if it is `-1`, then we insert new node.\n *\n * [1] Actually it is almost minimum number of dom ops, when node is removed and another one is inserted at the same\n * place, instead of insert and remove dom ops, we can use one replace op. It will make everything even more\n * complicated, and other use cases will be slower, so I don't think that it is worth to use replace here.\n *\n * @param parentElement - Parent DOM element\n * @param state - Stateful nodes\n * @param a - Previous operations\n * @param b - Next operations\n */\nfunction updateChildrenTrackByKeys(\n  parentElement: Element,\n  state: StateNode[],\n  a: Key<any, OpNode>[],\n  b: Key<any, OpNode>[],\n): StateNode[] {\n  const result = new Array(b.length);\n  let aStartNode = a[0];\n  let bStartNode = b[0];\n  let start = 0;\n  let aEnd = a.length - 1;\n  let bEnd = b.length - 1;\n  let aEndNode = a[aEnd];\n  let bEndNode = b[bEnd];\n  let i: number;\n  let j: number | undefined;\n  let stateNode: StateNode;\n\n  // Step 1\n  outer: while (true) {\n    // Sync nodes with the same key at the end.\n    while (aEndNode.k === bEndNode.k) {\n      result[bEnd] = _update(parentElement, state[aEnd--], bEndNode.v);\n      if (start > --bEnd || start > aEnd) {\n        break outer;\n      }\n      aEndNode = a[aEnd];\n      bEndNode = b[bEnd];\n    }\n\n    // Sync nodes with the same key at the beginning.\n    while (aStartNode.k === bStartNode.k) {\n      // delayed update (all updates should be performed from right-to-left)\n      if (++start > aEnd || start > bEnd) {\n        break outer;\n      }\n      aStartNode = a[start];\n      bStartNode = b[start];\n    }\n\n    break;\n  }\n\n  if (start > aEnd) {\n    // All nodes from a are synced, insert the rest from b.\n    while (bEnd >= start) {\n      result[bEnd] = _mount(parentElement, b[bEnd--].v);\n    }\n  } else if (start > bEnd) {\n    // All nodes from b are synced, remove the rest from a.\n    i = start;\n    do {\n      _unmount(parentElement, state[i++]);\n    } while (i <= aEnd);\n  } else { // Step 2\n    const aLength = aEnd - start + 1;\n    const bLength = bEnd - start + 1;\n    const nullableState = state as Array<StateNode | null>;\n\n    // Mark all nodes as inserted.\n    const sources = new Array(bLength);\n    for (i = 0; i < bLength; ++i) {\n      sources[i] = -1;\n    }\n\n    // When pos === 1000000, it means that one of the nodes in the wrong position.\n    let pos = 0;\n    let updated = 0;\n\n    const keyIndex = new Map<any, number>();\n    // Build an index that maps keys to their locations in the new children list.\n    for (j = start; j <= bEnd; ++j) {\n      keyIndex.set(b[j].k, j);\n    }\n\n    for (i = start; i <= aEnd && updated < bLength; ++i) {\n      j = keyIndex.get(a[i].k);\n      if (j !== void 0) {\n        pos = (pos > j) ? 1000000 : j;\n        ++updated;\n        sources[j - start] = i;\n        result[j] = state[i];\n        nullableState[i] = null;\n      }\n    }\n\n    if (aLength === a.length && updated === 0) {\n      // Noone is synced.\n      if (_singleChild === true) {\n        parentElement.textContent = \"\";\n        for (i = start; i <= aEnd; i++) {\n          _unmountWalk(state[i]);\n        }\n      } else {\n        for (i = start; i <= aEnd; i++) {\n          _unmount(parentElement, state[i]);\n        }\n      }\n      while (bEnd >= 0) {\n        result[bEnd] = _mount(parentElement, b[bEnd--].v);\n      }\n    } else {\n      // Step 3\n      for (i = start; i <= aEnd; i++) {\n        stateNode = state[i];\n        if (stateNode !== null) {\n          _unmount(parentElement, stateNode);\n        }\n      }\n\n      let opNode;\n      if (pos === 1000000) {\n        const seq = lis(sources);\n        j = seq.length - 1;\n        i = bLength;\n        while (--i >= 0) {\n          pos = start + i;\n          opNode = b[pos].v;\n          if (sources[i] === -1) {\n            result[pos] = _mount(parentElement, opNode);\n          } else {\n            stateNode = result[pos];\n            if (j < 0 || i !== seq[j]) {\n              _moveNode = true;\n            } else {\n              --j;\n            }\n            result[pos] = _update(parentElement, stateNode, opNode);\n            _moveNode = false;\n          }\n        }\n      } else {\n        i = bLength;\n        while (--i >= 0) {\n          pos = start + i;\n          opNode = b[pos].v;\n          result[pos] = (sources[i] === -1) ?\n            _mount(parentElement, opNode) :\n            _update(parentElement, result[pos], opNode);\n        }\n      }\n    }\n  }\n\n  // update nodes from Step 1 (prefix only)\n  while (--start >= 0) {\n    result[start] = _update(parentElement, state[start], b[start].v);\n  }\n\n  return result;\n}\n\n/**\n * Slightly modified Longest Increased Subsequence algorithm, it ignores items that have -1 value, they're representing\n * new items.\n *\n * {@link http://en.wikipedia.org/wiki/Longest_increasing_subsequence}\n *\n * @param a - Array of numbers\n * @returns Longest increasing subsequence\n * @noinline\n */\nfunction lis(a: number[]): number[] {\n  const p = a.slice();\n  const result: number[] = [];\n  result[0] = 0;\n  let n = 0;\n  let u: number;\n  let v: number;\n  let j: number;\n\n  for (let i = 0; i < a.length; ++i) {\n    const k = a[i];\n    if (k === -1) {\n      continue;\n    }\n\n    j = result[n];\n    if (a[j] < k) {\n      p[i] = j;\n      result[++n] = i;\n      continue;\n    }\n\n    u = 0;\n    v = n;\n\n    while (u < v) {\n      j = ((u + v) / 2) | 0;\n      if (a[result[j]] < k) {\n        u = j + 1;\n      } else {\n        v = j;\n      }\n    }\n\n    if (k < a[result[u]]) {\n      if (u > 0) {\n        p[i] = result[u - 1];\n      }\n      result[u] = i;\n    }\n  }\n\n  v = result[n];\n\n  while (n >= 0) {\n    result[n--] = v;\n    v = p[v];\n  }\n\n  return result;\n}\n\n/**\n * Update DOM styles.\n *\n * @param element - HTML or SVG Element\n * @param a - Prev styles\n * @param b - Next styles\n */\nfunction updateStyle(\n  element: HTMLElement | SVGElement,\n  a: CSSStyleProps | undefined,\n  b: CSSStyleProps | undefined,\n): void {\n  const style = element.style;\n  let key: string;\n  let bValue;\n\n  if (a === void 0) {\n    // a is empty, insert all styles from b.\n    for (key in b!) {\n      bValue = (b as { [key: string]: string })[key];\n      if (bValue !== void 0) {\n        style.setProperty(key, bValue);\n      }\n    }\n  } else if (b !== void 0) {\n    for (key in b) {\n      bValue = (b as { [key: string]: string })[key];\n      if ((a as { [key: string]: string })[key] !== bValue) {\n        if (bValue !== void 0) {\n          style.setProperty(key, bValue);\n        } else {\n          style.removeProperty(key);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Update DOM attribute.\n *\n * @param element - DOM Element\n * @param key - Attribute name\n * @param prev - Previous value\n * @param next - Next value\n */\nfunction _updateAttr(\n  element: Element,\n  key: string,\n  prev: string | number | boolean | AttributeDirective<any> | CSSStyleProps | undefined,\n  next: string | number | boolean | AttributeDirective<any> | CSSStyleProps | undefined,\n): void {\n  if (prev !== next) {\n    if (key !== \"style\") {\n      if (typeof next === \"object\") {\n        next.u(\n          element,\n          key,\n          prev === void 0 ? void 0 : (prev as AttributeDirective<any>).v,\n          next.v,\n        );\n      } else {\n        if (typeof next === \"boolean\") {\n          next = next ? \"\" : void 0;\n        }\n        if (next === void 0) {\n          element.removeAttribute(key);\n        } else {\n          element.setAttribute(key, next as string);\n        }\n      }\n    } else {\n      updateStyle(element as HTMLElement, prev as CSSStyleProps, next as CSSStyleProps);\n    }\n  }\n}\n\n/**\n * Update DOM attributes.\n *\n * @param element - DOM element\n * @param a - Prev DOM attributes\n * @param b - Next DOM attributes\n */\nfunction _updateAttrs(\n  element: Element,\n  a: { [key: string]: string | number | boolean | AttributeDirective<any> | undefined } | undefined,\n  b: { [key: string]: string | number | boolean | AttributeDirective<any> | undefined } | undefined,\n): void {\n  let key: string;\n\n  if (a === void 0) {\n    // a is empty, insert all attributes from b.\n    for (key in b!) {\n      _updateAttr(element, key, void 0, b![key]);\n    }\n  } else if (b !== void 0) {\n    for (key in b) {\n      _updateAttr(element, key, a[key], b[key]);\n    }\n  }\n}\n","import { IOS_GESTURE_EVENT } from \"../core/feature_detection\";\nimport { NOOP } from \"../core/noop\";\nimport { unorderedArrayDelete } from \"../core/array\";\nimport { checkNestingViolations } from \"../debug/html_nesting_rules\";\nimport { OpNode } from \"./operations\";\nimport { StateNode } from \"./state\";\nimport { _mount, _update, _unmount, _dirtyCheck, _resetState } from \"./reconciler\";\n\n/**\n * Root.\n */\nexport interface Root {\n  /**\n   * Container element.\n   */\n  container: Element;\n  /**\n   * Next virtual DOM node.\n   */\n  next: OpNode | string | number | null | undefined;\n  /**\n   * Current virtual DOM node.\n   */\n  state: StateNode | null;\n}\n\n/**\n * Root nodes.\n */\nexport const ROOTS = [] as Root[];\n\n/**\n * Find root node of a container.\n *\n * @param container - DOM Node that contains root node\n * @returns root node or undefined when root node doesn't exist\n */\nexport const findRoot = (container: Element) => ROOTS.find((r) => r.container === container);\n\n/**\n * Performs a dirty checking.\n */\nexport function dirtyCheck() {\n  for (let i = 0; i < ROOTS.length; ++i) {\n    const root = ROOTS[i];\n    const { container, state, next } = root;\n    root.next = void 0;\n    _resetState();\n\n    if (next) {\n      if (state) {\n        root.state = _update(container, state, next);\n      } else {\n        root.state = _mount(container, next);\n        /* istanbul ignore if */\n        /**\n         * Fix for the Mouse Event bubbling on iOS devices.\n         *\n         * #quirks\n         *\n         * http://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n         */\n        if (TARGET === \"browser\" && IOS_GESTURE_EVENT) {\n          (container as HTMLElement).onclick = NOOP;\n        }\n      }\n    } else if (state) {\n      if (next === null) {\n        _unmount(container, state);\n        unorderedArrayDelete(ROOTS, root);\n        --i;\n      } else {\n        _dirtyCheck(container, state);\n      }\n    }\n\n    /* istanbul ignore else */\n    if (DEBUG) {\n      if (root.state) {\n        checkNestingViolations(container, root.state);\n      }\n    }\n  }\n}\n","import { sMT, rAF } from \"ivi-scheduler\";\nimport { runRepeatableTasks, RepeatableTaskList } from \"../core/repeatable_task_list\";\nimport { NOOP } from \"../core/noop\";\nimport { catchError } from \"../core/error\";\nimport { printWarn } from \"../debug/print\";\nimport { NodeFlags } from \"../vdom/node_flags\";\nimport { OpNode } from \"../vdom/operations\";\nimport { StateNode } from \"../vdom/state\";\nimport { ROOTS, findRoot, dirtyCheck } from \"../vdom/root\";\n\n/**\n * Update flags.\n */\nexport const enum UpdateFlags {\n  /**\n   * Forces synchronous update.\n   */\n  RequestSyncUpdate = 1,\n}\n\n/**\n * Scheduler flags.\n */\nconst enum SchedulerFlags {\n  /**\n   * Running inside of a scheduler context.\n   */\n  Running = 1,\n  /**\n   * Scheduler tick is pending for an execution.\n   */\n  TickPending = 1 << 1,\n  /**\n   * Frame update is pending for an execution.\n   */\n  NextFramePending = 1 << 2,\n  /**\n   * Sync Frame update is pending for an execution.\n   */\n  NextSyncFramePending = 1 << 3,\n  /**\n   * Running inside of a frame update context.\n   */\n  UpdatingFrame = 1 << 4,\n  /**\n   * Dirty checking is pending for an execution.\n   */\n  DirtyCheckPending = 1 << 5,\n}\n\nconst enum SchedulerDebugFlags {\n  DirtyCheckingFinished = 1,\n  MutationsFinished = 1 << 1,\n  LayoutFinished = 1 << 2,\n}\n\n/**\n * Task list.\n */\ninterface TaskList { v: Array<() => void>; }\n\n/**\n * createTaskList creates a task list.\n *\n * @returns task list\n */\nconst createTaskList = () => ({ v: [] }) as TaskList;\n\n/**\n * Execute tasks from the `TaskList`.\n *\n * @param t - Task list\n */\nfunction run(t: TaskList) {\n  while (t.v.length > 0) {\n    const tasks = t.v;\n    let i = 0;\n    t.v = [];\n    do {\n      tasks[i++]();\n    } while (i < tasks.length);\n  }\n}\n\nlet _flags: SchedulerFlags = 0;\nlet _debugFlags: SchedulerDebugFlags;\n/** istanbul ignore else */\nif (DEBUG) {\n  _debugFlags = 0;\n}\nlet _clock = 1;\nconst _microtasks = createTaskList();\nconst _mutationEffects = createTaskList();\nconst _domLayoutEffects = createTaskList();\nconst _beforeMutations = [] as RepeatableTaskList;\nconst _afterMutations = [] as RepeatableTaskList;\nlet _frameStartTime = 0;\n\n/**\n * withSchedulerTick wraps `inner` function into a scheduler context execution.\n *\n * @param inner - Inner function.\n * @returns function that will be executed in a scheduler context.\n */\nexport const withSchedulerTick = <T extends any[]>(inner: (...args: T) => void) => (\n  catchError(function () {\n    _flags |= SchedulerFlags.Running;\n    inner.apply(void 0, arguments);\n    run(_microtasks);\n    _flags &= ~(SchedulerFlags.Running | SchedulerFlags.TickPending);\n    ++_clock;\n  })\n) as (...args: T) => void;\n\nconst runMicrotasks = withSchedulerTick(NOOP);\n\n/**\n * clock returns monotonically increasing clock value.\n *\n * @returns current clock value.\n */\nexport const clock = () => _clock;\n\n/**\n * scheduleMicrotask adds task to the microtask queue.\n *\n * @param task - Microtask.\n */\nexport function scheduleMicrotask(task: () => void): void {\n  _microtasks.v.push(task);\n  if ((_flags & (SchedulerFlags.Running | SchedulerFlags.TickPending)) === 0) {\n    _flags |= SchedulerFlags.TickPending;\n    sMT(runMicrotasks);\n  }\n}\n\n/**\n * beforeMutations adds a hook that will be executed before DOM mutations.\n *\n * @param fn - hook.\n */\nexport function beforeMutations(fn: () => boolean | void): void {\n  _beforeMutations.push(fn);\n}\n\n/**\n * afterMutations adds a hook that will be executed after DOM mutations.\n *\n * @param fn - hook.\n */\nexport function afterMutations(fn: () => boolean | void): void {\n  _afterMutations.push(fn);\n}\n\n/**\n * frameStartTime returns current frame start time.\n *\n * @returns current frame start time.\n */\nexport const frameStartTime = () => _frameStartTime;\n\n/**\n * withNextFrame wraps `inner` function into a scheduler frame update context.\n *\n * @param inner - Inner function.\n * @returns function that will be executed in a frame update context.\n */\nexport const withNextFrame = (inner: (time?: number) => void) => (\n  withSchedulerTick((time?: number) => {\n    _flags |= SchedulerFlags.UpdatingFrame;\n    inner(time);\n\n    if ((_flags & SchedulerFlags.NextFramePending) !== 0) {\n      _frameStartTime = time === void 0 ? performance.now() : time;\n\n      runRepeatableTasks(_beforeMutations);\n      if ((_flags & SchedulerFlags.DirtyCheckPending) !== 0) {\n        dirtyCheck();\n      }\n      /** istanbul ignore else */\n      if (DEBUG) {\n        _debugFlags |= SchedulerDebugFlags.DirtyCheckingFinished;\n      }\n      run(_mutationEffects);\n      /** istanbul ignore else */\n      if (DEBUG) {\n        _debugFlags |= SchedulerDebugFlags.MutationsFinished;\n      }\n      runRepeatableTasks(_afterMutations);\n      run(_domLayoutEffects);\n      /** istanbul ignore else */\n      if (DEBUG) {\n        _debugFlags |= SchedulerDebugFlags.LayoutFinished;\n      }\n    }\n    _flags &= ~(\n      SchedulerFlags.UpdatingFrame |\n      SchedulerFlags.NextFramePending |\n      SchedulerFlags.NextSyncFramePending |\n      SchedulerFlags.DirtyCheckPending\n    );\n    /** istanbul ignore else */\n    if (DEBUG) {\n      _debugFlags &= ~(\n        SchedulerDebugFlags.DirtyCheckingFinished |\n        SchedulerDebugFlags.MutationsFinished |\n        SchedulerDebugFlags.LayoutFinished\n      );\n    }\n  })\n);\n\n/**\n * Frame tasks scheduler event handler.\n *\n * @param t Current time.\n */\nconst _handleNextFrame = withNextFrame(NOOP);\n\n/**\n * requestNextFrame requests an update for next frame.\n */\nexport function requestNextFrame(flags?: UpdateFlags): void {\n  if (\n    (flags !== void 0) &&\n    ((flags & UpdateFlags.RequestSyncUpdate) !== 0) &&\n    ((_flags & SchedulerFlags.NextSyncFramePending) === 0)\n  ) {\n    _flags |= SchedulerFlags.NextFramePending | SchedulerFlags.NextSyncFramePending;\n    if ((_flags & SchedulerFlags.UpdatingFrame) === 0) {\n      scheduleMicrotask(_handleNextFrame);\n    }\n  } else if ((_flags & SchedulerFlags.NextFramePending) === 0) {\n    _flags |= SchedulerFlags.NextFramePending;\n    if ((_flags & SchedulerFlags.UpdatingFrame) === 0) {\n      rAF(_handleNextFrame);\n    }\n  }\n}\n\n/**\n * Adds a write DOM task to the queue.\n *\n * @param fn - Write DOM task\n */\nexport function scheduleMutationEffect(fn: () => void, flags?: UpdateFlags): void {\n  /** istanbul ignore else */\n  if (DEBUG) {\n    if (_flags & SchedulerFlags.UpdatingFrame) {\n      if (_debugFlags & SchedulerDebugFlags.MutationsFinished) {\n        printWarn(\"Mutation effect is scheduled after mutations were finished\");\n      }\n    }\n  }\n  _mutationEffects.v.push(fn);\n  requestNextFrame(flags);\n}\n\n/**\n * Adds a DOM layout task to the queue.\n *\n * @param fn - Read DOM task\n */\nexport function scheduleLayoutEffect(fn: () => void, flags?: UpdateFlags): void {\n  /** istanbul ignore else */\n  if (DEBUG) {\n    if (_flags & SchedulerFlags.UpdatingFrame) {\n      if (_debugFlags & SchedulerDebugFlags.MutationsFinished) {\n        printWarn(\"Layout effect is scheduled after layout were finished\");\n      }\n    }\n  }\n  _domLayoutEffects.v.push(fn);\n  requestNextFrame(flags);\n}\n\nexport function requestDirtyCheck(flags?: UpdateFlags) {\n  /** istanbul ignore else */\n  if (DEBUG) {\n    if (_flags & SchedulerFlags.UpdatingFrame) {\n      if (_debugFlags & SchedulerDebugFlags.MutationsFinished) {\n        printWarn(\"Dirty checking is scheduled after dirty checking were finished\");\n      }\n    }\n  }\n  _flags |= SchedulerFlags.DirtyCheckPending;\n  requestNextFrame(flags);\n}\n\n/**\n * Invalidate component.\n *\n * @param c - Component instance\n * @param flags - See {@link UpdateFlags} for details.\n */\nexport function invalidate(c: StateNode, flags?: UpdateFlags): void {\n  c.flags |= NodeFlags.Dirty;\n  requestDirtyCheck(flags);\n}\n\n/**\n * dirty requests a dirty checking and returns current monotonic clock value.\n *\n * @param flags - See {@link UpdateFlags} for details.\n * @returns current monotonic clock value.\n */\nexport const dirty = (flags?: UpdateFlags) => (requestDirtyCheck(flags), _clock);\n\n/**\n * Render virtual DOM node into the container.\n *\n * @param next - Virtual DOM node to render\n * @param container - DOM Node that will contain rendered node\n * @param flags - See {@link UpdateFlags} for details\n */\nexport function render(next: OpNode | string | number | null, container: Element, flags?: UpdateFlags): void {\n  /* istanbul ignore else */\n  if (DEBUG) {\n    /**\n     * Rendering into the <body> element is disabled to make it possible to fix iOS quirk with click events.\n     */\n    if (container === document.body) {\n      throw new Error(\"Rendering into the <body> element aren't allowed\");\n    }\n    if (!document.body.contains(container)) {\n      throw new Error(\"Container element should be attached to the document\");\n    }\n  }\n\n  const root = findRoot(container);\n  if (root) {\n    root.next = next;\n  } else {\n    ROOTS.push({ container, next, state: null });\n  }\n\n  requestDirtyCheck(flags);\n}\n","import { EMPTY_OBJECT } from \"../core/empty_object\";\nimport { NodeFlags } from \"./node_flags\";\nimport { ComponentHooks } from \"./component\";\nimport { getContext } from \"./context\";\nimport { clock, scheduleMicrotask, scheduleMutationEffect, scheduleLayoutEffect } from \"../scheduler\";\nimport { StateNode } from \"./state\";\n\nfunction addHook<T extends Function>(hooks: null | T | T[], hook: T): T | T[] {\n  if (hooks === null) {\n    return hook;\n  }\n  if (typeof hooks === \"function\") {\n    return [hooks, hook];\n  }\n  hooks.push(hook);\n  return hooks;\n}\n\n/**\n * useSelect creates a selector hook.\n *\n * @example\n *\n *     const C = component<number>((h) => {\n *       const selector = useSelect<string, number, { data: string[] }>(c,\n *         (id, context) => context.data[id],\n *       );\n *\n *       return (id) => div().t(selector(id));\n *     });\n *\n * @param stateNode - Component instance.\n * @param selector - Selector function.\n * @returns Selector hook.\n */\nexport function useSelect<T>(\n  stateNode: StateNode,\n  selector: (props?: undefined, context?: undefined, prev?: T | undefined) => T,\n): () => T;\n\n/**\n * useSelect creates a selector hook.\n *\n * @example\n *\n *     const C = component<number>((h) => {\n *       const selector = useSelect<string, number, { data: string[] }>(c,\n *         (id, context) => context.data[id],\n *       );\n *\n *       return (id) => div().t(selector(id));\n *     });\n *\n * @param stateNode - Component instance.\n * @param selector - Selector function.\n * @returns Selector hook.\n */\nexport function useSelect<T, P>(\n  stateNode: StateNode,\n  selector: (props: P, context?: undefined, prev?: T | undefined) => T,\n  shouldUpdate?: undefined extends P ? undefined : (prev: P, next: P) => boolean,\n): undefined extends P ? () => T : (props: P) => T;\n\n/**\n * useSelect creates a selector hook.\n *\n * @example\n *\n *     const C = component<number>((h) => {\n *       const selector = useSelect<string, number, { data: string[] }>(c,\n *         (id, context) => context.data[id],\n *       );\n *\n *       return (id) => div().t(selector(id));\n *     });\n *\n * @param stateNode - Component instance.\n * @param selector - Selector function.\n * @returns Selector hook.\n */\nexport function useSelect<T, P, C>(\n  stateNode: StateNode,\n  selector: (props: P, context: C, prev?: T | undefined) => T,\n  shouldUpdate?: undefined extends P ? undefined : (prev: P, next: P) => boolean,\n): undefined extends P ? () => T : (props: P) => T;\n\n/**\n * useSelect creates a selector hook.\n *\n * @example\n *\n *     const C = component<number>((c) => {\n *       const selector = useSelect<string, number, { data: string[] }>(c,\n *         (id, context) => context.data[id],\n *       );\n *\n *       return (id) => div().t(selector(id));\n *     });\n *\n * @param c - Component instance.\n * @param selector - Selector function.\n * @returns Selector hook.\n */\nexport function useSelect<T, P, C extends {}>(\n  stateNode: StateNode,\n  selector: (props: P, context: C, prev: T | undefined) => T,\n  shouldUpdate?: (prev: P, next: P) => boolean,\n): (props: P) => T {\n  const prevSelector = (stateNode.state as ComponentHooks).dirtyCheck;\n  stateNode.flags |= NodeFlags.DirtyCheck;\n  let lastChecked = 0;\n  let state: T | undefined;\n  let props: P;\n\n  (stateNode.state as ComponentHooks).dirtyCheck = (context: {}) => {\n    if (prevSelector !== null && prevSelector(context) === true) {\n      return true;\n    }\n    if (state !== void 0) {\n      const nextState = selector(props, context as C, state);\n      lastChecked = clock();\n      if (state !== nextState) {\n        state = nextState;\n        return true;\n      }\n    }\n    return false;\n  };\n\n  return (nextProps: P) => {\n    if (\n      (state !== void 0) &&\n      ((shouldUpdate !== void 0 && shouldUpdate(props, nextProps) === true) || (props !== nextProps))\n    ) {\n      state = void 0;\n    }\n    if (state === void 0 || lastChecked < clock()) {\n      state = selector(nextProps, getContext() as C, state);\n    }\n    props = nextProps;\n    return state;\n  };\n}\n\n/**\n * useDetached creates a detached hook.\n *\n * @example\n *\n *     const C = component((h) => {\n *       useDetached(h, () => {\n *         console.log(\"detached\");\n *       });\n *\n *       return () => div();\n *     });\n *\n * @param stateNode - Component instance.\n * @param hook - Detached hook.\n */\nexport function useDetached(stateNode: StateNode, hook: () => void): void {\n  stateNode.flags |= NodeFlags.Unmount;\n  const hooks = stateNode.state as ComponentHooks;\n  hooks.unmount = addHook(hooks.unmount, hook);\n}\n\nfunction withEffect<P>(fn: (effect: () => void) => void): (\n  stateNode: StateNode,\n  hook: (props?: P) => (() => void) | void,\n  shouldUpdate?: (prev: P, next: P) => boolean,\n) => (props: P) => void {\n  return (stateNode, hook, shouldUpdate) => {\n    let reset: (() => void) | void;\n    let props: P | undefined = EMPTY_OBJECT as P;\n    let detached = false;\n    const handler = (d?: boolean) => {\n      if (reset !== void 0) {\n        reset();\n      }\n      if (d !== true) {\n        reset = hook(props);\n        if (reset !== void 0 && !detached) {\n          detached = true;\n          useDetached(stateNode, handler);\n        }\n      }\n    };\n\n    return (nextProps: P) => {\n      if (\n        props === EMPTY_OBJECT ||\n        (shouldUpdate !== void 0 && shouldUpdate(props as P, nextProps) === true) ||\n        props !== nextProps\n      ) {\n        props = nextProps;\n        fn(handler);\n      }\n    };\n  };\n}\n\n/**\n * useEffect creates a side effect hook.\n *\n * @example\n *\n *     const Counter = component<number>((c) => {\n *       let i = 0;\n *       const timer = useEffect<number>(c, (delay) => {\n *         const tid = setInterval(() => {\n *           i++;\n *           invalidate(c);\n *         }, delay);\n *         return () => { clearInterval(tid); };\n *       });\n *\n *       return (delay) => (\n *         timer(delay),\n *\n *         div().t(i),\n *       );\n *     });\n *\n * @param c - Component instance.\n * @param hook - Side effect function.\n * @param shouldUpdate - Should update function.\n * @returns side effect hook\n */\nexport const useEffect: <T = undefined>(\n  stateNode: StateNode,\n  hook: undefined extends T ? () => (() => void) | void : (props: T) => (() => void) | void,\n  shouldUpdate?: undefined extends T ? undefined : (prev: T, next: T) => boolean,\n) => undefined extends T ? () => void : (props: T) => void = /*#__PURE__*/withEffect(scheduleMicrotask) as any;\n\nexport const useMutationEffect: <T = undefined>(\n  stateNode: StateNode,\n  hook: undefined extends T ? () => (() => void) | void : (props: T) => (() => void) | void,\n  shouldUpdate?: undefined extends T ? undefined : (prev: T, next: T) => boolean,\n) => undefined extends T ? () => void : (props: T) => void = /*#__PURE__*/withEffect(scheduleMutationEffect) as any;\n\nexport const useLayoutEffect: <T = undefined>(\n  stateNode: StateNode,\n  hook: undefined extends T ? () => (() => void) | void : (props: T) => (() => void) | void,\n  shouldUpdate?: undefined extends T ? undefined : (prev: T, next: T) => boolean,\n) => undefined extends T ? () => void : (props: T) => void = /*#__PURE__*/withEffect(scheduleLayoutEffect) as any;\n","import {\n  HTMLAnchorElementAttrs, HTMLElementAttrs, HTMLAreaElementAttrs, HTMLAudioElementAttrs,\n  HTMLBaseElementAttrs, HTMLBodyElementAttrs, HTMLBRElementAttrs, HTMLButtonElementAttrs,\n  HTMLCanvasElementAttrs, HTMLQuoteElementAttrs, HTMLTableCaptionElementAttrs, HTMLTableColElementAttrs,\n  HTMLModElementAttrs, HTMLDivElementAttrs, HTMLDListElementAttrs, HTMLFieldSetElementAttrs, HTMLFormElementAttrs,\n  HTMLHeadElementAttrs, HTMLHeadingElementAttrs, HTMLHRElementAttrs, HTMLHtmlElementAttrs, HTMLIFrameElementAttrs,\n  HTMLImageElementAttrs, HTMLInputElementAttrs, HTMLLabelElementAttrs, HTMLLegendElementAttrs, HTMLLIElementAttrs,\n  HTMLLinkElementAttrs, HTMLMapElementAttrs, HTMLMenuElementAttrs, HTMLMetaElementAttrs, HTMLMeterElementAttrs,\n  HTMLOListElementAttrs, HTMLOptGroupElementAttrs, HTMLOptionElementAttrs, HTMLParagraphElementAttrs,\n  HTMLPictureElementAttrs, HTMLPreElementAttrs, HTMLProgressElementAttrs, HTMLScriptElementAttrs,\n  HTMLSelectElementAttrs, HTMLSourceElementAttrs, HTMLSpanElementAttrs, HTMLStyleElementAttrs,\n  HTMLTableDataCellElementAttrs, HTMLTableElementAttrs, HTMLTableHeaderCellElementAttrs, HTMLTableRowElementAttrs,\n  HTMLTableSectionElementAttrs, HTMLTemplateElementAttrs, HTMLTextAreaElementAttrs, HTMLTitleElementAttrs,\n  HTMLTrackElementAttrs, HTMLUListElementAttrs, HTMLVideoElementAttrs,\n\n  ATTRIBUTE_DIRECTIVE_SKIP_UNDEFINED,\n\n  AttributeDirective, htmlElement,\n} from \"ivi\";\n\n/**\n * {@link AttributeDirective} with `\"\"` value and {@link updateValue} sync function.\n */\nconst VALUE_EMPTY_STRING: AttributeDirective<string | number> = { v: \"\", u: updateValue };\n\n/**\n * {@link AttributeDirective} with `false` value and {@link updateChecked} sync function.\n */\nconst CHECKED_FALSE: AttributeDirective<boolean> = { v: false, u: updateChecked };\n\n/**\n * {@link AttributeDirective} with `true` value and {@link updateChecked} sync function.\n */\nconst CHECKED_TRUE: AttributeDirective<boolean> = { v: true, u: updateChecked };\n\n/**\n * Synchronization function for {@link AttributeDirective} created with {@link VALUE} function.\n *\n * @param element - Target element\n * @param key - Attribute key\n * @param prev - Previous value\n * @param next - Next value\n */\nfunction updateValue(\n  element: Element,\n  key: string,\n  prev: string | number | undefined,\n  next: string | number | undefined,\n) {\n  if (prev === void 0) {\n    if (next !== \"\") {\n      (element as HTMLInputElement | HTMLTextAreaElement).value = next as string;\n    }\n  } else {\n    if ((element as HTMLInputElement | HTMLTextAreaElement).value !== next) {\n      (element as HTMLInputElement | HTMLTextAreaElement).value = next as string;\n    }\n  }\n}\n\n/**\n * Synchronization function for {@link AttributeDirective} created with {@link CHECKED} function.\n *\n * @param element - Target element\n * @param key - Attribute key\n * @param prev - Previous value\n * @param next - Next value\n */\nfunction updateChecked(\n  element: Element,\n  key: string,\n  prev: boolean | undefined,\n  next: boolean | undefined,\n) {\n  if (prev === void 0) {\n    if (next) {\n      (element as HTMLInputElement).checked = next;\n    }\n  } else {\n    if ((element as HTMLInputElement).checked !== next) {\n      (element as HTMLInputElement).checked = next!;\n    }\n  }\n}\n\n/**\n * VALUE function creates a {@link AttributeDirective} that assigns a `value` property to an HTMLInputElement or\n * HTMLTextAreaElement.\n *\n * `undefined` values are ignored.\n *\n * @example\n *\n *   const e = input(\"\", { value: VALUE(\"value\") });\n *\n * @param v - Value\n * @returns {@link AttributeDirective}\n */\nexport function VALUE(v: string | number | undefined): AttributeDirective<string | number> {\n  return (v === void 0) ?\n    ATTRIBUTE_DIRECTIVE_SKIP_UNDEFINED :\n    v === \"\" ?\n      VALUE_EMPTY_STRING :\n      { v, u: updateValue };\n}\n\n/**\n * CHECKED function creates a {@link AttributeDirective} that assigns a `checked` property to an HTMLInputElement.\n *\n * `undefined` values are ignored.\n *\n * @example\n *\n *   const e = input(\"\", { checked: CHECKED(true) });\n *\n * @param v - Checked value\n * @returns {@link AttributeDirective}\n */\nexport function CHECKED(v: boolean | undefined): AttributeDirective<boolean> {\n  return (v === void 0) ?\n    ATTRIBUTE_DIRECTIVE_SKIP_UNDEFINED as any as AttributeDirective<boolean> :\n    v ? CHECKED_TRUE : CHECKED_FALSE;\n}\n\n/**\n * Creates Virtual DOM HTML element <a>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <a>\n */\nexport const a = htmlElement<HTMLAnchorElementAttrs, HTMLAnchorElement>(\"a\");\n\n/**\n * Creates Virtual DOM HTML element <abbr>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/abbr}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <abbr>\n */\nexport const abbr = htmlElement<HTMLElementAttrs, HTMLElement>(\"abbr\");\n\n/**\n * Creates Virtual DOM HTML element <address>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/address}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <address>\n */\nexport const address = htmlElement<HTMLElementAttrs, HTMLElement>(\"address\");\n\n/**\n * Creates Virtual DOM HTML element <article>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/article}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <article>\n */\nexport const article = htmlElement<HTMLElementAttrs, HTMLElement>(\"article\");\n\n/**\n * Creates Virtual DOM HTML element <aside>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/aside}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <aside>\n */\nexport const aside = htmlElement<HTMLElementAttrs, HTMLElement>(\"aside\");\n\n/**\n * Creates Virtual DOM HTML element <b>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/b}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <b>\n */\nexport const b = htmlElement<HTMLElementAttrs, HTMLElement>(\"b\");\n\n/**\n * Creates Virtual DOM HTML element <base>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <base>\n */\nexport const base = htmlElement<HTMLBaseElementAttrs, HTMLBaseElement>(\"base\");\n\n/**\n * Creates Virtual DOM HTML element <bdo>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/bdo}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <bdo>\n */\nexport const bdo = htmlElement<HTMLElementAttrs, HTMLElement>(\"bdo\");\n\n/**\n * Creates Virtual DOM HTML element <blockquote>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/blockquote}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <blockquote>\n */\nexport const blockquote = htmlElement<HTMLQuoteElementAttrs, HTMLQuoteElement>(\"blockquote\");\n\n/**\n * Creates Virtual DOM HTML element <body>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/body}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <body>\n */\nexport const body = htmlElement<HTMLBodyElementAttrs, HTMLBodyElement>(\"body\");\n\n/**\n * Creates Virtual DOM HTML element <br>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/br}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <br>\n */\nexport const br = htmlElement<HTMLBRElementAttrs, HTMLBRElement>(\"br\");\n\n/**\n * Creates Virtual DOM HTML element <button>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <button>\n */\nexport const button = htmlElement<HTMLButtonElementAttrs, HTMLButtonElement>(\"button\");\n\n/**\n * Creates Virtual DOM HTML element <canvas>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <canvas>\n */\nexport const canvas = htmlElement<HTMLCanvasElementAttrs, HTMLCanvasElement>(\"canvas\");\n\n/**\n * Creates Virtual DOM HTML element <caption>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/caption}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <caption>\n */\nexport const caption = htmlElement<HTMLTableCaptionElementAttrs, HTMLTableCaptionElement>(\"caption\");\n\n/**\n * Creates Virtual DOM HTML element <cite>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/cite}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <cite>\n */\nexport const cite = htmlElement<HTMLElementAttrs, HTMLElement>(\"cite\");\n\n/**\n * Creates Virtual DOM HTML element <code>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/code}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <code>\n */\nexport const code = htmlElement<HTMLElementAttrs, HTMLElement>(\"code\");\n\n/**\n * Creates Virtual DOM HTML element <col>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/col}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <col>\n */\nexport const col = htmlElement<HTMLTableColElementAttrs, HTMLTableColElement>(\"col\");\n\n/**\n * Creates Virtual DOM HTML element <colgroup>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/colgroup}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <colgroup>\n */\nexport const colgroup = htmlElement<HTMLTableColElementAttrs, HTMLTableColElement>(\"colgroup\");\n\n/**\n * Creates Virtual DOM HTML element <del>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/del}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <del>\n */\nexport const del = htmlElement<HTMLModElementAttrs, HTMLModElement>(\"del\");\n\n/**\n * Creates Virtual DOM HTML element <dfn>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dfn}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <dfn>\n */\nexport const dfn = htmlElement<HTMLElementAttrs, HTMLElement>(\"dfn\");\n\n/**\n * Creates Virtual DOM HTML element <div>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <div>\n */\nexport const div = htmlElement<HTMLDivElementAttrs, HTMLDivElement>(\"div\");\n\n/**\n * Creates Virtual DOM HTML element <dd>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dd}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <dd>\n */\nexport const dd = htmlElement<HTMLElementAttrs, HTMLElement>(\"dd\");\n\n/**\n * Creates Virtual DOM HTML element <dl>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dl}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <dl>\n */\nexport const dl = htmlElement<HTMLDListElementAttrs, HTMLDListElement>(\"dl\");\n\n/**\n * Creates Virtual DOM HTML element <dt>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dt}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <dt>\n */\nexport const dt = htmlElement<HTMLElementAttrs, HTMLElement>(\"dt\");\n\n/**\n * Creates Virtual DOM HTML element <em>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/em}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <em>\n */\nexport const em = htmlElement<HTMLElementAttrs, HTMLElement>(\"em\");\n\n/**\n * Creates Virtual DOM HTML element <fieldset>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/fieldset}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <fieldset>\n */\nexport const fieldset = htmlElement<HTMLFieldSetElementAttrs, HTMLFieldSetElement>(\"fieldset\");\n\n/**\n * Creates Virtual DOM HTML element <figcaption>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/figcaption}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <figcaption>\n */\nexport const figcaption = htmlElement<HTMLElementAttrs, HTMLElement>(\"figcaption\");\n\n/**\n * Creates Virtual DOM HTML element <figure>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/figure}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <figure>\n */\nexport const figure = htmlElement<HTMLElementAttrs, HTMLElement>(\"figure\");\n\n/**\n * Creates Virtual DOM HTML element <footer>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/footer}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <footer>\n */\nexport const footer = htmlElement<HTMLElementAttrs, HTMLElement>(\"footer\");\n\n/**\n * Creates Virtual DOM HTML element <form>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <form>\n */\nexport const form = htmlElement<HTMLFormElementAttrs, HTMLFormElement>(\"form\");\n\n/**\n * Creates Virtual DOM HTML element <h1>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h1}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <h1>\n */\nexport const h1 = htmlElement<HTMLHeadingElementAttrs, HTMLHeadingElement>(\"h1\");\n\n/**\n * Creates Virtual DOM HTML element <h2>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h2}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <h2>\n */\nexport const h2 = htmlElement<HTMLHeadingElementAttrs, HTMLHeadingElement>(\"h2\");\n\n/**\n * Creates Virtual DOM HTML element <h3>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h3}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <h3>\n */\nexport const h3 = htmlElement<HTMLHeadingElementAttrs, HTMLHeadingElement>(\"h3\");\n\n/**\n * Creates Virtual DOM HTML element <h4>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h4}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <h4>\n */\nexport const h4 = htmlElement<HTMLHeadingElementAttrs, HTMLHeadingElement>(\"h4\");\n\n/**\n * Creates Virtual DOM HTML element <h5>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h5}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <h5>\n */\nexport const h5 = htmlElement<HTMLHeadingElementAttrs, HTMLHeadingElement>(\"h5\");\n\n/**\n * Creates Virtual DOM HTML element <h6>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/h6}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <h6>\n */\nexport const h6 = htmlElement<HTMLHeadingElementAttrs, HTMLHeadingElement>(\"h6\");\n\n/**\n * Creates Virtual DOM HTML element <head>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <head>\n */\nexport const head = htmlElement<HTMLHeadElementAttrs, HTMLHeadElement>(\"head\");\n\n/**\n * Creates Virtual DOM HTML element <header>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/header}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <header>\n */\nexport const header = htmlElement<HTMLElementAttrs, HTMLElement>(\"header\");\n\n/**\n * Creates Virtual DOM HTML element <hgroup>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/hgroup}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <hgroup>\n */\nexport const hgroup = htmlElement<HTMLElementAttrs, HTMLElement>(\"hgroup\");\n\n/**\n * Creates Virtual DOM HTML element <hr>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/hr}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <hr>\n */\nexport const hr = htmlElement<HTMLHRElementAttrs, HTMLHRElement>(\"hr\");\n\n/**\n * Creates Virtual DOM HTML element <html>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <html>\n */\nexport const html = htmlElement<HTMLHtmlElementAttrs, HTMLHtmlElement>(\"html\");\n\n/**\n * Creates Virtual DOM HTML element <i>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/i}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <i>\n */\nexport const i = htmlElement<HTMLElementAttrs, HTMLElement>(\"i\");\n\n/**\n * Creates Virtual DOM HTML element <iframe>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <iframe>\n */\nexport const iframe = htmlElement<HTMLIFrameElementAttrs, HTMLIFrameElement>(\"iframe\");\n\n/**\n * Creates Virtual DOM HTML element <img>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <img>\n */\nexport const img = htmlElement<HTMLImageElementAttrs, HTMLImageElement>(\"img\");\n\n/**\n * Creates Virtual DOM HTML element <area>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/area}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <area>\n */\nexport const imgArea = htmlElement<HTMLAreaElementAttrs, HTMLAreaElement>(\"area\");\n\n/**\n * Creates Virtual DOM HTML element <map>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/map}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <map>\n */\nexport const imgMap = htmlElement<HTMLMapElementAttrs, HTMLMapElement>(\"map\");\n\n/**\n * Creates Virtual DOM HTML element <ins>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ins}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <ins>\n */\nexport const ins = htmlElement<HTMLModElementAttrs, HTMLModElement>(\"ins\");\n\n/**\n * Creates Virtual DOM HTML element <kbd>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/kbd}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <kbd>\n */\nexport const kbd = htmlElement<HTMLElementAttrs, HTMLElement>(\"kbd\");\n\n/**\n * Creates Virtual DOM HTML element <label>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <label>\n */\nexport const label = htmlElement<HTMLLabelElementAttrs, HTMLLabelElement>(\"label\");\n\n/**\n * Creates Virtual DOM HTML element <legend>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/legend}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <legend>\n */\nexport const legend = htmlElement<HTMLLegendElementAttrs, HTMLLegendElement>(\"legend\");\n\n/**\n * Creates Virtual DOM HTML element <li>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <li>\n */\nexport const li = htmlElement<HTMLLIElementAttrs, HTMLLIElement>(\"li\");\n\n/**\n * Creates Virtual DOM HTML element <link>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <link>\n */\nexport const link = htmlElement<HTMLLinkElementAttrs, HTMLLinkElement>(\"link\");\n\n/**\n * Creates Virtual DOM HTML element <main>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/main}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <main>\n */\nexport const main = htmlElement<HTMLElementAttrs, HTMLElement>(\"main\");\n\n/**\n * Creates Virtual DOM HTML element <mark>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/mark}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <mark>\n */\nexport const mark = htmlElement<HTMLElementAttrs, HTMLElement>(\"mark\");\n\n/**\n * Creates Virtual DOM HTML element <menu>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/menu}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <menu>\n */\nexport const menu = htmlElement<HTMLMenuElementAttrs, HTMLMenuElement>(\"menu\");\n\n/**\n * Creates Virtual DOM HTML element <meta>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <meta>\n */\nexport const meta = htmlElement<HTMLMetaElementAttrs, HTMLMetaElement>(\"meta\");\n\n/**\n * Creates Virtual DOM HTML element <meter>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meter}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <meter>\n */\nexport const meter = htmlElement<HTMLMeterElementAttrs, HTMLMeterElement>(\"meter\");\n\n/**\n * Creates Virtual DOM HTML element <nav>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <nav>\n */\nexport const nav = htmlElement<HTMLElementAttrs, HTMLElement>(\"nav\");\n\n/**\n * Creates Virtual DOM HTML element <noscript>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/noscript}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <noscript>\n */\nexport const noscript = htmlElement<HTMLElementAttrs, HTMLElement>(\"noscript\");\n\n/**\n * Creates Virtual DOM HTML element <ol>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ol}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <ol>\n */\nexport const ol = htmlElement<HTMLOListElementAttrs, HTMLOListElement>(\"ol\");\n\n/**\n * Creates Virtual DOM HTML element <optgroup>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/optgroup}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <optgroup>\n */\nexport const optgroup = htmlElement<HTMLOptGroupElementAttrs, HTMLOptGroupElement>(\"optgroup\");\n\n/**\n * Creates Virtual DOM HTML element <option>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/option}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <option>\n */\nexport const option = htmlElement<HTMLOptionElementAttrs, HTMLOptionElement>(\"option\");\n\n/**\n * Creates Virtual DOM HTML element <p>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/p}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <p>\n */\nexport const p = htmlElement<HTMLParagraphElementAttrs, HTMLParagraphElement>(\"p\");\n\n/**\n * Creates Virtual DOM HTML element <picture>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <picture>\n */\nexport const picture = htmlElement<HTMLPictureElementAttrs, HTMLPictureElement>(\"picture\");\n\n/**\n * Creates Virtual DOM HTML element <pre>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/pre}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <pre>\n */\nexport const pre = htmlElement<HTMLPreElementAttrs, HTMLPreElement>(\"pre\");\n\n/**\n * Creates Virtual DOM HTML element <progress>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <progress>\n */\nexport const progress = htmlElement<HTMLProgressElementAttrs, HTMLProgressElement>(\"progress\");\n\n/**\n * Creates Virtual DOM HTML element <q>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/q}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <q>\n */\nexport const q = htmlElement<HTMLQuoteElementAttrs, HTMLQuoteElement>(\"q\");\n\n/**\n * Creates Virtual DOM HTML element <rt>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/rt}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <rt>\n */\nexport const rt = htmlElement<HTMLElementAttrs, HTMLElement>(\"rt\");\n\n/**\n * Creates Virtual DOM HTML element <ruby>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ruby}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <ruby>\n */\nexport const ruby = htmlElement<HTMLElementAttrs, HTMLElement>(\"ruby\");\n\n/**\n * Creates Virtual DOM HTML element <s>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/s}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <s>\n */\nexport const s = htmlElement<HTMLElementAttrs, HTMLElement>(\"s\");\n\n/**\n * Creates Virtual DOM HTML element <samp>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/samp}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <samp>\n */\nexport const samp = htmlElement<HTMLElementAttrs, HTMLElement>(\"samp\");\n\n/**\n * Creates Virtual DOM HTML element <script>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <script>\n */\nexport const script = htmlElement<HTMLScriptElementAttrs, HTMLScriptElement>(\"script\");\n\n/**\n * Creates Virtual DOM HTML element <section>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/section}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <section>\n */\nexport const section = htmlElement<HTMLElementAttrs, HTMLElement>(\"section\");\n\n/**\n * Creates Virtual DOM HTML element <select>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <select>\n */\nexport const select = htmlElement<HTMLSelectElementAttrs, HTMLSelectElement>(\"select\");\n\n/**\n * Creates Virtual DOM HTML element <source>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/source}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <source>\n */\nexport const source = htmlElement<HTMLSourceElementAttrs, HTMLSourceElement>(\"source\");\n\n/**\n * Creates Virtual DOM HTML element <span>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/span}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <span>\n */\nexport const span = htmlElement<HTMLSpanElementAttrs, HTMLSpanElement>(\"span\");\n\n/**\n * Creates Virtual DOM HTML element <strong>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/strong}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <strong>\n */\nexport const strong = htmlElement<HTMLElementAttrs, HTMLElement>(\"strong\");\n\n/**\n * Creates Virtual DOM HTML element <style>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <style>\n */\nexport const style = htmlElement<HTMLStyleElementAttrs, HTMLStyleElement>(\"style\");\n\n/**\n * Creates Virtual DOM HTML element <sub>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/sub}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <sub>\n */\nexport const sub = htmlElement<HTMLElementAttrs, HTMLElement>(\"sub\");\n\n/**\n * Creates Virtual DOM HTML element <sup>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/sup}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <sup>\n */\nexport const sup = htmlElement<HTMLElementAttrs, HTMLElement>(\"sup\");\n\n/**\n * Creates Virtual DOM HTML element <table>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <table>\n */\nexport const table = htmlElement<HTMLTableElementAttrs, HTMLTableElement>(\"table\");\n\n/**\n * Creates Virtual DOM HTML element <tbody>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/tbody}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <tbody>\n */\nexport const tbody = htmlElement<HTMLTableSectionElementAttrs, HTMLTableSectionElement>(\"tbody\");\n\n/**\n * Creates Virtual DOM HTML element <td>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <td>\n */\nexport const td = htmlElement<HTMLTableDataCellElementAttrs, HTMLTableDataCellElement>(\"td\");\n\n/**\n * Creates Virtual DOM HTML element <template>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <template>\n */\nexport const template = htmlElement<HTMLTemplateElementAttrs, HTMLTemplateElement>(\"template\");\n\n/**\n * Creates Virtual DOM HTML element <tfoot>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/tfoot}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <tfoot>\n */\nexport const tfoot = htmlElement<HTMLTableSectionElementAttrs, HTMLTableSectionElement>(\"tfoot\");\n\n/**\n * Creates Virtual DOM HTML element <th>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/th}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <th>\n */\nexport const th = htmlElement<HTMLTableHeaderCellElementAttrs, HTMLTableHeaderCellElement>(\"th\");\n\n/**\n * Creates Virtual DOM HTML element <thead>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/thead}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <thead>\n */\nexport const thead = htmlElement<HTMLTableSectionElementAttrs, HTMLTableSectionElement>(\"thead\");\n\n/**\n * Creates Virtual DOM HTML element <time>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/time}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <time>\n */\nexport const time = htmlElement<HTMLElementAttrs, HTMLElement>(\"time\");\n\n/**\n * Creates Virtual DOM HTML element <title>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <title>\n */\nexport const title = htmlElement<HTMLTitleElementAttrs, HTMLTitleElement>(\"title\");\n\n/**\n * Creates Virtual DOM HTML element <tr>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/tr}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <tr>\n */\nexport const tr = htmlElement<HTMLTableRowElementAttrs, HTMLTableRowElement>(\"tr\");\n\n/**\n * Creates Virtual DOM HTML element <track>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <track>\n */\nexport const track = htmlElement<HTMLTrackElementAttrs, HTMLTrackElement>(\"track\");\n\n/**\n * Creates Virtual DOM HTML element <u>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/u}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <u>\n */\nexport const u = htmlElement<HTMLElementAttrs, HTMLElement>(\"u\");\n\n/**\n * Creates Virtual DOM HTML element <ul>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ul}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <ul>\n */\nexport const ul = htmlElement<HTMLUListElementAttrs, HTMLUListElement>(\"ul\");\n\n/**\n * Creates Virtual DOM HTML element <wbr>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/wbr}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <wbr>\n */\nexport const wbr = htmlElement<HTMLElementAttrs, HTMLElement>(\"wbr\");\n\n/**\n * Creates Virtual DOM HTML element <textarea>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <textarea>\n */\nexport const textarea = htmlElement<HTMLTextAreaElementAttrs, HTMLTextAreaElement>(\"textarea\");\n\n/**\n * Creates Virtual DOM HTML element <input>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <input>\n */\nexport const input = htmlElement<HTMLInputElementAttrs, HTMLInputElement>(\"input\");\n\n/**\n * Creates Virtual DOM HTML element <audio>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <audio>\n */\nexport const audio = htmlElement<HTMLAudioElementAttrs, HTMLAudioElement>(\"audio\");\n\n/**\n * Creates Virtual DOM HTML element <video>.\n *\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video}\n *\n * @param className - Class name\n * @param attrs - Attributes\n * @param css - Styles\n * @returns Virtual DOM HTML element <video>\n */\nexport const video = htmlElement<HTMLVideoElementAttrs, HTMLVideoElement>(\"video\");\n","var MonitorMaxSamples = 100;\nvar MonitorSamplesResult = (function () {\n    function MonitorSamplesResult(min, max, mean, last) {\n        this.min = min;\n        this.max = max;\n        this.mean = mean;\n        this.last = last;\n    }\n    return MonitorSamplesResult;\n}());\n/**\n * Profile Samples.\n */\nvar MonitorSamples = (function () {\n    function MonitorSamples(maxSamples) {\n        this.samples = [];\n        this.maxSamples = maxSamples;\n        this._i = -1;\n    }\n    MonitorSamples.prototype.addSample = function (v) {\n        this._i = (this._i + 1) % this.maxSamples;\n        this.samples[this._i] = v;\n    };\n    MonitorSamples.prototype.each = function (fn) {\n        var samples = this.samples;\n        for (var i = 0; i < samples.length; i++) {\n            fn(samples[(this._i + 1 + i) % samples.length], i);\n        }\n    };\n    MonitorSamples.prototype.calc = function () {\n        var samples = this.samples;\n        if (samples.length === 0) {\n            return new MonitorSamplesResult(0, 0, 0, 0);\n        }\n        var min = samples[(this._i + 1) % samples.length];\n        var max = min;\n        var sum = 0;\n        for (var i = 0; i < samples.length; i++) {\n            var k = samples[(this._i + 1 + i) % samples.length];\n            if (k < min) {\n                min = k;\n            }\n            if (k > max) {\n                max = k;\n            }\n            sum += k;\n        }\n        var last = samples[this._i];\n        var mean = sum / samples.length;\n        return new MonitorSamplesResult(min, max, mean, last);\n    };\n    return MonitorSamples;\n}());\n\n/**\n * Basic Counter.\n */\nvar BasicCounter = (function () {\n    function BasicCounter() {\n        this.value = 0;\n        this.onChange = null;\n    }\n    BasicCounter.prototype.inc = function (value) {\n        if (value > 0) {\n            this.value += value;\n            this.onChange();\n        }\n    };\n    return BasicCounter;\n}());\nvar TimestampedValue = (function () {\n    function TimestampedValue(timestamp, value) {\n        this.value = value;\n        this.next = null;\n    }\n    return TimestampedValue;\n}());\n/**\n * Sliding Counter counts how many times `inc` method were called during `interval` period.\n */\nvar SlidingCounter = (function () {\n    function SlidingCounter(interval) {\n        var _this = this;\n        this._dec = function () {\n            var now = performance.now();\n            while (_this._firstTimestamp !== null) {\n                var nextTimestamp = _this._firstTimestamp;\n                if (now >= nextTimestamp.value) {\n                    _this.value -= nextTimestamp.value;\n                    _this._firstTimestamp = _this._firstTimestamp.next;\n                }\n                else {\n                    setTimeout(_this._dec, Math.ceil(nextTimestamp.value - now));\n                    break;\n                }\n            }\n            if (_this._firstTimestamp === null) {\n                _this._lastTimestamp = null;\n            }\n            _this.onChange();\n        };\n        this.interval = interval;\n        this.value = 0;\n        this.onChange = null;\n        this._firstTimestamp = null;\n        this._lastTimestamp = null;\n    }\n    SlidingCounter.prototype.inc = function (value) {\n        if (value > 0) {\n            var timestamp = new TimestampedValue(performance.now() + this.interval, value);\n            if (this._firstTimestamp === null) {\n                this._firstTimestamp = timestamp;\n                setTimeout(this._dec, this.interval);\n            }\n            else {\n                this._lastTimestamp.next = timestamp;\n            }\n            this._lastTimestamp = timestamp;\n            this.value += value;\n            this.onChange();\n        }\n    };\n    return SlidingCounter;\n}());\n\nvar frameTasks = [];\nvar rafId = -1;\n/**\n * Schedule new task that will be executed on the next frame.\n */\nfunction scheduleNextFrameTask(task) {\n    frameTasks.push(task);\n    if (rafId === -1) {\n        requestAnimationFrame(function (t) {\n            rafId = -1;\n            var tasks = frameTasks;\n            frameTasks = [];\n            for (var i = 0; i < tasks.length; i++) {\n                tasks[i]();\n            }\n        });\n    }\n}\n\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar MonitorGraphHeight = 30;\nvar MonitorGraphWidth = MonitorMaxSamples;\nvar Widget = (function () {\n    function Widget(name) {\n        var _this = this;\n        this._sync = function () {\n            _this.sync();\n            _this._dirty = false;\n        };\n        this.name = name;\n        this.element = document.createElement(\"div\");\n        this.element.style.cssText = \"padding: 2px;\" +\n            \"background-color: #020;\" +\n            \"font-family: monospace;\" +\n            \"font-size: 12px;\" +\n            \"color: #0f0\";\n        this._dirty = false;\n        this.invalidate();\n    }\n    Widget.prototype.invalidate = function () {\n        if (!this._dirty) {\n            this._dirty = true;\n            scheduleNextFrameTask(this._sync);\n        }\n    };\n    Widget.prototype.sync = function () {\n        throw new Error(\"sync method not implemented\");\n    };\n    return Widget;\n}());\nvar MonitorWidgetFlags;\n(function (MonitorWidgetFlags) {\n    MonitorWidgetFlags[MonitorWidgetFlags[\"HideMin\"] = 1] = \"HideMin\";\n    MonitorWidgetFlags[MonitorWidgetFlags[\"HideMax\"] = 2] = \"HideMax\";\n    MonitorWidgetFlags[MonitorWidgetFlags[\"HideMean\"] = 4] = \"HideMean\";\n    MonitorWidgetFlags[MonitorWidgetFlags[\"HideLast\"] = 8] = \"HideLast\";\n    MonitorWidgetFlags[MonitorWidgetFlags[\"HideGraph\"] = 16] = \"HideGraph\";\n    MonitorWidgetFlags[MonitorWidgetFlags[\"RoundValues\"] = 32] = \"RoundValues\";\n})(MonitorWidgetFlags || (MonitorWidgetFlags = {}));\nvar MonitorWidget = (function (_super) {\n    __extends(MonitorWidget, _super);\n    function MonitorWidget(name, flags, unitName, samples) {\n        var _this = _super.call(this, name) || this;\n        _this.flags = flags;\n        _this.unitName = unitName;\n        _this.samples = samples;\n        var label = document.createElement(\"div\");\n        label.style.cssText = \"text-align: center\";\n        label.textContent = _this.name;\n        var text = document.createElement(\"div\");\n        if ((flags & MonitorWidgetFlags.HideMin) === 0) {\n            _this.minText = document.createElement(\"div\");\n            text.appendChild(_this.minText);\n        }\n        else {\n            _this.minText = null;\n        }\n        if ((flags & MonitorWidgetFlags.HideMax) === 0) {\n            _this.maxText = document.createElement(\"div\");\n            text.appendChild(_this.maxText);\n        }\n        else {\n            _this.maxText = null;\n        }\n        if ((flags & MonitorWidgetFlags.HideMean) === 0) {\n            _this.meanText = document.createElement(\"div\");\n            text.appendChild(_this.meanText);\n        }\n        else {\n            _this.meanText = null;\n        }\n        if ((flags & MonitorWidgetFlags.HideLast) === 0) {\n            _this.lastText = document.createElement(\"div\");\n            text.appendChild(_this.lastText);\n        }\n        else {\n            _this.lastText = null;\n        }\n        _this.element.appendChild(label);\n        _this.element.appendChild(text);\n        if ((flags & MonitorWidgetFlags.HideGraph) === 0) {\n            _this.canvas = document.createElement(\"canvas\");\n            _this.canvas.style.cssText = \"display: block; padding: 0; margin: 0\";\n            _this.canvas.width = MonitorGraphWidth;\n            _this.canvas.height = MonitorGraphHeight;\n            _this.ctx = _this.canvas.getContext(\"2d\");\n            _this.element.appendChild(_this.canvas);\n        }\n        else {\n            _this.canvas = null;\n            _this.ctx = null;\n        }\n        return _this;\n    }\n    MonitorWidget.prototype.sync = function () {\n        var _this = this;\n        var result = this.samples.calc();\n        var scale = MonitorGraphHeight / (result.max * 1.2);\n        var min;\n        var max;\n        var mean;\n        var last;\n        if ((this.flags & MonitorWidgetFlags.RoundValues) === 0) {\n            min = result.min.toFixed(2);\n            max = result.max.toFixed(2);\n            mean = result.mean.toFixed(2);\n            last = result.last.toFixed(2);\n        }\n        else {\n            min = Math.round(result.min).toString();\n            max = Math.round(result.max).toString();\n            mean = Math.round(result.mean).toString();\n            last = Math.round(result.last).toString();\n        }\n        if (this.minText !== null) {\n            this.minText.textContent = \"min: \\u00A0\" + min + this.unitName;\n        }\n        if (this.maxText !== null) {\n            this.maxText.textContent = \"max: \\u00A0\" + max + this.unitName;\n        }\n        if (this.meanText !== null) {\n            this.meanText.textContent = \"mean: \" + mean + this.unitName;\n        }\n        if (this.lastText !== null) {\n            this.lastText.textContent = \"last: \" + last + this.unitName;\n        }\n        if (this.ctx !== null) {\n            this.ctx.fillStyle = \"#010\";\n            this.ctx.fillRect(0, 0, MonitorGraphWidth, MonitorGraphHeight);\n            this.ctx.fillStyle = \"#0f0\";\n            this.samples.each(function (v, i) {\n                _this.ctx.fillRect(i, MonitorGraphHeight, 1, -(v * scale));\n            });\n        }\n    };\n    return MonitorWidget;\n}(Widget));\nvar CounterWidget = (function (_super) {\n    __extends(CounterWidget, _super);\n    function CounterWidget(name, counter) {\n        var _this = _super.call(this, name) || this;\n        _this.counter = counter;\n        _this.text = document.createElement(\"div\");\n        _this.element.appendChild(_this.text);\n        return _this;\n    }\n    CounterWidget.prototype.sync = function () {\n        this.text.textContent = this.name + \": \" + this.counter.value;\n    };\n    return CounterWidget;\n}(Widget));\n\nvar container = null;\nvar initialized = false;\n/**\n * Initialize Performance Monitor.\n */\nfunction initPerfMonitor(options) {\n    if (!initialized) {\n        if (options.container) {\n            container = options.container;\n        }\n        initialized = true;\n    }\n}\n/**\n * Check that everything is properly initialized.\n */\nfunction checkInit() {\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.style.cssText = \"position: fixed;\" +\n            \"opacity: 0.9;\" +\n            \"right: 0;\" +\n            \"bottom: 0\";\n        document.body.appendChild(container);\n    }\n    initialized = true;\n}\n/**\n * Start FPS monitor\n */\nfunction startFPSMonitor(flags) {\n    if (flags === void 0) { flags = MonitorWidgetFlags.HideMin | MonitorWidgetFlags.HideMax |\n        MonitorWidgetFlags.HideMean | MonitorWidgetFlags.RoundValues; }\n    checkInit();\n    var data = new MonitorSamples(MonitorMaxSamples);\n    var w = new MonitorWidget(\"FPS\", flags, \"\", data);\n    container.appendChild(w.element);\n    var alpha = 2 / 121;\n    var last = 0;\n    var fps = 60;\n    function update(now) {\n        if (last > 0) {\n            fps += alpha * ((1000 / (now - last)) - fps);\n        }\n        last = now;\n        data.addSample(fps);\n        w.invalidate();\n        requestAnimationFrame(update);\n    }\n    requestAnimationFrame(update);\n}\n/**\n * Start Memory Monitor\n */\nfunction startMemMonitor(flags) {\n    if (flags === void 0) { flags = MonitorWidgetFlags.HideMin | MonitorWidgetFlags.HideMean; }\n    checkInit();\n    if (performance.memory === undefined) {\n        return;\n    }\n    var data = new MonitorSamples(MonitorMaxSamples);\n    var w = new MonitorWidget(\"Memory\", flags, \"MB\", data);\n    container.appendChild(w.element);\n    function update() {\n        data.addSample(Math.round(performance.memory.usedJSHeapSize / (1024 * 1024)));\n        w.invalidate();\n        setTimeout(update, 30);\n    }\n    update();\n}\nvar ProfilerDetails = (function () {\n    function ProfilerDetails(name, unitName, flags) {\n        this.data = new MonitorSamples(MonitorMaxSamples);\n        this.widget = new MonitorWidget(name, flags, unitName, this.data);\n        this.startTime = -1;\n    }\n    return ProfilerDetails;\n}());\nvar profilerInstances = {};\nvar CounterDetails = (function () {\n    function CounterDetails(name, interval) {\n        var _this = this;\n        this.data = interval === undefined ? new BasicCounter() : new SlidingCounter(interval);\n        this.widget = new CounterWidget(name, this.data);\n        this.data.onChange = function () {\n            _this.widget.invalidate();\n        };\n    }\n    return CounterDetails;\n}());\nvar counterInstances = {};\n/**\n * Initialize profiler and insert into container.\n */\nfunction initProfiler(name, flags) {\n    if (flags === void 0) { flags = 0; }\n    checkInit();\n    var profiler = profilerInstances[name];\n    if (profiler === void 0) {\n        profilerInstances[name] = profiler = new ProfilerDetails(name, \"ms\", flags);\n        container.appendChild(profiler.widget.element);\n    }\n}\n/**\n * Initialize counter and insert into container.\n */\nfunction initCounter(name, interval) {\n    checkInit();\n    var counter = counterInstances[name];\n    if (counter === void 0) {\n        counterInstances[name] = counter = new CounterDetails(name, interval);\n        container.appendChild(counter.widget.element);\n    }\n}\nfunction startProfile(name) {\n    var profiler = profilerInstances[name];\n    if (profiler !== void 0) {\n        profiler.startTime = performance.now();\n    }\n}\nfunction endProfile(name) {\n    var now = performance.now();\n    var profiler = profilerInstances[name];\n    if (profiler !== void 0 && profiler.startTime !== -1) {\n        profiler.data.addSample(now - profiler.startTime);\n        profiler.widget.invalidate();\n    }\n}\nfunction count(name, value) {\n    if (value === void 0) { value = 1; }\n    var counter = counterInstances[name];\n    if (counter !== void 0) {\n        counter.data.inc(value);\n    }\n}\n/**\n * lookup a profile by name\n * @param name the name of the profile to lookup\n */\nfunction getProfile(name) {\n    return profilerInstances[name];\n}\n/**\n * lookup a counter by name\n * @param name the name of the counter to lookup\n */\nfunction getCounter(name) {\n    return counterInstances[name];\n}\n\nexport { initPerfMonitor, startFPSMonitor, startMemMonitor, ProfilerDetails, CounterDetails, initProfiler, initCounter, startProfile, endProfile, count, getProfile, getCounter, MonitorSamplesResult, MonitorMaxSamples, MonitorSamples, BasicCounter, SlidingCounter, Widget, MonitorWidgetFlags, MonitorWidget, CounterWidget };\n","export function queryClassName(elapsed) {\n    if (elapsed > 0) {\n        if (elapsed >= 10.0) {\n            return \"Query elapsed warn_long\";\n        }\n        else if (elapsed >= 1.0) {\n            return \"Query elapsed warn\";\n        }\n        return \"Query elapsed short\";\n    }\n    return \"\";\n}\nexport function countClassName(count) {\n    if (count >= 20) {\n        return \"label label-important\";\n    }\n    else if (count >= 10) {\n        return \"label label-warning\";\n    }\n    return \"label label-success\";\n}\n","import { startFPSMonitor, startMemMonitor, initProfiler } from \"perf-monitor\";\nlet mutations = 0.5;\nlet N = 50;\nexport function getMutations() {\n    return mutations;\n}\nexport function getN() {\n    return N;\n}\nfunction parseQueryString(a) {\n    if (a.length === 0) {\n        return {};\n    }\n    const b = {};\n    for (let i = 0; i < a.length; ++i) {\n        const p = a[i].split(\"=\", 2);\n        if (p.length === 1) {\n            b[p[0]] = \"\";\n        }\n        else {\n            b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n        }\n    }\n    return b;\n}\nexport function init() {\n    const qs = parseQueryString(window.location.search.substr(1).split(\"&\"));\n    if (qs[\"n\"] !== void 0) {\n        N = parseInt(qs[\"n\"], 10);\n    }\n    if (qs[\"m\"] !== void 0) {\n        mutations = parseFloat(qs[\"m\"]);\n    }\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        startFPSMonitor();\n        startMemMonitor();\n        initProfiler(\"view update\");\n        const sliderContainer = document.createElement(\"div\");\n        sliderContainer.style.display = \"flex\";\n        const slider = document.createElement(\"input\");\n        slider.type = \"range\";\n        slider.style.marginBottom = \"10px\";\n        slider.style.marginTop = \"5px\";\n        const text = document.createElement(\"label\");\n        text.textContent = \"mutations : \" + (mutations * 100).toFixed(0) + \"%\";\n        slider.addEventListener(\"change\", (e) => {\n            mutations = Number.parseFloat(e.target.value) / 100;\n            text.textContent = \"mutations : \" + (mutations * 100).toFixed(0) + \"%\";\n        });\n        sliderContainer.appendChild(text);\n        sliderContainer.appendChild(slider);\n        document.body.insertBefore(sliderContainer, document.body.firstChild);\n    });\n}\n","function randomQuery() {\n    const elapsed = Math.random() * 15;\n    let query;\n    if (Math.random() < 0.1) {\n        query = \"vacuum\";\n    }\n    else if (Math.random() < 0.2) {\n        query = \"<IDLE> in transaction\";\n    }\n    else {\n        query = \"SELECT blah FROM something\";\n    }\n    return { elapsed, query };\n}\nfunction randomQueries() {\n    const queries = [];\n    const r = Math.floor((Math.random() * 10) + 1);\n    for (let i = 0; i < r; i++) {\n        queries.push(randomQuery());\n    }\n    return queries;\n}\nconst EMPTY_QUERY = { elapsed: 0, query: \"***\" };\nlet _nextId = 0;\nfunction createDB(name, id) {\n    if (id === void 0) {\n        id = _nextId++;\n    }\n    return { id, name, queries: randomQueries() };\n}\nexport function getTopFiveQueries(db) {\n    const qs = db.queries.slice(0, 5);\n    qs.sort((a, b) => a.elapsed - b.elapsed);\n    while (qs.length < 5) {\n        qs.push(EMPTY_QUERY);\n    }\n    return qs;\n}\nexport function createState(n) {\n    const state = [];\n    for (let i = 0; i < n; i++) {\n        state.push(createDB(\"cluster\" + (i + 1)));\n        state.push(createDB(\"cluster\" + (i + 1) + \" slave\"));\n    }\n    return state;\n}\nexport function randomUpdate(state, r) {\n    for (let i = 0; i < state.length; i++) {\n        if (Math.random() < r) {\n            const { id, name } = state[i];\n            state[i] = createDB(name, id);\n        }\n    }\n}\nexport function entryFormatElapsed(v) {\n    if (v === 0) {\n        return \"\";\n    }\n    if (v > 60) {\n        const minutes = Math.floor(v / 60);\n        const comps = (v % 60).toFixed(2).split(\".\");\n        const seconds = comps[0];\n        const ms = comps[1];\n        return minutes + \":\" + seconds + \".\" + ms;\n    }\n    return v.toFixed(2);\n}\n","import { _, withNextFrame, render, requestDirtyCheck, statelessComponent, component, useSelect, TrackByKey, key, } from \"ivi\";\nimport { div, span, table, tbody, tr, td } from \"ivi-html\";\nimport { startProfile, endProfile } from \"perf-monitor\";\nimport { queryClassName, countClassName } from \"./css\";\nimport { init, getN, getMutations } from \"./init\";\nimport { entryFormatElapsed, getTopFiveQueries, createState, randomUpdate } from \"./state\";\nconst state = createState(getN());\nconst arrow = div(\"arrow\");\nconst Popover = statelessComponent((query) => (div(\"popover left\", _, [\n    div(\"popover-content\", _, query),\n    arrow,\n])));\nconst DatabaseList = component((c) => {\n    const getDB = useSelect(c, (idx) => state[idx]);\n    return (idx) => {\n        const db = getDB(idx);\n        const topFiveQueries = getTopFiveQueries(db);\n        const count = db.queries.length;\n        return tr(_, _, [\n            td(\"dbname\", _, db.name),\n            td(\"query-count\", _, span(countClassName(count), _, count)),\n            topFiveQueries.map((q) => (td(queryClassName(q.elapsed), _, [\n                entryFormatElapsed(q.elapsed),\n                Popover(q.query),\n            ]))),\n        ]);\n    };\n});\nconst Main = (dbs) => (table(\"table table-striped latest-data\", _, [\n    tbody(_, _, TrackByKey(dbs.map((db, i) => key(db.id, DatabaseList(i))))),\n]));\ninit();\nconst container = document.getElementById(\"app\");\nwithNextFrame(() => { render(Main(state), container); })();\nfunction tick() {\n    randomUpdate(state, getMutations());\n    startProfile(\"view update\");\n    withNextFrame(requestDirtyCheck)();\n    endProfile(\"view update\");\n    setTimeout(tick, 0);\n}\nsetTimeout(tick, 0);\n"],"sourceRoot":""}