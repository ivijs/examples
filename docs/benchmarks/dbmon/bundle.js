!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);class i{constructor(t,e,n,i,o){this._f=t,this._l=this,this._r=null,this._c=null,this._t=e,this._k=0,this._p=n,this._i=null,this._cs=i,this._s=o,this._e=null}k(t){return this._f|=128,this._k=t,this}e(t){return null!==t&&(this._f|=512,this._e=t),this}t(t){return this._f|=-2147483584,this._c=t,this}c(){const t=arguments;let e=null,n=null;for(let o=0,l=0;o<t.length;++o,++l){let r=t[o];if(null!==r){"object"!==typeof r&&(r=new i(1,null,r,"",void 0));const t=r._l,o=r._f;if(t===r)0===(128&o)&&(r._k=l);else if(0===(256&o)){let t=r;do{0===(128&t._f)&&(t._k=l),++l,t=t._r}while(null!==t);--l}null!==n?(r._l=n,n._r=r):e=r,n=t}}return null!==e&&(e._l=n,this._f|=32,this._c=e),this}}function o(t){return 0!==(6168&t._f)?o(t._c):t._i}function l(t){const e={render:t,shouldUpdate:null};return t=>new i(8,e,t,"",void 0)}function r(t,e){let n=null,i=null;for(let o=0;o<t.length;++o){const l=e(t[o],o);null!==l&&(null!==i?(l._l=i,i._r=l):n=l,i=l)}return null!==n?(n._l=i,n._f|=256,n):null}(()=>{let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});window.addEventListener("test",null,n)}catch(e){}})(),KeyboardEvent.prototype.hasOwnProperty("key"),MouseEvent.prototype.hasOwnProperty("buttons"),window,window,window;const s="GestureEvent"in window;function a(){}function c(t,e){const n=t.length-1,i=t.pop();e!==n&&(t[e]=i)}const u=[],d=Node.prototype,f=Element.prototype,h=(Object.prototype.hasOwnProperty,d.insertBefore),p=d.removeChild,_=d.replaceChild,m=d.cloneNode,v=f.setAttribute,x=(f.setAttributeNS,f.removeAttribute),y="http://www.w3.org/2000/svg";function g(t,e){let n,i,o;if(null===t)w(e);else if(null===e)b(t);else if(t instanceof Array)if(e instanceof Array){for(n=0;n<t.length&&n<e.length;)(i=t[n])!==(o=e[n++])&&(null!==o&&T(o),null!==i&&M(i));for(;n<e.length;)null!==(i=e[n++])&&T(i);for(;n<t.length;)null!==(i=t[n++])&&M(i)}else for(T(e),n=0;n<t.length;++n)null!==(i=t[n])&&M(i);else w(e),M(t)}function w(t){if(t instanceof Array)for(let e=0;e<t.length;++e){const n=t[e];null!==n&&T(n)}else T(t)}function b(t){if(t instanceof Array)for(let e=0;e<t.length;++e){const n=t[e];null!==n&&M(n)}else M(t)}function T(t){t.src.add(t)}function M(t){t.src.remove(t)}function C(t,e){p.call(t,o(e)),k(e)}function E(t){const e=t._f;if(0!==(6200&e)){0!==(16&e)&&t._i.attached();let n=t._c;for(;null!==n;)E(n),n=n._r}0!==(512&e)&&w(t._e)}function k(t){const e=t._f;if(0!==(6200&e)){let n=t._c;for(;null!==n;)k(n),n=n._r;if(0!==(16&e)){const e=t._i;e.flags|=1,e.detached()}}0!==(512&e)&&b(t._e)}function S(t,e,n,i){const o=e._f;let l,r;if((-2147477448&o)>0)if(l=e._c,0!==(32&o))for(r=e._i;null!==l;)S(r,l,n,i),l=l._r;else if(0!==(16&o))0!==(2&(r=e._i).flags)?(j(t,l,e._c=r.render(),n,i),r.flags&=-3,r.updated()):S(t,l,n,i);else if(0!==(2048&o)){const o=e._t;r=e._i;const s=o.select(r,e._p,n);r===s?S(t,l,n,i):(e._i=s,j(t,l,e._c=o.render(s),n,i))}else 0!==(4096&o)&&(!0===i&&(e._i=Object.assign({},n,e._p)),n=e._i),S(t,l,n,i)}function O(t,e){t.textContent="";do{k(e),e=e._r}while(null!==e)}function H(t,e,n){const i=e._f,o=e._p;let l,r=null;if(0!==(1&i))r=l=document.createTextNode(o);else{const s=e._t;if(0!==(18&i))if(0!==(2&i)){const a=0!==(1024&i);0===(4&i)?l=a?document.createElementNS(y,s):document.createElement(s):(null===s._i&&H(t,s,n),l=m.call(s._i,!0)),r=l;const c=e._cs;if(c&&(!0===a?v.call(l,"class",c):l.className=c),void 0!==o&&R(l,void 0,o),void 0!==e._s&&q(l,void 0,e._s),0!==(32&i)){let t=e._c;for(;null!==t;)h.call(l,H(l,t,n),null),t=t._r}else 0!==(64&i)&&""!==e._c&&(l.textContent=e._c)}else r=new s(o),l=H(t,e._c=r.render(),n);else{if(0!==(6144&i))if(0!==(2048&i)){const t=s;r=t.select(null,o,n),e._c=t.render(r)}else n=r=Object.assign({},n,o);else e._c=s.render(o);l=H(t,e._c,n)}}return e._i=r,l}function F(t,e,n,i){const o=H(t,n,i);return h.call(t,o,e),E(n),o}function j(t,e,n,i,l){if(e===n)return void S(t,n,i,l);let r;const s=e._f,a=n._f;if(0!==(4185311&(s^a))||0!==(2076&s)&&e._t!==n._t||e._k!==n._k)r=H(t,n,i),_.call(t,r,o(e)),k(e),E(n);else{const o=e._p,c=n._p;if(n._i=r=e._i,0!==(1&a))o!==c&&(r.data=c);else{const u=e._c;let d=n._c;if(e._e!==n._e&&g(e._e,n._e),0!==(18&a))if(0!==(2&a)){let t=n._cs;if(e._cs!==t&&(void 0===t&&(t=""),0!==(1024&a)?v.call(r,"class",t):r.className=t),o!==c&&R(r,o,c),e._s!==n._s&&q(r,e._s,n._s),u!==d)if(0===(64&s))if(null===u)do{F(r,null,d,i),d=d._r}while(null!==d);else null===d?O(r,u):P(r,u,d,i,l);else{const t=r.firstChild;null!==t?t.nodeValue=d:r.textContent=d}}else o!==c&&r.propsChanged(o,c),r.props=c,0!==(2&r.flags)||!0===r.shouldUpdate(o,c)?(j(t,u,n._c=r.render(),i,l),r.flags&=-3,r.updated()):S(t,n._c=u,i,l);else if(0!==(6144&a))if(0!==(2048&a)){const e=n._t,o=n._i=e.select(r,c,i);r===o?S(t,n._c=u,i,l):j(t,u,n._c=e.render(o),i,l)}else o!==c&&(l=!0),n._i=i=!0===l?Object.assign({},i,c):r,j(t,u,d,i,l);else{const e=n._t;o===c||0!==(8192&a)&&!0!==e.shouldUpdate(o,c)?S(t,n._c=u,i,l):j(t,u,n._c=e.render(c),i,l)}}}}function P(t,e,n,i,l){let r=e._l,s=n._l,a=0,c=0;t:for(;;){for(;e._k===n._k&&0===(128&(e._f^n._f));){if(j(t,e,n,i,l),c++,e===r?a=1:e=e._r,n===s){a|=2;break t}if(n=n._r,a)break t}for(;r._k===s._k&&0===(128&(r._f^s._f));){if(j(t,r,s,i,l),c++,e===r?a=1:r=r._l,n===s){a|=2;break t}if(s=s._l,a)break t}break}if(a){if(a<3)if(a<2){const e=N(s);for(;F(t,e,n,i),n!==s;)n=n._r}else for(;C(t,e),e!==r;)e=e._r}else{let u=0,d=0,f=0;const p=[];let _,m,v,x=n;for(;v=x._k,128&x._f?(void 0===_&&(_=new Map),_.set(v,d)):(void 0===m&&(m=new Map),m.set(v,d)),p[d++]=x,x!==s;)x=x._r;const y=new Array(d).fill(-1);let g=0;for(x=e;v=x._k,void 0===(a=0!==(128&x._f)?void 0===_?void 0:_.get(v):void 0===m?void 0:m.get(v))?x._k=null:(f=f>a?1e9:a,y[a]=u,j(t,x,p[a],i,l),g++),u++,x!==r;)x=x._r;if(c||g){for(a=u-g;a>0;)null===e._k&&(C(t,e),a--),e=e._r;if(1e9===f){const e=A(y);for(a=e.length-1;d>0;)y[--d]<0?F(t,N(s),s,i):a<0||d!==e[a]?h.call(t,o(s),N(s)):a--,s=s._l}else if(g!==d)for(;d>0;)y[--d]<0&&F(t,N(s),s,i),s=s._l}else{O(t,e);do{F(t,null,n,i),n=n._r}while(null!==n)}}}function N(t){const e=t._r;return null===e?null:o(e)}function A(t){const e=t.slice(),n=[];n[0]=0;let i,o,l,r=0;for(let s=0;s<t.length;++s){const a=t[s];if(-1!==a)if(t[l=n[r]]<a)e[s]=l,n[++r]=s;else{for(i=0,o=r;i<o;)t[n[l=(i+o)/2|0]]<a?i=l+1:o=l;a<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(o=n[r];r>=0;)n[r--]=o,o=e[o];return n}function q(t,e,n){const i=t.style;let o,l;if(void 0===e)for(o in n)void 0!==(l=n[o])&&i.setProperty(o,l);else if(void 0!==n)for(o in n)l=n[o],e[o]!==l&&(void 0!==l?i.setProperty(o,l):i.removeProperty(o))}function L(t,e,n,i){n!==i&&("object"===typeof i?i.s(t,e,void 0===n?void 0:n.v,i.v):("boolean"===typeof i&&(i=i?"":void 0),void 0===i?x.call(t,e):v.call(t,e,i)))}function R(t,e,n){let i;if(void 0===e)for(i in n)L(t,i,void 0,n[i]);else if(void 0!==n)for(i in n)L(t,i,e[i],n[i])}const I=[];function U(t){for(const e of I)if(e.container===t)return e}let B;const Q={};let V=0;const G=(z=(()=>{for(V|=2;2===V;)V>>=1,J(),V^=1}),(...t)=>{try{return z(...t)}catch(e){for(const t of u)t(e);throw e}});var z;function D(t){B(t)}function J(){for(let t=0;t<I.length;++t){const e=I[t],{container:n,current:i,next:o}=e;e.next=void 0,o?(i?j(n,i,o,Q,!1):(F(n,null,o,Q),s&&(n.onclick=a)),e.current=o):i&&(null===o?(C(n,i),c(I,I.indexOf(e)),--t):S(n,i,Q,!1))}}function K(t,e,n){const i=U(e);i?i.next=t:I.push({container:e,next:t,current:null}),D(n)}function W(t,e,n){return new i(376834,"div",e,t,n)}function X(t,e,n){return new i(1261570,"span",e,t,n)}function Y(t,e,n){return new i(1343490,"table",e,t,n)}function Z(t,e,n){return new i(1359874,"tbody",e,t,n)}function $(t,e,n){return new i(1376258,"td",e,t,n)}function tt(t,e,n){return new i(1507330,"tr",e,t,n)}class et{constructor(t,e){this.elapsed=t,this.query=e}static rand(){const t=15*Math.random();let e;return e=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something",new et(t,e)}}const nt=new et(0,"***");class it{constructor(t){this.id=it._nextId++,this.name=t,this.queries=null,this.update()}update(){const t=[],e=Math.floor(10*Math.random()+1);for(let n=0;n<e;n++)t.push(et.rand());this.queries=t}getTopFiveQueries(){const t=this.queries.slice(0,5);for(t.sort(function(t,e){return t.elapsed-e.elapsed});t.length<5;)t.push(nt);return t}}it._nextId=0;var ot,lt,rt=100,st=function(t,e,n,i){this.min=t,this.max=e,this.mean=n,this.last=i},at=function(){function t(t){this.samples=[],this.maxSamples=t,this._i=-1}return t.prototype.addSample=function(t){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=t},t.prototype.each=function(t){for(var e=this.samples,n=0;n<e.length;n++)t(e[(this._i+1+n)%e.length],n)},t.prototype.calc=function(){var t=this.samples;if(0===t.length)return new st(0,0,0,0);for(var e=t[(this._i+1)%t.length],n=e,i=0,o=0;o<t.length;o++){var l=t[(this._i+1+o)%t.length];l<e&&(e=l),l>n&&(n=l),i+=l}var r=t[this._i],s=i/t.length;return new st(e,n,s,r)},t}(),ct=[],ut=-1,dt=(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}ot(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ft=30,ht=rt,pt=function(){function t(t){var e=this;this._sync=function(){e.sync(),e._dirty=!1},this.name=t,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return t.prototype.invalidate=function(){var t;this._dirty||(this._dirty=!0,t=this._sync,ct.push(t),-1===ut&&requestAnimationFrame(function(t){ut=-1;var e=ct;ct=[];for(var n=0;n<e.length;n++)e[n]()}))},t.prototype.sync=function(){throw new Error("sync method not implemented")},t}();!function(t){t[t.HideMin=1]="HideMin",t[t.HideMax=2]="HideMax",t[t.HideMean=4]="HideMean",t[t.HideLast=8]="HideLast",t[t.HideGraph=16]="HideGraph",t[t.RoundValues=32]="RoundValues"}(lt||(lt={}));var _t=function(t){function e(e,n,i,o){var l=t.call(this,e)||this;l.flags=n,l.unitName=i,l.samples=o;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=l.name;var s=document.createElement("div");return 0===(n&lt.HideMin)?(l.minText=document.createElement("div"),s.appendChild(l.minText)):l.minText=null,0===(n&lt.HideMax)?(l.maxText=document.createElement("div"),s.appendChild(l.maxText)):l.maxText=null,0===(n&lt.HideMean)?(l.meanText=document.createElement("div"),s.appendChild(l.meanText)):l.meanText=null,0===(n&lt.HideLast)?(l.lastText=document.createElement("div"),s.appendChild(l.lastText)):l.lastText=null,l.element.appendChild(r),l.element.appendChild(s),0===(n&lt.HideGraph)?(l.canvas=document.createElement("canvas"),l.canvas.style.cssText="display: block; padding: 0; margin: 0",l.canvas.width=ht,l.canvas.height=ft,l.ctx=l.canvas.getContext("2d"),l.element.appendChild(l.canvas)):(l.canvas=null,l.ctx=null),l}return dt(e,t),e.prototype.sync=function(){var t,e,n,i,o=this,l=this.samples.calc(),r=ft/(1.2*l.max);0===(this.flags&lt.RoundValues)?(t=l.min.toFixed(2),e=l.max.toFixed(2),n=l.mean.toFixed(2),i=l.last.toFixed(2)):(t=Math.round(l.min).toString(),e=Math.round(l.max).toString(),n=Math.round(l.mean).toString(),i=Math.round(l.last).toString()),null!==this.minText&&(this.minText.textContent="min:  "+t+this.unitName),null!==this.maxText&&(this.maxText.textContent="max:  "+e+this.unitName),null!==this.meanText&&(this.meanText.textContent="mean: "+n+this.unitName),null!==this.lastText&&(this.lastText.textContent="last: "+i+this.unitName),null!==this.ctx&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,ht,ft),this.ctx.fillStyle="#0f0",this.samples.each(function(t,e){o.ctx.fillRect(e,ft,1,-t*r)}))},e}(pt),mt=(function(t){function e(e,n){var i=t.call(this,e)||this;return i.counter=n,i.text=document.createElement("div"),i.element.appendChild(i.text),i}dt(e,t),e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value}}(pt),null);function vt(){mt||((mt=document.createElement("div")).style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(mt))}function xt(t){void 0===t&&(t=lt.HideMin|lt.HideMax|lt.HideMean|lt.RoundValues),vt();var e=new at(rt),n=new _t("FPS",t,"",e);mt.appendChild(n.element);var i=0,o=60;requestAnimationFrame(function t(l){i>0&&(o+=2/121*(1e3/(l-i)-o)),i=l,e.addSample(o),n.invalidate(),requestAnimationFrame(t)})}function yt(t){if(void 0===t&&(t=lt.HideMin|lt.HideMean),vt(),void 0!==performance.memory){var e=new at(rt),n=new _t("Memory",t,"MB",e);mt.appendChild(n.element),function t(){e.addSample(Math.round(performance.memory.usedJSHeapSize/1048576)),n.invalidate(),setTimeout(t,30)}()}}var gt=function(t,e,n){this.data=new at(rt),this.widget=new _t(t,n,e,this.data),this.startTime=-1},wt={};function bt(t,e){void 0===e&&(e=0),vt();var n=wt[t];void 0===n&&(wt[t]=n=new gt(t,"ms",e),mt.appendChild(n.widget.element))}function Tt(t){var e=performance.now(),n=wt[t];void 0!==n&&-1!==n.startTime&&(n.data.addSample(e-n.startTime),n.widget.invalidate())}let Mt=.5,Ct=50;const Et=function(t){if(0===t.length)return{};const e={};for(let n=0;n<t.length;++n){const i=t[n].split("=",2);1===i.length?e[i[0]]="":e[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return e}(window.location.search.substr(1).split("&"));void 0!==Et.n&&(Ct=parseInt(Et.n,10)),void 0!==Et.m&&(Mt=parseFloat(Et.m));const kt=new class{constructor(t){this.dbs=[];for(let e=0;e<t;e++)this.dbs.push(new it("cluster"+(e+1))),this.dbs.push(new it("cluster"+(e+1)+" slave"))}update(){const t=this.dbs;for(let e=0;e<t.length;e++)t[e]=new it(t[e].name)}randomUpdate(t){const e=this.dbs;for(let n=0;n<e.length;n++)Math.random()<t&&(e[n]=new it(e[n].name))}}(Ct);function St(t){if(0===t)return"";if(t>60){const e=Math.floor(t/60),n=(t%60).toFixed(2).split(".");return e+":"+n[0]+"."+n[1]}return t.toFixed(2)}function Ot(t){return t>=20?"label label-important":t>=10?"label label-warning":"label label-success"}function Ht(t){return t>0?t>=10?"Query elapsed warn_long":t>=1?"Query elapsed warn":"Query elapsed short":""}const Ft=l(t=>W("popover left").c(W("popover-content").t(t),W("arrow"))),jt=function(t,e){const n={select:(t,e)=>{const n=kt.dbs[e];return t&&t.db===n?t:{db:n}},render:t=>{const e=t.db,n=e.getTopFiveQueries(),i=e.queries.length;return tt().c($("dbname").t(e.name),$("query-count").c(X(Ot(i)).t(i)),r(n,(t,e)=>$(Ht(t.elapsed)).k(e).c(St(t.elapsed),Ft(t.query))))}};return t=>new i(2048,n,t,"",void 0)}(),Pt=l(t=>Y("table table-striped latest-data").c(Z().c(r(t.dbs,(t,e)=>jt(e).k(t.id)))));B=G,document.addEventListener("DOMContentLoaded",()=>{xt(),yt(),bt("view update");const t=document.createElement("div");t.style.display="flex";const e=document.createElement("input");e.type="range",e.style.marginBottom="10px",e.style.marginTop="5px";const n=document.createElement("label");n.textContent="mutations : "+(100*Mt).toFixed(0)+"%",e.addEventListener("change",t=>{Mt=Number.parseFloat(t.target.value)/100,n.textContent="mutations : "+(100*Mt).toFixed(0)+"%"}),t.appendChild(n),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild);const i=document.getElementById("app");K(Pt(kt),i),setTimeout(function t(){var e;kt.randomUpdate(Mt),void 0!==(e=wt["view update"])&&(e.startTime=performance.now()),D(),Tt("view update"),setTimeout(t,0)},0)})}]);