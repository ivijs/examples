!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}({2:function(t,e,n){n.r(e);const o=(t,e)=>({f:t,d:e}),i=(o(16,null),o(32,null),o(8,null)),l=(t,e)=>({t:t,d:e}),r=(t,e)=>({k:t,v:e}),s=t=>l(i,t);function a(t,e){const n=o(e,t);return(t,e,o=null)=>l(n,{n:t,a:e,c:o})}const c=t=>a(t,2),u=void 0,f=t=>({v:t}),d=[];let p=!1;function m(t){return function(){if(!p)try{return t.apply(void 0,arguments)}catch(e){throw p=!0,d.forEach(t=>{t(e)}),e}}}const h=()=>{};function v(t,e){const n=t.length-1,o=t.pop();e!==n&&(t[e]=o)}function y(t){for(let e=0;e<t.length;++e)!0===t[e]()&&v(t,e--)}const x=(t,e)=>Object.getOwnPropertyDescriptor(t,e),g=Node.prototype,b=Element.prototype,w=document,T=Object.prototype.hasOwnProperty,M=g.insertBefore,C=g.removeChild,_=(g.replaceChild,g.cloneNode),E=b.setAttribute,S=(b.setAttributeNS,b.removeAttribute),H=x(g,"textContent").set,O=x(b,"className").set,j=x(HTMLElement.prototype,"style").get,A=x(SVGElement.prototype,"style").get,F="http://www.w3.org/2000/svg",P=t=>({o:t,f:0,c:null,s:null});let k,N,q,L={};function R(t){const e=L;return L=t,e}function V(t){L=t}function B(){return L}function G(){const t=N;return N=0,t}function I(t,e){const n=e|N;return N|=t,n}function D(t){const e=t.f;if(0===(3&e)){const n=t.c;if(0!==(136&e)){for(let t=0;t<n.length;t++){const e=n[t];if(null!==e)return D(e)}return null}return null===n?null:D(n)}return t.s}function Q(t,e,n,o){const{f:i,c:l}=e;let r,s,a;if(0!==(4&i))r=e.s,s=G(),0!==(256&i)&&(0!==(1024&i)||null!==r.s&&!0===r.s())?e.c=tt(t,l,r.r(e.o.d),n,o):0!==(16384&i)?Q(t,l,n,o):!0===n?z(t,e):k=D(e),e.f=15359&e.f|N,N|=s|(12288&e.f)<<2;else if(0!==(16384&i)){if(s=G(),0!==(3&i))r=e.s,!0===n&&M.call(t,r,k),null!==l&&Q(r,l,!1,!0),k=r;else if(0!==(136&i))for(a=l.length;a>0;)null!==(r=l[--a])&&Q(t,r,n,!1);else if(0!==(16&i))Q(t,e.c,n,o);else{!0===q&&(e.s={...B(),...e.o.d.v});const i=R(e.s);Q(t,e.c,n,o),V(i)}e.f=I(s,e.f)}else!0===n?z(t,e):k=D(e)}function z(t,e){const n=e.f;if(0!==(3&n)){const n=e.s;M.call(t,n,k),k=n}else{const o=e.c;if(0!==(136&n)){let e=o.length;for(;e>0;){const n=o[--e];null!==n&&z(t,n)}}else null!==o&&z(t,o)}}function J(t){const e=t.f;let n,o;if(0!==(32768&e)){const i=t.c;if(null!==i)if(0!==(136&e))for(n=0;n<i.length;n++)null!==(o=i[n])&&J(o);else J(i)}if(0!==(8192&e)&&null!==(o=t.s.u))if("function"===typeof o)o(!0);else for(n=0;n<o.length;n++)o[n](!0)}function U(t,e,n){const o=e.f;if(0!==(3&o))C.call(t,e.s);else{const i=e.c;if(0!==(136&o))if(!0===n)H.call(t,"");else for(let e=0;e<i.length;++e){const n=i[e];null!==n&&U(t,n,!1)}else null!==i&&U(t,i,n)}}function K(t,e,n){U(t,e,n),J(e)}function W(t,e,n){const o=w.createTextNode(n);M.call(t,o,k),k=o,e.s=o,e.f=1}function X(t,e){const n=e.t,{n:o,a:i}=e.d,l=0!==(512&n.f);if(void 0===t){const e=n.d;t=l?w.createElementNS(F,e):w.createElement(e)}return o&&ot(t,o,l),void 0!==i&&lt(t,void 0,i,l),t}function Y(t,e,n){const{t:o,d:i}=n,l=o.f;let r,s,a;if(0!==(4&l))r=G(),0!==(256&l)?(e.s=s={r:null,s:null,u:null},s.r=a=n.t.d.c(e)):a=n.t.d.c,e.c=$(t,a(i)),e.f=15359&e.f|l|N,N|=r|(12288&e.f)<<2;else{if(r=G(),0!==(2&l)){const r=o.d;let c;0!==(64&l)&&(null===(c=r.n)&&(r.n=c=X(void 0,r.p)),c=_.call(c,!1)),e.s=c=X(c,n),s=k,k=null,null!==(a=i.c)&&(e.c=$(c,a)),M.call(t,c,s),k=c}else if(0!==(48&l))0!==(32&l)?(s=R(e.s={...B(),...i.v}),e.c=$(t,i.c),V(s)):e.c=$(t,i.c);else{let n=i.length;for(e.c=a=Array(n);n>0;)a[--n]=$(t,i[n].v)}e.f=I(r,l)}}function Z(t,e,n){let o=n.length;const i=Array(o),l=G();for(;o>0;)i[--o]=$(t,n[o]);e.c=i,e.f=I(l,128)}function $(t,e){if(null!==e){const n=P(e);return"object"===typeof e?e instanceof Array?Z(t,n,e):Y(t,n,e):W(t,n,e),n}return null}function tt(t,e,n,o,i){if(null===n)return null!==e&&K(t,e,i),null;if(null===e)return $(t,n);const{o:l,s:r}=e;let s=e.f;if(0!==(1&s)){if("object"===typeof n)return C.call(t,r),$(t,n);e.o=n,l!==n&&(r.nodeValue=n),!0===o&&M.call(t,r,k),k=r}else{if(l===n)return Q(t,e,o,i),e;if(!0===(a=l,"object"!==typeof(c=n)||(a instanceof Array?!(c instanceof Array):c instanceof Array||a.t!==c.t)))return K(t,e,i),$(t,n);e.o=n;const u=e.c;let f,d,p,m;if(0!==(4&s)){d=l.d,p=n.d;const r=n.t.d;0!==(1024&s)||d!==p&&(void 0===r.su||!0===r.su(d,p))?(f=G(),e.c=tt(t,u,0!==(256&s)?e.s.r(p):r.c(p),o,i),s=e.f,e.f=15359&s|N,N|=f|(12288&s)<<2):Q(t,e,o,i)}else{if(f=G(),0!==(2&s)){const i=0!==(512&s);d=l.d,p=n.d,!0===o&&M.call(t,r,k),m=p.n,d.n!==m&&(void 0===m&&(m=""),ot(r,m,i)),m=p.a,d.a!==m&&lt(r,d.a,m,i),k=null,e.c=tt(r,u,p.c,!1,!0),k=r}else if(0!==(136&s))if(0!==(128&s)){let l=n.length;if(u.length===l)for(;l>0;)u[--l]=tt(t,u[l],n[l],o,!1);else K(t,e,i),Z(t,e,n)}else et(t,e,l.d,n.d,o,i);else if(0!==(16&s))e.c=tt(t,u,n.d.c,o,i);else{const r=q;m=(p=n.d).v,l.d.v===m&&!0!==q||(e.s={...B(),...m},q=!0),m=R(e.s),e.c=tt(t,u,p.c,o,i),V(m),q=r}e.f=I(f,e.f)}}var a,c;return e}function et(t,e,n,o,i,l){let r=o.length,s=n.length;const a=Array(r);if(0===r)s>0&&K(t,e,l);else if(0===s)for(;r>0;)a[--r]=$(t,o[r].v);else{const c=e.c;let u=s-1,f=r-1,d=0,p=o[f];t:for(;;){for(;n[u].k===p.k;){if(a[f]=tt(t,c[u--],p.v,i,!1),d>--f||d>u)break t;p=o[f]}for(;n[d].k===o[d].k;)if(++d>u||d>f)break t;break}if(d>u)for(;f>=d;)a[f]=$(t,o[f--].v);else if(d>f){r=d;do{null!==(p=c[r++])&&K(t,p,!1)}while(r<=u)}else{let m=0,h=0;const v=u-d+1,y=f-d+1,x=Array(y),g=new Map;for(r=0;r<y;++r)s=r+d,x[r]=-1,g.set(o[s].k,s);for(r=d;r<=u&&h<y;++r)void 0!==(s=g.get(n[r].k))&&(m=s<m?s:-1,++h,x[s-d]=r,a[s]=c[r],c[r]=null);if(v===n.length&&0===h)for(K(t,e,l);f>=0;)a[f]=$(t,o[f--].v);else{for(r=d;r<=u;r++)null!==(p=c[r])&&K(t,p,!1);if(r=y,!0===i||-1!==m)for(;r>0;)p=o[m=--r+d].v,a[m]=-1===x[r]?$(t,p):tt(t,a[m],p,i,!1);else{const e=nt(x);for(s=e.length-1;r>0;)p=o[m=--r+d].v,-1===x[r]?a[m]=$(t,p):(s<0||r!==e[s]?i=!0:--s,a[m]=tt(t,a[m],p,i,!1),i=!1)}}}for(;d>0;)a[--d]=tt(t,c[d],o[d].v,i,!1)}e.c=a}function nt(t){const e=t.slice(),n=[];let o,i,l,r=0,s=0;for(n[0]=0;s<t.length;++s){const a=t[s];if(a>-1)if(t[l=n[r]]<a)e[s]=l,n[++r]=s;else{for(o=0,i=r;o<i;)t[n[l=o+i>>1]]<a?o=l+1:i=l;a<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}for(i=n[r];r>=0;)n[r--]=i,i=e[i];return n}function ot(t,e,n){!0===n?E.call(t,"class",e):O.call(t,e)}function it(t,e,n,o){const i=!0===o?A.call(t):j.call(t);let l,r;if(void 0===e)for(l in n)void 0!==(r=n[l])&&i.setProperty(l,r);else if(void 0===n)for(l in e)i.removeProperty(l);else{let t=0,o=0;for(l in e)e[l]!==(r=!0===T.call(n,l)?(t++,n[l]):void 0)&&(void 0!==r?i.setProperty(l,r):i.removeProperty(l));const s=Object.keys(n);for(;t<s.length&&o<s.length;++o)l=s[o],!1===T.call(e,l)&&(i.setProperty(l,n[l]),++t)}}function lt(t,e,n,o){let i;if(void 0===e)for(i in n)rt(t,i,void 0,n[i],o);else if(void 0===n)for(i in e)rt(t,i,e[i],void 0,o);else{let l=0,r=0;for(i in e)rt(t,i,e[i],!0===T.call(n,i)?(l++,n[i]):void 0,o);const s=Object.keys(n);for(;l<s.length&&r<s.length;++r)i=s[r],!1===T.call(e,i)&&(rt(t,i,void 0,n[i],o),++l)}}function rt(t,e,n,o,i){"style"!==e?"object"===typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):"object"===typeof n?n.u(t,e,n.v,void 0):n!==o&&("boolean"===typeof o&&(o=o?"":void 0),void 0===o?S.call(t,e):E.call(t,e,o)):n!==o&&it(t,n,o,i)}const st=[],at=t=>st.find(t);function ct(){for(let t=0;t<st.length;++t){const e=st[t],{container:n,state:o,next:i}=e;k=null,N=0,q=!1,void 0!==i?(e.next=void 0,e.state=tt(n,o,i,!1,!0)):null!==o&&Q(n,o,!1,!0)}}function ut(t){for(;t.v.length>0;){const e=t.v;t.v=[];for(let t=0;t<e.length;++t)e[t]()}}let ft=0,dt=1;const pt=f([]),mt=f([]),ht=f([]),vt=[],yt=[];let xt=0;const gt=t=>m(function(){ft|=1,t.apply(void 0,arguments),ut(pt),ft&=-4,++dt}),bt=gt(h),wt=()=>dt;function Tt(t){var e;pt.v.push(t),0===(3&ft)&&(ft|=2,e=bt,Promise.resolve().then(e))}const Mt=t=>gt(e=>{ft|=16,t(e),0!==(4&ft)&&(xt=void 0===e?performance.now():e,y(vt),0!==(32&ft)&&ct(),ut(mt),y(yt),ut(ht)),ft&=-61}),Ct=Mt(h);function _t(t){void 0!==t&&0!==(1&t)&&0===(8&ft)?0===(16&(ft|=12))&&Tt(Ct):0===(4&ft)&&0===(16&(ft|=4))&&requestAnimationFrame(Ct)}function Et(t){ft|=32,_t(t)}function St(t,e,n){const o=at(t=>t.container===e);o?o.next=t:st.push({container:e,state:null,next:t}),Et(n)}function Ht(t,e,n){const o=t.s.s;let i,l,r=0;return t.s.s=(()=>{if(null!==o&&!0===o())return!0;if(void 0!==i){const t=e(l,i);if(r=wt(),i!==t)return i=t,!0}return!1}),t=>(void 0!==i&&(void 0!==n&&!0===n(l,t)||l!==t)&&(i=void 0),(void 0===i||r<wt())&&(i=e(t,i)),l=t,i)}const Ot=c("div"),jt=c("span"),At=c("table"),Ft=c("tbody"),Pt=c("td"),kt=c("tr");var Nt,qt,Lt=100,Rt=function(t,e,n,o){this.min=t,this.max=e,this.mean=n,this.last=o},Vt=function(){function t(t){this.samples=[],this.maxSamples=t,this._i=-1}return t.prototype.addSample=function(t){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=t},t.prototype.each=function(t){for(var e=this.samples,n=0;n<e.length;n++)t(e[(this._i+1+n)%e.length],n)},t.prototype.calc=function(){var t=this.samples;if(0===t.length)return new Rt(0,0,0,0);for(var e=t[(this._i+1)%t.length],n=e,o=0,i=0;i<t.length;i++){var l=t[(this._i+1+i)%t.length];l<e&&(e=l),l>n&&(n=l),o+=l}var r=t[this._i],s=o/t.length;return new Rt(e,n,s,r)},t}(),Bt=[],Gt=-1,It=(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}Nt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Dt=30,Qt=Lt,zt=function(){function t(t){var e=this;this._sync=function(){e.sync(),e._dirty=!1},this.name=t,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return t.prototype.invalidate=function(){var t;this._dirty||(this._dirty=!0,t=this._sync,Bt.push(t),-1===Gt&&requestAnimationFrame(function(t){Gt=-1;var e=Bt;Bt=[];for(var n=0;n<e.length;n++)e[n]()}))},t.prototype.sync=function(){throw new Error("sync method not implemented")},t}();!function(t){t[t.HideMin=1]="HideMin",t[t.HideMax=2]="HideMax",t[t.HideMean=4]="HideMean",t[t.HideLast=8]="HideLast",t[t.HideGraph=16]="HideGraph",t[t.RoundValues=32]="RoundValues"}(qt||(qt={}));var Jt=function(t){function e(e,n,o,i){var l=t.call(this,e)||this;l.flags=n,l.unitName=o,l.samples=i;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=l.name;var s=document.createElement("div");return 0===(n&qt.HideMin)?(l.minText=document.createElement("div"),s.appendChild(l.minText)):l.minText=null,0===(n&qt.HideMax)?(l.maxText=document.createElement("div"),s.appendChild(l.maxText)):l.maxText=null,0===(n&qt.HideMean)?(l.meanText=document.createElement("div"),s.appendChild(l.meanText)):l.meanText=null,0===(n&qt.HideLast)?(l.lastText=document.createElement("div"),s.appendChild(l.lastText)):l.lastText=null,l.element.appendChild(r),l.element.appendChild(s),0===(n&qt.HideGraph)?(l.canvas=document.createElement("canvas"),l.canvas.style.cssText="display: block; padding: 0; margin: 0",l.canvas.width=Qt,l.canvas.height=Dt,l.ctx=l.canvas.getContext("2d"),l.element.appendChild(l.canvas)):(l.canvas=null,l.ctx=null),l}return It(e,t),e.prototype.sync=function(){var t,e,n,o,i=this,l=this.samples.calc(),r=Dt/(1.2*l.max);0===(this.flags&qt.RoundValues)?(t=l.min.toFixed(2),e=l.max.toFixed(2),n=l.mean.toFixed(2),o=l.last.toFixed(2)):(t=Math.round(l.min).toString(),e=Math.round(l.max).toString(),n=Math.round(l.mean).toString(),o=Math.round(l.last).toString()),null!==this.minText&&(this.minText.textContent="min:  "+t+this.unitName),null!==this.maxText&&(this.maxText.textContent="max:  "+e+this.unitName),null!==this.meanText&&(this.meanText.textContent="mean: "+n+this.unitName),null!==this.lastText&&(this.lastText.textContent="last: "+o+this.unitName),null!==this.ctx&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,Qt,Dt),this.ctx.fillStyle="#0f0",this.samples.each(function(t,e){i.ctx.fillRect(e,Dt,1,-t*r)}))},e}(zt),Ut=(function(t){function e(e,n){var o=t.call(this,e)||this;return o.counter=n,o.text=document.createElement("div"),o.element.appendChild(o.text),o}It(e,t),e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value}}(zt),null);function Kt(){Ut||((Ut=document.createElement("div")).style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(Ut))}function Wt(t){void 0===t&&(t=qt.HideMin|qt.HideMax|qt.HideMean|qt.RoundValues),Kt();var e=new Vt(Lt),n=new Jt("FPS",t,"",e);Ut.appendChild(n.element);var o=0,i=60;requestAnimationFrame(function t(l){o>0&&(i+=2/121*(1e3/(l-o)-i)),o=l,e.addSample(i),n.invalidate(),requestAnimationFrame(t)})}function Xt(t){if(void 0===t&&(t=qt.HideMin|qt.HideMean),Kt(),void 0!==performance.memory){var e=new Vt(Lt),n=new Jt("Memory",t,"MB",e);Ut.appendChild(n.element),function t(){e.addSample(Math.round(performance.memory.usedJSHeapSize/1048576)),n.invalidate(),setTimeout(t,30)}()}}var Yt=function(t,e,n){this.data=new Vt(Lt),this.widget=new Jt(t,n,e,this.data),this.startTime=-1},Zt={};function $t(t,e){void 0===e&&(e=0),Kt();var n=Zt[t];void 0===n&&(Zt[t]=n=new Yt(t,"ms",e),Ut.appendChild(n.widget.element))}function te(t){var e=performance.now(),n=Zt[t];void 0!==n&&-1!==n.startTime&&(n.data.addSample(e-n.startTime),n.widget.invalidate())}let ee=.5,ne=50;function oe(t){if(0===t.length)return{};const e={};for(let n=0;n<t.length;++n){const o=t[n].split("=",2);1===o.length?e[o[0]]="":e[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return e}function ie(){let t;return{elapsed:15*Math.random(),query:t=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something"}}function le(){const t=[],e=Math.floor(10*Math.random()+1);for(let n=0;n<e;n++)t.push(ie());return t}const re={elapsed:0,query:"***"};let se=0;function ae(t,e){return void 0===e&&(e=se++),{id:e,name:t,queries:le()}}function ce(t){const e=t.queries.slice(0,5);for(e.sort((t,e)=>t.elapsed-e.elapsed);e.length<5;)e.push(re);return e}function ue(t,e){for(let n=0;n<t.length;n++)if(Math.random()<e){const{id:e,name:o}=t[n];t[n]=ae(o,e)}}function fe(t){if(0===t)return"";if(t>60){const e=Math.floor(t/60),n=(t%60).toFixed(2).split(".");return e+":"+n[0].padStart(2,"0")+"."+n[1]}return t.toFixed(2)}!function(){const t=oe(window.location.search.substr(1).split("&"));void 0!==t.n&&(ne=parseInt(t.n,10)),void 0!==t.m&&(ee=parseFloat(t.m)),document.addEventListener("DOMContentLoaded",()=>{Wt(),Xt(),$t("view update");const t=document.createElement("div");t.style.display="flex";const e=document.createElement("input");e.type="range",e.style.marginBottom="10px",e.style.marginTop="5px";const n=document.createElement("label");n.textContent="mutations : "+(100*ee).toFixed(0)+"%",e.addEventListener("change",t=>{ee=Number.parseFloat(t.target.value)/100,n.textContent="mutations : "+(100*ee).toFixed(0)+"%"}),t.appendChild(n),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild)})}();const de=function(t){const e=[];for(let n=0;n<t;n++)e.push(ae("cluster"+(n+1))),e.push(ae("cluster"+(n+1)+" slave"));return e}(ne),pe=Ot("arrow"),me=function(t,e){const n=o(4,{c:t=>Ot("popover left",u,[Ot("popover-content",u,t),pe]),su:void 0});return t=>l(n,t)}(),he=({elapsed:t,query:e})=>Pt(t>=10?"Query elapsed warn_long":t>=1?"Query elapsed warn":"Query elapsed short",u,[fe(t),me(e)]),ve=function(t,e){const n=o(4356,{c:t=>{const e=Ht(t,t=>de[t]);return t=>{const n=e(t),o=n.queries.length;return kt(u,u,[Pt("dbname",u,n.name),Pt("query-count",u,jt(o>=20?"label label-important":o>=10?"label label-warning":"label label-success",u,o)),ce(n).map(he)])}},su:void 0});return t=>l(n,t)}(),ye=t=>At("table table-striped latest-data",u,[Ft(u,u,s(t.map((t,e)=>r(t.id,ve(e)))))]),xe=document.getElementById("app");Mt(()=>{St(ye(de),xe)})(),setTimeout(function t(){var e;ue(de,ee),void 0!==(e=Zt["view update"])&&(e.startTime=performance.now()),Mt(Et)(),te("view update"),setTimeout(t,0)},0)}});