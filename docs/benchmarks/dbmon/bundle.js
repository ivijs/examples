!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}({2:function(t,e,n){n.r(e);const o=(t,e)=>({f:t,d:e}),i=(o(16,null),o(4128,null),o(8,null)),l=(t,e)=>({t:t,v:e}),r=(t,e,n)=>({t:t,v:e,c:n}),a=(t,e,n,o)=>({t:t,v:e,c:n,n:o}),c=(t,e)=>({k:t,v:e}),s=t=>l(i,t);function u(t,e){const n=o(e,t);return(t,e,o=null)=>a(n,e,o,t)}const d=t=>u(t,2);function f(t,e,n){const i=o(4,{c:t,e1:e,e2:n});return(t,e)=>r(i,t,e)}function p(t,e,n){return f(e=>t,e,n)}const m=void 0;let v=1;function h(){return v}function y(){v++}const x={},g={},b={};let w=null;const T=t=>({t:h(),v:t}),M=t=>(t.t=h(),t.v);function C(t){return null===w?w=[h(),t]:w.push(t),"function"===typeof t?t:t.v}function _(){const t=w;return w=null,t}function E(t){const e=t[0];for(let n=1;n<t.length;n++){const o=t[n];if("object"!==typeof o)return o(g,e);if(o.t>e)return!0}return!1}const S=t=>({v:t}),H=[];let O=!1;function j(t){return function(){if(!O)try{return t.apply(void 0,arguments)}catch(e){throw O=!0,H.forEach(t=>{t(e)}),e}}}const A=()=>{};function F(t,e){const n=t.length-1,o=t.pop();e!==n&&(t[e]=o)}function P(t){for(let e=0;e<t.length;++e)!0===t[e]()&&F(t,e--)}const k=(t,e)=>Object.getOwnPropertyDescriptor(t,e),q=Node.prototype,N=Element.prototype,L=document,R=Object.prototype.hasOwnProperty,V=q.insertBefore,B=q.removeChild,G=(q.replaceChild,q.cloneNode),I=N.setAttribute,D=(N.setAttributeNS,N.removeAttribute),Q=k(q,"textContent").set,z=k(N,"className").set,J=k(HTMLElement.prototype,"style").get,U=k(SVGElement.prototype,"style").get,K="http://www.w3.org/2000/svg",W=t=>({f:0,o:t,c:null,s:null});let X,Y=null;function Z(t){return Y=t}function $(t,e,n,o){const i=e.f,l=e.c;let r,a,c;if(0!==(3&i))r=e.s,!0===n&&V.call(t,r,X),null!==l&&(X=null,$(r,l,!1,!0)),X=r;else if(0!==(4&i))r=e.s,0!==(512&i)||null!==r.d&&!0===E(r.d)?(c=e.o,c=r.r(c.v,c.c),r.d=_(),e.c=ct(t,l,c,n,o)):null!==l&&$(t,l,n,o);else if(0!==(136&i))for(a=l.length;a>0;)null!==(r=l[--a])&&$(t,r,n,!1);else 0!==(16&i)?$(t,l,n,o):(r=Z(e.s),$(t,l,n,o),Z(r))}function tt(t){const e=t.f;let n,o,i;if(null!==(n=t.c))if(0!==(136&e))for(o=0;o<n.length;o++)null!==(i=n[o])&&tt(i);else tt(n);if(0!==(4&e)&&null!==(i=t.s.u))if("function"===typeof i)i(b);else for(o=0;o<i.length;o++)i[o](b)}function et(t,e,n){let o,i=e.f;if(0!==(3&i))B.call(t,e.s);else if(e=e.c,0!==(136&i))if(!0===n)Q.call(t,"");else for(i=0;i<e.length;++i)null!==(o=e[i])&&et(t,o,!1);else null!==e&&et(t,e,n)}function nt(t,e,n){et(t,e,n),tt(e)}function ot(t,e,n){const o=L.createTextNode(n);V.call(t,o,X),X=o,e.s=o,e.f=1}function it(t,e){const{t:n,v:o,n:i}=e,l=0!==(256&n.f);if(void 0===t){const e=n.d;t=l?L.createElementNS(K,e):L.createElement(e)}return i&&dt(t,i,l),void 0!==o&&pt(t,void 0,o,l),t}function lt(t,e,n){const o=n.t,i=o.f;let l,r,a,c;if(0!==(4&i))e.s=l={r:null,d:null,u:null},l.r=r=o.d.c(e),a=r(n.v,n.c),l.d=_(),e.c=at(t,a),e.f|=i;else{if(0!==(2&i))r=o.d,0!==(64&i)&&(null===(a=r.n)&&(r.n=a=it(void 0,r.p)),a=G.call(a,!1)),e.s=a=it(a,n),l=X,null!==(r=n.c)&&(X=null,e.c=at(a,r)),X=a,V.call(t,a,l);else if(0!==(48&i))0!==(32&i)?(e.s=l=0!==(4096&i)?Z(n.v):(s=o.d,u=n.v,Y={n:Y,d:s,v:T(u)}),e.c=at(t,n.c),Z(l)):e.c=at(t,n.c);else for(c=(a=n.v).length,e.c=r=Array(c);c>0;)r[--c]=at(t,a[c].v);e.f=i}var s,u}function rt(t,e,n){let o=n.length;const i=Array(o);for(;o>0;)i[--o]=at(t,n[o]);e.c=i,e.f=128}function at(t,e){if(null!==e){const n=W(e);return"object"===typeof e?e instanceof Array?rt(t,n,e):lt(t,n,e):ot(t,n,e),n}return null}function ct(t,e,n,o,i){if(null===n)return null!==e&&nt(t,e,i),null;if(null===e)return at(t,n);const{f:l,o:r,s:a}=e;if(0!==(1&l)){if("object"===typeof n)return B.call(t,a),at(t,n);e.o=n,r!==n&&(a.nodeValue=n),!0===o&&V.call(t,a,X),X=a}else{if(r===n)return $(t,e,o,i),e;if(0!==(128&l)?!(n instanceof Array):n instanceof Array||r.t!==n.t)return nt(t,e,i),at(t,n);e.o=n;const u=e.c;let d,f,p,m,v,y;if(0!==(4&l))d=r.v,p=r.c,f=n.v,m=n.c,v=n.t.d,p!==m&&(void 0===v.e2||!0!==v.e2(p,m))||d!==f&&(void 0===v.e1||!0!==v.e1(d,f))?(f=a.r(f,m),a.d=_(),e.c=ct(t,u,f,o,i)):$(t,e,o,i);else if(0!==(2&l))y=0!==(256&l),r.n!==(v=n.n)&&(void 0===v&&(v=""),dt(a,v,y)),r.v!==(v=n.v)&&pt(a,r.v,v,y),!0===o&&V.call(t,a,X),X=null,e.c=ct(a,u,n.c,!1,!0),X=a;else if(0!==(136&l))if(0!==(128&l))if(0===(y=n.length))nt(t,e,i);else{if(y!==(d=u.length)){for(e.c=v=Array(y);d>y;)null!==(f=u[--d])&&nt(t,f,!1);for(;y>d;)v[--y]=at(t,n[y])}else v=u;for(;y>0;)v[--y]=ct(t,u[y],n[y],o,!1)}else st(t,e,r.v,n.v,o,i);else 0!==(16&l)?e.c=ct(t,u,n.c,o,i):(f=n.v,0!==(4096&l)?e.s=f:(v=a.v).v!==f&&(s=f,(c=v).t=h(),c.v=s),v=Z(e.s),e.c=ct(t,u,n.c,o,i),Z(v))}var c,s;return e}function st(t,e,n,o,i,l){let r=o.length,a=n.length;const c=Array(r);if(0===r)a>0&&nt(t,e,l);else if(0===a)for(;r>0;)c[--r]=at(t,o[r].v);else{const s=e.c;let u=a-1,d=r-1,f=0,p=o[d];t:for(;;){for(;n[u].k===p.k;){if(c[d]=ct(t,s[u--],p.v,i,!1),f>--d||f>u)break t;p=o[d]}for(;n[f].k===o[f].k&&++f<=u&&f<=d;);break}if(f>u)for(;d>=f;)c[d]=at(t,o[d--].v);else if(f>d){r=f;do{null!==(p=s[r++])&&nt(t,p,!1)}while(r<=u)}else{let m=0,v=0;const h=u-f+1,y=d-f+1,x=Array(y),g=new Map;for(r=0;r<y;++r)a=r+f,x[r]=-1,g.set(o[a].k,a);for(r=f;r<=u&&v<y;++r)void 0!==(a=g.get(n[r].k))&&(m=m<a?a:99999999,++v,x[a-f]=r,c[a]=s[r],s[r]=null);if(h===n.length&&0===v)for(nt(t,e,l);d>=0;)c[d]=at(t,o[d--].v);else{for(r=f;r<=u;r++)null!==(p=s[r])&&nt(t,p,!1);if(r=y,!0===i||99999999!==m)for(;r>0;)p=o[m=--r+f].v,c[m]=-1===x[r]?at(t,p):ct(t,c[m],p,i,!1);else{const e=ut(x);for(a=e.length-1;r>0;)p=o[m=--r+f].v,-1===x[r]?c[m]=at(t,p):(a<0||r!==e[a]?i=!0:--a,c[m]=ct(t,c[m],p,i,!1),i=!1)}}}for(;f>0;)c[--f]=ct(t,s[f],o[f].v,i,!1)}e.c=c}function ut(t){const e=t.slice(),n=[];let o,i,l,r=0,a=0;for(n[0]=0;a<t.length;++a){const c=t[a];if(c>-1)if(t[l=n[r]]<c)e[a]=l,n[++r]=a;else{for(o=0,i=r;o<i;)t[n[l=o+i>>1]]<c?o=l+1:i=l;c<t[n[o]]&&(o>0&&(e[a]=n[o-1]),n[o]=a)}}for(i=n[r];r>=0;)n[r--]=i,i=e[i];return n}function dt(t,e,n){!0===n?I.call(t,"class",e):z.call(t,e)}function ft(t,e,n,o){const i=!0===o?U.call(t):J.call(t);let l,r;if(void 0===e)for(l in n)void 0!==(r=n[l])&&i.setProperty(l,r);else if(void 0===n)for(l in e)void 0!==e[l]&&i.removeProperty(l);else{let t=0,o=0;for(l in e)e[l]!==(r=!0===R.call(n,l)?(t++,n[l]):void 0)&&(void 0!==r?i.setProperty(l,r):i.removeProperty(l));const a=Object.keys(n);for(;t<a.length&&o<a.length;++o)l=a[o],!1===R.call(e,l)&&(r=n[l],++t,void 0!==r&&i.setProperty(l,n[l]))}}function pt(t,e,n,o){let i;if(void 0===e)for(i in n)mt(t,i,void 0,n[i],o);else if(void 0===n)for(i in e)mt(t,i,e[i],void 0,o);else{let l=0,r=0;for(i in e)mt(t,i,e[i],!0===R.call(n,i)?(l++,n[i]):void 0,o);const a=Object.keys(n);for(;l<a.length&&r<a.length;++r)i=a[r],!1===R.call(e,i)&&(mt(t,i,void 0,n[i],o),++l)}}function mt(t,e,n,o,i){"style"!==e?"object"===typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):"object"===typeof n?n.u(t,e,n.v,void 0):n!==o&&("boolean"===typeof o&&(o=o?"":void 0),void 0===o?void 0!==n&&!1!==n&&D.call(t,e):I.call(t,e,o)):n!==o&&ft(t,n,o,i)}const vt=[],ht=t=>vt.find(t);function yt(){for(let t=0;t<vt.length;++t){const e=vt[t],{container:n,state:o,next:i}=e;X=null,void 0!==i?(e.next=void 0,e.state=ct(n,o,i,!1,!0)):null!==o&&$(n,o,!1,!0)}}function xt(t){for(;t.v.length>0;){const e=t.v;t.v=[];for(let t=0;t<e.length;++t)e[t](x)}}let gt=0,bt=0;const wt=Promise.resolve(),Tt=S([]),Mt=S([]),Ct=S([]),_t=[],Et=[],St=t=>j(function(){gt|=1,t.apply(void 0,arguments),xt(Tt),gt&=-4,y()}),Ht=St(A),Ot=t=>St(e=>{gt|=16,t(e),0!==(4&gt)&&(void 0!==e&&(bt=e),P(_t),0!==(32&gt)&&yt(),xt(Mt),P(Et),xt(Ct)),gt&=-61}),jt=Ot(A),At=()=>{jt()};function Ft(t){var e;void 0!==t&&0!==(1&t)&&0===(8&gt)?0===(16&(gt|=12))&&(e=At,Tt.v.push(e),0===(3&gt)&&(gt|=2,wt.then(Ht))):0===(4&gt)&&0===(16&(gt|=4))&&requestAnimationFrame(jt)}function Pt(t){gt|=32,Ft(t)}function kt(t,e,n){const o=ht(t=>t.container===e);o?o.next=t:vt.push({container:e,state:null,next:t}),Pt(n)}const qt=d("div"),Nt=d("span"),Lt=d("table"),Rt=d("tbody"),Vt=d("td"),Bt=d("tr");var Gt,It,Dt=100,Qt=function(t,e,n,o){this.min=t,this.max=e,this.mean=n,this.last=o},zt=function(){function t(t){this.samples=[],this.maxSamples=t,this._i=-1}return t.prototype.addSample=function(t){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=t},t.prototype.each=function(t){for(var e=this.samples,n=0;n<e.length;n++)t(e[(this._i+1+n)%e.length],n)},t.prototype.calc=function(){var t=this.samples;if(0===t.length)return new Qt(0,0,0,0);for(var e=t[(this._i+1)%t.length],n=e,o=0,i=0;i<t.length;i++){var l=t[(this._i+1+i)%t.length];l<e&&(e=l),l>n&&(n=l),o+=l}var r=t[this._i],a=o/t.length;return new Qt(e,n,a,r)},t}(),Jt=[],Ut=-1,Kt=(Gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}Gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Wt=30,Xt=Dt,Yt=function(){function t(t){var e=this;this._sync=function(){e.sync(),e._dirty=!1},this.name=t,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return t.prototype.invalidate=function(){var t;this._dirty||(this._dirty=!0,t=this._sync,Jt.push(t),-1===Ut&&requestAnimationFrame(function(t){Ut=-1;var e=Jt;Jt=[];for(var n=0;n<e.length;n++)e[n]()}))},t.prototype.sync=function(){throw new Error("sync method not implemented")},t}();!function(t){t[t.HideMin=1]="HideMin",t[t.HideMax=2]="HideMax",t[t.HideMean=4]="HideMean",t[t.HideLast=8]="HideLast",t[t.HideGraph=16]="HideGraph",t[t.RoundValues=32]="RoundValues"}(It||(It={}));var Zt=function(t){function e(e,n,o,i){var l=t.call(this,e)||this;l.flags=n,l.unitName=o,l.samples=i;var r=document.createElement("div");r.style.cssText="text-align: center",r.textContent=l.name;var a=document.createElement("div");return 0===(n&It.HideMin)?(l.minText=document.createElement("div"),a.appendChild(l.minText)):l.minText=null,0===(n&It.HideMax)?(l.maxText=document.createElement("div"),a.appendChild(l.maxText)):l.maxText=null,0===(n&It.HideMean)?(l.meanText=document.createElement("div"),a.appendChild(l.meanText)):l.meanText=null,0===(n&It.HideLast)?(l.lastText=document.createElement("div"),a.appendChild(l.lastText)):l.lastText=null,l.element.appendChild(r),l.element.appendChild(a),0===(n&It.HideGraph)?(l.canvas=document.createElement("canvas"),l.canvas.style.cssText="display: block; padding: 0; margin: 0",l.canvas.width=Xt,l.canvas.height=Wt,l.ctx=l.canvas.getContext("2d"),l.element.appendChild(l.canvas)):(l.canvas=null,l.ctx=null),l}return Kt(e,t),e.prototype.sync=function(){var t,e,n,o,i=this,l=this.samples.calc(),r=Wt/(1.2*l.max);0===(this.flags&It.RoundValues)?(t=l.min.toFixed(2),e=l.max.toFixed(2),n=l.mean.toFixed(2),o=l.last.toFixed(2)):(t=Math.round(l.min).toString(),e=Math.round(l.max).toString(),n=Math.round(l.mean).toString(),o=Math.round(l.last).toString()),null!==this.minText&&(this.minText.textContent="min:  "+t+this.unitName),null!==this.maxText&&(this.maxText.textContent="max:  "+e+this.unitName),null!==this.meanText&&(this.meanText.textContent="mean: "+n+this.unitName),null!==this.lastText&&(this.lastText.textContent="last: "+o+this.unitName),null!==this.ctx&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,Xt,Wt),this.ctx.fillStyle="#0f0",this.samples.each(function(t,e){i.ctx.fillRect(e,Wt,1,-t*r)}))},e}(Yt),$t=(function(t){function e(e,n){var o=t.call(this,e)||this;return o.counter=n,o.text=document.createElement("div"),o.element.appendChild(o.text),o}Kt(e,t),e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value}}(Yt),null);function te(){$t||(($t=document.createElement("div")).style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild($t))}function ee(t){void 0===t&&(t=It.HideMin|It.HideMax|It.HideMean|It.RoundValues),te();var e=new zt(Dt),n=new Zt("FPS",t,"",e);$t.appendChild(n.element);var o=0,i=60;requestAnimationFrame(function t(l){o>0&&(i+=2/121*(1e3/(l-o)-i)),o=l,e.addSample(i),n.invalidate(),requestAnimationFrame(t)})}function ne(t){if(void 0===t&&(t=It.HideMin|It.HideMean),te(),void 0!==performance.memory){var e=new zt(Dt),n=new Zt("Memory",t,"MB",e);$t.appendChild(n.element),function t(){e.addSample(Math.round(performance.memory.usedJSHeapSize/1048576)),n.invalidate(),setTimeout(t,30)}()}}var oe=function(t,e,n){this.data=new zt(Dt),this.widget=new Zt(t,n,e,this.data),this.startTime=-1},ie={};function le(t,e){void 0===e&&(e=0),te();var n=ie[t];void 0===n&&(ie[t]=n=new oe(t,"ms",e),$t.appendChild(n.widget.element))}function re(t){var e=performance.now(),n=ie[t];void 0!==n&&-1!==n.startTime&&(n.data.addSample(e-n.startTime),n.widget.invalidate())}let ae=.5,ce=50;function se(t){if(0===t.length)return{};const e={};for(let n=0;n<t.length;++n){const o=t[n].split("=",2);1===o.length?e[o[0]]="":e[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return e}function ue(){let t;return{elapsed:15*Math.random(),query:t=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something"}}function de(){const t=[],e=Math.floor(10*Math.random()+1);for(let n=0;n<e;n++)t.push(ue());return t}const fe={elapsed:0,query:"***"};let pe=0;function me(t,e){return void 0===e&&(e=pe++),T({id:e,name:t,queries:de()})}function ve(t){const e=t.queries.slice(0,5);for(e.sort((t,e)=>t.elapsed-e.elapsed);e.length<5;)e.push(fe);return e}function he(t,e){for(let n=0;n<t.length;n++)Math.random()<e&&(M(t[n]).queries=de())}function ye(t){if(0===t)return"";if(t>60){const e=Math.floor(t/60),n=(t%60).toFixed(2).split(".");return e+":"+n[0].padStart(2,"0")+"."+n[1]}return t.toFixed(2)}!function(){const t=se(window.location.search.substr(1).split("&"));void 0!==t.n&&(ce=parseInt(t.n,10)),void 0!==t.m&&(ae=parseFloat(t.m)),document.addEventListener("DOMContentLoaded",()=>{ee(),ne(),le("view update");const t=document.createElement("div");t.style.display="flex";const e=document.createElement("input");e.type="range",e.style.marginBottom="10px",e.style.marginTop="5px";const n=document.createElement("label");n.textContent="mutations : "+(100*ae).toFixed(0)+"%",e.addEventListener("change",t=>{ae=Number.parseFloat(t.target.value)/100,n.textContent="mutations : "+(100*ae).toFixed(0)+"%"}),t.appendChild(n),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild)})}();const xe=function(t){const e=[];for(let n=0;n<t;n++)e.push(me("cluster"+(n+1))),e.push(me("cluster"+(n+1)+" slave"));return e}(ce),ge=qt("arrow"),be=p(t=>qt("popover left",m,[qt("popover-content",m,t),ge])),we=({elapsed:t,query:e})=>Vt(t>=10?"Query elapsed warn_long":t>=1?"Query elapsed warn":"Query elapsed short",m,[ye(t),be(e)]),Te=p(t=>{const e=C(t),n=e.queries.length;return Bt(m,m,[Vt("dbname",m,e.name),Vt("query-count",m,Nt(n>=20?"label label-important":n>=10?"label label-warning":"label label-success",m,n)),ve(e).map(we)])}),Me=t=>Lt("table table-striped latest-data",m,[Rt(m,m,s(t.map(t=>c(t.v.id,Te(t)))))]),Ce=document.getElementById("app");Ot(()=>{kt(Me(xe),Ce)})(),setTimeout(function t(){var e;he(xe,ae),void 0!==(e=ie["view update"])&&(e.startTime=performance.now()),Ot(Pt)(),re("view update"),setTimeout(t,0)},0)}});