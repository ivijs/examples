!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),Object.setPrototypeOf||Array;var r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function i(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}function l(e,t){for(var n=null,r=null,i=0;i<e.length;++i){var o=t(e[i],i);null!==o&&(null!==r?(o._l=r,r._r=o):n=o,r=o)}return null!==n?(n._l=r,n._f|=64,n):null}(function(){try{var e=Object.defineProperty({},"passive",{get:function(){}});window.addEventListener("test",null,e)}catch(e){}})(),KeyboardEvent.prototype.hasOwnProperty("key"),MouseEvent.prototype.hasOwnProperty("buttons"),window,window,window;var u="GestureEvent"in window;function s(){}var c=[],d=Node.prototype,f=Element.prototype,v=(Object.prototype.hasOwnProperty,d.insertBefore),p=d.removeChild,h=d.replaceChild,m=d.cloneNode,_=f.setAttribute,y=(f.setAttributeNS,f.removeAttribute),x="http://www.w3.org/2000/svg";function g(e,t){var n,r,i;if(null===e)w(t);else if(null===t)b(e);else if(e instanceof Array)if(t instanceof Array){for(n=0;n<e.length&&n<t.length;)(r=e[n])!==(i=t[n++])&&(null!==i&&T(i),null!==r&&M(r));for(;n<t.length;)null!==(r=t[n++])&&T(r);for(;n<e.length;)null!==(r=e[n++])&&M(r)}else for(T(t),n=0;n<e.length;++n)null!==(r=e[n])&&M(r);else w(t),M(e)}function w(e){if(e instanceof Array)for(var t=0;t<e.length;++t){var n=e[t];null!==n&&T(n)}else T(e)}function b(e){if(e instanceof Array)for(var t=0;t<e.length;++t){var n=e[t];null!==n&&M(n)}else M(e)}function T(e){e.src.add(e)}function M(e){e.src.remove(e)}var C=function(){function e(e,t,n,r,i){this._f=e,this._l=this,this._r=null,this._c=null,this._t=t,this._k=0,this._p=n,this._i=null,this._cs=r,this._s=i,this._e=null}return e.prototype.k=function(e){return this._f|=32,this._k=e,this},e.prototype.e=function(e){return null!==e&&(this._f|=128,this._e=e),this},e.prototype.c=function(){for(var e=arguments,t=null,n=null,r=0,i=0;r<e.length;++r,++i){var o=e[r];if(null!==o){"object"!=typeof o&&(o=E(o));var a=o._l,l=o._f;if(a===o)0==(32&l)&&(o._k=i);else if(0==(64&l)){var u=o;do{0==(32&u._f)&&(u._k=i),++i,u=u._r}while(null!==u);--i}null!==n?(o._l=n,n._r=o):t=o,n=a}}return null!==t&&(t._l=n,this._c=t),this},e}();function E(e){return new C(1,null,e,"",void 0)}function S(e){return 0!=(1560&e._f)?S(e._c):e._i}function k(e,t){p.call(e,S(t)),H(t)}function O(e){var t=e._f;0!=(16&t)&&e._i.attached();for(var n=e._c;null!==n;)O(n),n=n._r;0!=(128&t)&&w(e._e)}function H(e){for(var t=e._c;null!==t;)H(t),t=t._r;var n=e._f;if(0!=(16&n)){var r=e._i;r.flags|=1,r.detached()}0!=(128&n)&&b(e._e)}function F(e,t,n,i){var o,a,l=t._f;if((-2147482086&l)>0)if(o=t._c,0!=(2&l))for(a=t._i;null!==o;)F(a,o,n,i),o=o._r;else if(0!=(16&l))0!=(2&(a=t._i).flags)?(N(e,o,t._c=a.render(),n,i),a.flags&=-3,a.updated()):F(e,o,n,i);else if(0!=(512&l)){var u=t._t;a=t._i;var s=u.select(a,t._p,n);a===s?F(e,o,n,i):(t._i=s,N(e,o,t._c=u.render(s),n,i))}else 0!=(1024&l)&&(!0===i&&(t._i=r({},n,t._p)),n=t._i),F(e,o,n,i)}function P(e,t){e.textContent="";do{H(t),t=t._r}while(null!==t)}function j(e,t,n){var i,o=t._f,a=t._p,l=null;if(0!=(1&o))l=i=document.createTextNode(a);else{var u=t._t;if(0!=(18&o))if(0!=(2&o)){var s=0!=(256&o);0==(4&o)?i=s?document.createElementNS(x,u):document.createElement(u):(null===u._i&&j(e,u,n),i=m.call(u._i,!1)),l=i;var c=t._cs;""!==c&&(!0===s?_.call(i,"class",c):i.className=c),void 0!==a&&B(i,void 0,a),void 0!==t._s&&I(i,void 0,t._s);for(var d=t._c;null!==d;)v.call(i,j(i,d,n),null),d=d._r}else{var f=l=new u(a);i=j(e,t._c=f.render(),n)}else{if(0!=(1536&o))if(0!=(512&o)){var p=u,h=l=p.select(null,a,n);t._c=p.render(h)}else n=l=r({},n,a);else t._c=u.render(a);i=j(e,t._c,n)}}return t._i=l,i}function A(e,t,n,r){var i=j(e,n,r);return v.call(e,i,t),O(n),i}function N(e,t,n,i,o){if(t!==n){var a,l=t._f,u=n._f;if(0!=(1046335&(l^u))||0!=(540&l)&&t._t!==n._t||t._k!==n._k)a=j(e,n,i),h.call(e,a,S(t)),H(t),O(n);else{var s=t._p,c=n._p;if(n._i=a=t._i,0!=(1&u))s!==c&&(a.data=c);else{var d=t._c,f=n._c;if(t._e!==n._e&&g(t._e,n._e),0!=(18&u))if(0!=(2&u)){var v=n._cs;if(t._cs!==v&&(0!=(256&u)?_.call(a,"class",v):a.className=v),s!==c&&B(a,s,c),t._s!==n._s&&I(a,t._s,n._s),d!==f)if(null===d)do{A(a,null,f,i),f=f._r}while(null!==f);else null===f?P(a,d):q(a,d,f,i,o)}else s!==c&&a.propsChanged(s,c),a.props=c,0!=(2&a.flags)||!0===a.shouldUpdate(s,c)?(N(e,d,n._c=a.render(),i,o),a.flags&=-3,a.updated()):F(e,n._c=d,i,o);else if(0!=(1536&u))if(0!=(512&u)){var p=n._t,m=a,y=n._i=p.select(m,c,i);m===y?F(e,n._c=d,i,o):N(e,d,n._c=p.render(y),i,o)}else s!==c&&(o=!0),n._i=i=!0===o?r({},i,c):a,N(e,d,f,i,o);else{var x=n._t;s===c||0!=(2048&u)&&!0!==x.shouldUpdate(s,c)?F(e,n._c=d,i,o):N(e,d,n._c=x.render(c),i,o)}}}}else F(e,n,i,o)}function q(e,t,n,r,i){var o=t._l,a=n._l,l=0,u=0;e:for(;;){for(;t._k===n._k&&0==(32&(t._f^n._f));)if(N(e,t,n,r,i),u++,t===o?l=1:t=t._r,n===a?l|=2:n=n._r,l)break e;for(;o._k===a._k&&0==(32&(o._f^a._f));)if(N(e,o,a,r,i),u++,t===o?l=1:o=o._l,n===a?l|=2:a=a._l,l)break e;break}if(l){if(l<3)if(l<2)for(var s=L(a);A(e,s,n,r),n!==a;)n=n._r;else for(;k(e,t),t!==o;)t=t._r}else{for(var c=0,d=0,f=0,p=[],h=void 0,m=void 0,_=void 0,y=n;_=y._k,32&y._f?(void 0===h&&(h=new Map),h.set(_,d)):(void 0===m&&(m=new Map),m.set(_,d)),p[d++]=y,y!==a;)y=y._r;var x=new Array(d).fill(-1),g=0;for(y=t;_=y._k,void 0===(l=32&y._f?h?h.get(_):void 0:m?m.get(_):void 0)?y._k=null:(f=f>l?1e9:l,x[l]=c,N(e,y,p[l],r,i),g++),c++,y!==o;)y=y._r;if(u||g){for(l=c-g;l>0;)null===t._k&&(k(e,t),l--),t=t._r;if(1e9===f){var w=R(x);for(l=w.length-1;d>0;)x[--d]<0?A(e,L(a),a,r):l<0||d!==w[l]?v.call(e,S(a),L(a)):l--,a=a._l}else if(g!==d)for(;d>0;)x[--d]<0&&A(e,L(a),a,r),a=a._l}else{P(e,t);do{A(e,null,n,r),n=n._r}while(null!==n)}}}function L(e){var t=e._r;return null===t?null:S(t)}function R(e){var t=e.slice(),n=[];n[0]=0;for(var r,i,o,a=0,l=0;l<e.length;++l){var u=e[l];if(-1!==u)if(e[o=n[a]]<u)t[l]=o,n[++a]=l;else{for(r=0,i=a;r<i;)e[n[o=(r+i)/2|0]]<u?r=o+1:i=o;u<e[n[r]]&&(r>0&&(t[l]=n[r-1]),n[r]=l)}}for(i=n[a];a>=0;)n[a--]=i,i=t[i];return n}function I(e,t,n){var r,i,o=e.style;if(void 0===t)for(r in n)void 0!==(i=n[r])&&o.setProperty(r,i);else if(void 0!==n)for(r in n)i=n[r],t[r]!==i&&(void 0!==i?o.setProperty(r,i):o.removeProperty(r))}function U(e,t,n,r){n!==r&&("object"==typeof r?r.s(e,t,void 0===n?void 0:n.v,r.v):("boolean"==typeof r&&(r=r?"":void 0),void 0===r?y.call(e,t):_.call(e,t,r)))}function B(e,t,n){var r;if(void 0===t)for(r in n)U(e,r,void 0,n[r]);else if(void 0!==n)for(r in n)U(e,r,t[r],n[r])}var Q,G=[];function V(e){var t,n;try{for(var r=i(G),o=r.next();!o.done;o=r.next()){var a=o.value;if(a.container===e)return a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}var z,D={},J=0,K=(z=function(){for(J|=2;2===J;)J>>=1,X(),J^=1},function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return z.apply(void 0,a(n))}catch(n){try{for(var o=i(c),l=o.next();!l.done;l=o.next())(0,l.value)(n)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}throw n}});function W(e){Q(e)}function X(){for(var e=0;e<G.length;++e){var t=G[e],n=t.container,r=t.current,i=t.next;t.next=void 0,i?(r?N(n,r,i,D,!1):(A(n,null,i,D),u&&(n.onclick=s)),t.current=i):r&&(null===i?(k(n,r),o=G,a=G.indexOf(t),l=o.length-1,c=o.pop(),a!==l&&(o[a]=c),--e):F(n,r,D,!1))}var o,a,l,c}function Y(e,t,n){var r=V(t);r?r.next=e:G.push({container:t,next:e,current:null}),W(n)}function Z(e){var t={render:e,shouldUpdate:null};return function(e){return new C(8,t,e,"",void 0)}}function $(e,t,n){return new C(102402,"div",t,void 0===e?"":e,n)}function ee(e,t,n){return new C(335874,"span",t,void 0===e?"":e,n)}function te(e,t,n){return new C(360450,"tbody",t,void 0===e?"":e,n)}function ne(e,t,n){return new C(364546,"td",t,void 0===e?"":e,n)}var re,ie=function(){function e(e,t){this.elapsed=e,this.query=t}return e.rand=function(){return new e(15*Math.random(),Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something")},e}(),oe=new ie(0,"***"),ae=function(){function e(t){this.id=e._nextId++,this.name=t,this.queries=null,this.update()}return e.prototype.update=function(){for(var e=[],t=Math.floor(10*Math.random()+1),n=0;n<t;n++)e.push(ie.rand());this.queries=e},e.prototype.getTopFiveQueries=function(){var e=this.queries.slice(0,5);for(e.sort(function(e,t){return e.elapsed-t.elapsed});e.length<5;)e.push(oe);return e},e._nextId=0,e}(),le=function(){function e(e){this.dbs=[];for(var t=0;t<e;t++)this.dbs.push(new ae("cluster"+(t+1))),this.dbs.push(new ae("cluster"+(t+1)+" slave"))}return e.prototype.update=function(){for(var e=this.dbs,t=0;t<e.length;t++)e[t]=new ae(e[t].name)},e.prototype.randomUpdate=function(e){for(var t=this.dbs,n=0;n<t.length;n++)Math.random()<e&&(t[n]=new ae(t[n].name))},e}(),ue=100,se=function(e,t,n,r){this.min=e,this.max=t,this.mean=n,this.last=r},ce=function(){function e(e){this.samples=[],this.maxSamples=e,this._i=-1}return e.prototype.addSample=function(e){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=e},e.prototype.each=function(e){for(var t=this.samples,n=0;n<t.length;n++)e(t[(this._i+1+n)%t.length],n)},e.prototype.calc=function(){var e=this.samples;if(0===e.length)return new se(0,0,0,0);for(var t=e[(this._i+1)%e.length],n=t,r=0,i=0;i<e.length;i++){var o=e[(this._i+1+i)%e.length];o<t&&(t=o),o>n&&(n=o),r+=o}var a=e[this._i],l=r/e.length;return new se(t,n,l,a)},e}(),de=[],fe=-1,ve=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=30,he=ue,me=function(){function e(e){var t=this;this._sync=function(){t.sync(),t._dirty=!1},this.name=e,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return e.prototype.invalidate=function(){var e;this._dirty||(this._dirty=!0,e=this._sync,de.push(e),-1===fe&&requestAnimationFrame(function(e){fe=-1;var t=de;de=[];for(var n=0;n<t.length;n++)t[n]()}))},e.prototype.sync=function(){throw new Error("sync method not implemented")},e}();!function(e){e[e.HideMin=1]="HideMin",e[e.HideMax=2]="HideMax",e[e.HideMean=4]="HideMean",e[e.HideLast=8]="HideLast",e[e.HideGraph=16]="HideGraph",e[e.RoundValues=32]="RoundValues"}(re||(re={}));var _e=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;o.flags=n,o.unitName=r,o.samples=i;var a=document.createElement("div");a.style.cssText="text-align: center",a.textContent=o.name;var l=document.createElement("div");return 0==(n&re.HideMin)?(o.minText=document.createElement("div"),l.appendChild(o.minText)):o.minText=null,0==(n&re.HideMax)?(o.maxText=document.createElement("div"),l.appendChild(o.maxText)):o.maxText=null,0==(n&re.HideMean)?(o.meanText=document.createElement("div"),l.appendChild(o.meanText)):o.meanText=null,0==(n&re.HideLast)?(o.lastText=document.createElement("div"),l.appendChild(o.lastText)):o.lastText=null,o.element.appendChild(a),o.element.appendChild(l),0==(n&re.HideGraph)?(o.canvas=document.createElement("canvas"),o.canvas.style.cssText="display: block; padding: 0; margin: 0",o.canvas.width=he,o.canvas.height=pe,o.ctx=o.canvas.getContext("2d"),o.element.appendChild(o.canvas)):(o.canvas=null,o.ctx=null),o}return ve(t,e),t.prototype.sync=function(){var e,t,n,r,i=this,o=this.samples.calc(),a=pe/(1.2*o.max);0==(this.flags&re.RoundValues)?(e=o.min.toFixed(2),t=o.max.toFixed(2),n=o.mean.toFixed(2),r=o.last.toFixed(2)):(e=Math.round(o.min).toString(),t=Math.round(o.max).toString(),n=Math.round(o.mean).toString(),r=Math.round(o.last).toString()),null!==this.minText&&(this.minText.textContent="min:  "+e+this.unitName),null!==this.maxText&&(this.maxText.textContent="max:  "+t+this.unitName),null!==this.meanText&&(this.meanText.textContent="mean: "+n+this.unitName),null!==this.lastText&&(this.lastText.textContent="last: "+r+this.unitName),null!==this.ctx&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,he,pe),this.ctx.fillStyle="#0f0",this.samples.each(function(e,t){i.ctx.fillRect(t,pe,1,-e*a)}))},t}(me),ye=(function(e){function t(t,n){var r=e.call(this,t)||this;return r.counter=n,r.text=document.createElement("div"),r.element.appendChild(r.text),r}ve(t,e),t.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value}}(me),null);function xe(){ye||((ye=document.createElement("div")).style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(ye))}function ge(e){void 0===e&&(e=re.HideMin|re.HideMax|re.HideMean|re.RoundValues),xe();var t=new ce(ue),n=new _e("FPS",e,"",t);ye.appendChild(n.element);var r=0,i=60;requestAnimationFrame(function e(o){r>0&&(i+=2/121*(1e3/(o-r)-i)),r=o,t.addSample(i),n.invalidate(),requestAnimationFrame(e)})}function we(e){if(void 0===e&&(e=re.HideMin|re.HideMean),xe(),void 0!==performance.memory){var t=new ce(ue),n=new _e("Memory",e,"MB",t);ye.appendChild(n.element),function e(){t.addSample(Math.round(performance.memory.usedJSHeapSize/1048576)),n.invalidate(),setTimeout(e,30)}()}}var be=function(e,t,n){this.data=new ce(ue),this.widget=new _e(e,n,t,this.data),this.startTime=-1},Te={};function Me(e,t){void 0===t&&(t=0),xe();var n=Te[e];void 0===n&&(Te[e]=n=new be(e,"ms",t),ye.appendChild(n.widget.element))}function Ce(e){var t=performance.now(),n=Te[e];void 0!==n&&-1!==n.startTime&&(n.data.addSample(t-n.startTime),n.widget.invalidate())}var Ee=.5,Se=50,ke=function(e){if(0===e.length)return{};for(var t={},n=0;n<e.length;++n){var r=e[n].split("=",2);1===r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}(window.location.search.substr(1).split("&"));void 0!==ke.n&&(Se=parseInt(ke.n,10)),void 0!==ke.m&&(Ee=parseFloat(ke.m));var Oe=new le(Se);function He(e){if(0===e)return"";if(e>60){var t=Math.floor(e/60),n=(e%60).toFixed(2).split(".");return t+":"+n[0]+"."+n[1]}return e.toFixed(2)}function Fe(e){return e>=20?"label label-important":e>=10?"label label-warning":"label label-success"}var Pe,je=Z(function(e){return $("popover left").c($("popover-content").c(e),$("arrow"))}),Ae=(Pe={select:function(e,t){var n=Oe.dbs[t];return e&&e.db===n?e:{db:n}},render:function(e){var t=e.db,n=t.getTopFiveQueries(),r=t.queries.length;return new C(397314,"tr",void 0,"",void 0).c(ne("dbname").c(t.name),ne("query-count").c(ee(Fe(r)).c(r)),l(n,function(e,t){return ne((n=e.elapsed,n>0?n>=10?"Query elapsed warn_long":n>=1?"Query elapsed warn":"Query elapsed short":"")).k(t).c(He(e.elapsed),je(e.query));var n}))}},function(e){return new C(512,Pe,e,"",void 0)}),Ne=Z(function(e){return(t="table table-striped latest-data",new C(356354,"table",void 0,t,void 0)).c(te().c(l(e.dbs,function(e,t){return Ae(t).k(e.id)})));var t});Q=K,document.addEventListener("DOMContentLoaded",function(){ge(),we(),Me("view update");var e=document.createElement("div");e.style.display="flex";var t=document.createElement("input");t.type="range",t.style.marginBottom="10px",t.style.marginTop="5px";var n=document.createElement("label");n.textContent="mutations : "+(100*Ee).toFixed(0)+"%",t.addEventListener("change",function(e){Ee=Number.parseFloat(e.target.value)/100,n.textContent="mutations : "+(100*Ee).toFixed(0)+"%"}),e.appendChild(n),e.appendChild(t),document.body.insertBefore(e,document.body.firstChild);var r=document.getElementById("app");Y(Ne(Oe),r),setTimeout(function e(){var t;Oe.randomUpdate(Ee),void 0!==(t=Te["view update"])&&(t.startTime=performance.now()),W(),Ce("view update"),setTimeout(e,0)},0)})}]);