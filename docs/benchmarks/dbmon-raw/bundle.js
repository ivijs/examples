!function(t){var e={};function n(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)n.d(o,l,function(e){return t[e]}.bind(null,l));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);const o=Node.prototype,l=Element.prototype,i=Object.prototype.hasOwnProperty,a=o.insertBefore,r=o.removeChild,s=(o.replaceChild,o.cloneNode),c=l.setAttribute,u=(l.setAttributeNS,l.removeAttribute),d=void 0,f=(t,e)=>({flags:t,descriptor:e}),p=(f(16,null),f(128,null),f(32,null),f(1032,null)),h=(t,e)=>({type:t,data:e}),m=(t,e)=>({k:t,v:e}),v=t=>h(p,t);function y(t){requestAnimationFrame(t)}function g(t,e){const n=t.length-1,o=t.pop();e!==n&&(t[e]=o)}function x(t,e){const n=t.indexOf(e);g(t,n)}function b(t){for(let e=0;e<t.length;++e)!0===t[e]()&&g(t,e--)}const w=()=>{},M=[];function T(t){return function(){try{return t.apply(void 0,arguments)}catch(e){throw M.forEach(t=>{t(e)}),e}}}(()=>{let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});window.addEventListener("test",null,n)}catch(e){}})(),KeyboardEvent.prototype.hasOwnProperty("key"),MouseEvent.prototype.hasOwnProperty("buttons"),window,window,window;const C="GestureEvent"in window,_="http://www.w3.org/2000/svg",E=t=>({op:t,flags:0,children:null,state:null});function O(t){if(0===(3&t.flags)){const e=t.children;return null===e?null:O(e)}return t.state}let S,j,H,k,P={};function F(t){const e=P;return P=t,e}function N(t){P=t}function A(){return P}let q=!1,L=!1;function R(){const t=H;return H=0,t}function B(t,e){const n=e|H;return H|=t,n}function V(t,e){const{flags:n,children:o}=e;let l,i,r;if(0!==(4&n)){const r=e.state;i=R(),0!==(256&n)&&(0!==(2048&n)||null!==r.dirtyCheck&&!0===r.dirtyCheck(A()))?e.children=W(t,o,r.update(e.op.data)):0!==(16384&n)?V(t,o):null!==(l=O(e))&&(!0===q&&(q=!1,a.call(t,l,S)),S=l),e.flags=14335&e.flags|H,H|=i|(12288&e.flags)<<2}else if(0!==(16384&n)){if(i=R(),0!==(3&n)){if(l=e.state,!0===q&&(q=!1,a.call(t,l,S)),null!==o)if(0!==(1024&n))for(r=0;r<o.length;r++){const t=o[r];null!==t&&V(l,t)}else L=!0,V(l,o),L=!1;S=l}else if(0!==(8&n))for(r=o.length;--r>=0;)V(t,o[r]);else if(0!==(144&n))V(t,e.children);else{!0===k&&(e.state=Object.assign({},A(),e.op.data.data));const n=F(e.state);V(t,e.children),N(n)}e.flags=B(i,e.flags)}else null!==(l=O(e))&&(!0===q&&(q=!1,a.call(t,l,S)),S=l)}function G(t){const e=t.flags;let n;if(0!==(32768&e)){const o=t.children;if(null!==o)if(0!==(1024&e))for(n=0;n<o.length;n++){const t=o[n];"object"===typeof t&&null!==t&&G(t)}else G(o)}if(0!==(8192&e)){const e=t.state.unmount;if(null!==e)if("function"===typeof e)e();else for(n=0;n<e.length;n++)e[n](!0)}}function I(t,e){let n;0!==(8&e.flags)?Q(t,e.children):(null!==(n=O(e))&&r.call(t,n),G(e))}function Q(t,e){let n=0;if(!0===L)for(t.textContent="";n<e.length;)G(e[n++]);else for(;n<e.length;)I(t,e[n++])}function U(t,e,n){const o=document.createTextNode(n);a.call(t,o,S),S=o,e.state=o,e.flags=1}function z(t,e){const n=e.type,o=0!==(512&n.flags);if(void 0===t){const e=n.descriptor;t=o?document.createElementNS(_,e):document.createElement(e)}const{className:l,attrs:i}=e.data;return l&&(o?c.call(t,"class",l):t.className=l),void 0!==i&&et(t,void 0,i),t}function D(t,e,n){const o=n.type,l=n.data,i=o.flags;let r;if(0!==(4&i)){let o;r=R();const a=(o=0!==(256&i)?(e.state={update:null,dirtyCheck:null,unmount:null}).update=n.type.descriptor.c(e):n.type.descriptor.c)(l);e.children=K(t,a),e.flags=14335&e.flags|i|H,H|=r|(12288&e.flags)<<2}else{if(r=R(),0!==(2&i)){let r;const c=o.descriptor;0!==(64&i)&&(null===(r=c.node)&&(c.node=r=z(void 0,c.proto)),r=s.call(r,!1)),r=z(r,n);let u=null;const d=l.children,f=S;S=null,null!==d&&(d instanceof Array?(e.flags|=1024,J(r,d,u=[])):u=K(r,d)),a.call(t,r,f),e.children=u,e.state=r,S=r}else if(0!==(176&i))if(0!==(32&i)){const n=F(e.state=Object.assign({},A(),l.data));e.children=K(t,l.child),N(n)}else 0!==(128&i)&&(l.data.v=e),e.children=K(t,l.child);else{let n=l.length;const o=Array(n);for(e.children=o;--n>=0;)o[n]=K(t,l[n].v)}e.flags=B(r,e.flags|i)}}function J(t,e,n){let o=e.length;for(;--o>=0;){const l=e[o];l instanceof Array?J(t,l,n):n.push(K(t,l))}}function K(t,e){if(null!==e){const n=E(e);return"object"===typeof e?D(t,n,e):U(t,n,e),n}return null}function W(t,e,n){if(null===n)return null!==e&&I(t,e),null;if(null===e)return K(t,n);const o=e.op;if(o===n)return V(t,e),e;if(typeof o!==typeof n||"object"===typeof o&&o.type!==n.type)return I(t,e),K(t,n);e.op=n;const l=e.flags,i=e.state;let r;if(0!==(1&l))i.nodeValue=n;else{const s=e.children,u=o.data,d=n.data;if(0!==(4&l)){const o=n.type.descriptor;if(0!==(2048&l)||u!==d&&(void 0===o.shouldUpdate||!0===o.shouldUpdate(u,d))){r=R();const n=0!==(256&l)?e.state.update(d):o.c(d);e.children=W(t,s,n),e.flags=14335&e.flags|H,H|=r|(12288&e.flags)<<2}else V(t,e)}else{if(r=R(),0!==(2&l)){!0===q&&(q=!1,a.call(t,i,S));let n=d.className;u.className!==n&&(void 0===n&&(n=""),0!==(512&l)?c.call(i,"class",n):i.className=n),u.attrs!==d.attrs&&et(i,u.attrs,d.attrs);const o=d.children;u.children!==o&&(S=null,0!==(1024&l)?(j=0,X(i,s,o)):(L=!0,e.children=null===s?K(i,o):W(i,s,o),L=!1)),S=i}else if(0!==(8&l))Y(t,e,u,d);else if(0!==(144&l))e.children=W(t,s,d.child);else{const n=k;u.data===d.data&&!0!==k||(e.state=Object.assign({},A(),d.data),k=!0);const o=F(e.state);W(t,s,d.child),N(o),k=n}e.flags=B(r,e.flags)}}return e}function X(t,e,n){let o=n.length;for(;--o>=0;){let l=j;const i=n[o];if(i instanceof Array)X(t,e,i);else{const n=e[l];e[l]=null===n?K(t,i):W(t,n,i),j=++l}}}function Y(t,e,n,o){const l=e.children,i=Array(o.length);let a;if(e.children=i,0===o.length)l.length>0&&Q(t,l);else if(0===l.length)for(a=o.length;--a>=0;)i[a]=K(t,o[a].v);else{let e,r,s=n[0],c=o[0],u=n.length-1,d=o.length-1,f=n[u],p=o[d],h=0;t:for(;;){for(;f.k===p.k;){if(i[d]=W(t,l[u--],p.v),h>--d||h>u)break t;f=n[u],p=o[d]}for(;s.k===c.k;){if(++h>u||h>d)break t;s=n[h],c=o[h]}break}if(h>u)for(;d>=h;)i[d]=K(t,o[d--].v);else if(h>d){a=h;do{I(t,r=l[a++])}while(a<=u)}else{const s=u-h+1,c=d-h+1,f=l,p=Array(c);for(a=0;a<c;++a)p[a]=-1;let m=0,v=0;const y=new Map;for(e=h;e<=d;++e)y.set(o[e].k,e);for(a=h;a<=u&&v<c;++a)void 0!==(e=y.get(n[a].k))&&(m=m>e?1e6:e,++v,p[e-h]=a,i[e]=l[a],f[a]=null);if(s===n.length&&0===v)for(Q(t,l);d>=0;)i[d]=K(t,o[d--].v);else{for(a=h;a<=u;a++)null!==(r=l[a])&&I(t,r);let n;if(1e6===m){const l=Z(p);for(e=l.length-1,a=c;--a>=0;)n=o[m=h+a].v,-1===p[a]?i[m]=K(t,n):(r=i[m],e<0||a!==l[e]?q=!0:--e,i[m]=W(t,r,n),q=!1)}else for(a=c;--a>=0;)n=o[m=h+a].v,i[m]=-1===p[a]?K(t,n):W(t,i[m],n)}}for(;--h>=0;)i[h]=W(t,l[h],o[h].v)}}function Z(t){const e=t.slice(),n=[];n[0]=0;let o,l,i,a=0;for(let r=0;r<t.length;++r){const s=t[r];if(-1!==s)if(t[i=n[a]]<s)e[r]=i,n[++a]=r;else{for(o=0,l=a;o<l;)t[n[i=(o+l)/2|0]]<s?o=i+1:l=i;s<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(l=n[a];a>=0;)n[a--]=l,l=e[l];return n}function $(t,e,n){const o=t.style;let l,a;if(void 0===e)for(l in n)void 0!==(a=n[l])&&o.setProperty(l,a);else if(void 0===n)for(l in e)o.removeProperty(l);else{let t=0;for(l in e)a=void 0,!0===i.call(n,l)&&(a=n[l],t++),e[l]!==a&&(void 0!==a?o.setProperty(l,a):o.removeProperty(l));const r=Object.keys(n);for(let a=0;t<r.length&&a<r.length;++a)l=r[a],!1===i.call(e,l)&&(o.setProperty(l,n[l]),++t)}}function tt(t,e,n,o){"style"!==e?"object"===typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):n!==o&&("object"===typeof n?n.u(t,e,n.v,void 0):("boolean"===typeof o&&(o=o?"":void 0),void 0===o?u.call(t,e):c.call(t,e,o))):n!==o&&$(t,n,o)}function et(t,e,n){let o;if(void 0===e)for(o in n)tt(t,o,void 0,n[o]);else if(void 0===n)for(o in e)tt(t,o,e[o],void 0);else{let l=0;for(o in e){let a=void 0;!0===i.call(n,o)&&(a=n[o],l++),tt(t,o,e[o],a)}const a=Object.keys(n);for(let r=0;l<a.length&&r<a.length;++r)o=a[r],!1===i.call(e,o)&&(tt(t,o,void 0,n[o]),++l)}}const nt=[],ot=t=>nt.find(e=>e.container===t);function lt(){for(let t=0;t<nt.length;++t){const e=nt[t],{container:n,state:o,next:l}=e;e.next=void 0,S=null,H=0,k=!1,l?o?e.state=W(n,o,l):(e.state=K(n,l),C&&(n.onclick=w)):o&&(null===l?(I(n,o),x(nt,e),--t):V(n,o))}}function it(t){for(;t.v.length>0;){const e=t.v;let n=0;t.v=[];do{e[n++]()}while(n<e.length)}}let at=0;const rt={v:[]},st={v:[]},ct={v:[]},ut=[],dt=[];let ft=0;const pt=t=>T(function(){at|=1,t.apply(void 0,arguments),it(rt),at&=-4}),ht=pt(w),mt=t=>pt(e=>{at|=16,t(e),0!==(4&at)&&(ft=void 0===e?performance.now():e,b(ut),0!==(32&at)&&lt(),it(st),b(dt),it(ct)),at&=-61}),vt=mt(w);function yt(t){var e,n;void 0!==t&&0!==(1&t)&&0===(8&at)?0===(16&(at|=12))&&(e=vt,rt.v.push(e),0===(3&at)&&(at|=2,n=ht,Promise.resolve().then(n))):0===(4&at)&&0===(16&(at|=4))&&y(vt)}function gt(t){at|=32,yt(t)}function xt(t,e,n){const o=ot(e);o?o.next=t:nt.push({container:e,next:t,state:null}),gt(n)}function bt(t,e){const n=f(!0===e?514:2,t);return(t,e,o=null)=>h(n,{className:t,attrs:e,children:o})}const wt=t=>bt(t,!1),Mt=wt("div"),Tt=wt("span"),Ct=wt("table"),_t=wt("tbody"),Et=wt("td"),Ot=wt("tr");var St,jt,Ht=100,kt=function(t,e,n,o){this.min=t,this.max=e,this.mean=n,this.last=o},Pt=function(){function t(t){this.samples=[],this.maxSamples=t,this._i=-1}return t.prototype.addSample=function(t){this._i=(this._i+1)%this.maxSamples,this.samples[this._i]=t},t.prototype.each=function(t){for(var e=this.samples,n=0;n<e.length;n++)t(e[(this._i+1+n)%e.length],n)},t.prototype.calc=function(){var t=this.samples;if(0===t.length)return new kt(0,0,0,0);for(var e=t[(this._i+1)%t.length],n=e,o=0,l=0;l<t.length;l++){var i=t[(this._i+1+l)%t.length];i<e&&(e=i),i>n&&(n=i),o+=i}var a=t[this._i],r=o/t.length;return new kt(e,n,r,a)},t}(),Ft=[],Nt=-1,At=(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}St(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qt=30,Lt=Ht,Rt=function(){function t(t){var e=this;this._sync=function(){e.sync(),e._dirty=!1},this.name=t,this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this._dirty=!1,this.invalidate()}return t.prototype.invalidate=function(){var t;this._dirty||(this._dirty=!0,t=this._sync,Ft.push(t),-1===Nt&&requestAnimationFrame(function(t){Nt=-1;var e=Ft;Ft=[];for(var n=0;n<e.length;n++)e[n]()}))},t.prototype.sync=function(){throw new Error("sync method not implemented")},t}();!function(t){t[t.HideMin=1]="HideMin",t[t.HideMax=2]="HideMax",t[t.HideMean=4]="HideMean",t[t.HideLast=8]="HideLast",t[t.HideGraph=16]="HideGraph",t[t.RoundValues=32]="RoundValues"}(jt||(jt={}));var Bt=function(t){function e(e,n,o,l){var i=t.call(this,e)||this;i.flags=n,i.unitName=o,i.samples=l;var a=document.createElement("div");a.style.cssText="text-align: center",a.textContent=i.name;var r=document.createElement("div");return 0===(n&jt.HideMin)?(i.minText=document.createElement("div"),r.appendChild(i.minText)):i.minText=null,0===(n&jt.HideMax)?(i.maxText=document.createElement("div"),r.appendChild(i.maxText)):i.maxText=null,0===(n&jt.HideMean)?(i.meanText=document.createElement("div"),r.appendChild(i.meanText)):i.meanText=null,0===(n&jt.HideLast)?(i.lastText=document.createElement("div"),r.appendChild(i.lastText)):i.lastText=null,i.element.appendChild(a),i.element.appendChild(r),0===(n&jt.HideGraph)?(i.canvas=document.createElement("canvas"),i.canvas.style.cssText="display: block; padding: 0; margin: 0",i.canvas.width=Lt,i.canvas.height=qt,i.ctx=i.canvas.getContext("2d"),i.element.appendChild(i.canvas)):(i.canvas=null,i.ctx=null),i}return At(e,t),e.prototype.sync=function(){var t,e,n,o,l=this,i=this.samples.calc(),a=qt/(1.2*i.max);0===(this.flags&jt.RoundValues)?(t=i.min.toFixed(2),e=i.max.toFixed(2),n=i.mean.toFixed(2),o=i.last.toFixed(2)):(t=Math.round(i.min).toString(),e=Math.round(i.max).toString(),n=Math.round(i.mean).toString(),o=Math.round(i.last).toString()),null!==this.minText&&(this.minText.textContent="min:  "+t+this.unitName),null!==this.maxText&&(this.maxText.textContent="max:  "+e+this.unitName),null!==this.meanText&&(this.meanText.textContent="mean: "+n+this.unitName),null!==this.lastText&&(this.lastText.textContent="last: "+o+this.unitName),null!==this.ctx&&(this.ctx.fillStyle="#010",this.ctx.fillRect(0,0,Lt,qt),this.ctx.fillStyle="#0f0",this.samples.each(function(t,e){l.ctx.fillRect(e,qt,1,-t*a)}))},e}(Rt),Vt=(function(t){function e(e,n){var o=t.call(this,e)||this;return o.counter=n,o.text=document.createElement("div"),o.element.appendChild(o.text),o}At(e,t),e.prototype.sync=function(){this.text.textContent=this.name+": "+this.counter.value}}(Rt),null);function Gt(){Vt||((Vt=document.createElement("div")).style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(Vt))}function It(t){void 0===t&&(t=jt.HideMin|jt.HideMax|jt.HideMean|jt.RoundValues),Gt();var e=new Pt(Ht),n=new Bt("FPS",t,"",e);Vt.appendChild(n.element);var o=0,l=60;requestAnimationFrame(function t(i){o>0&&(l+=2/121*(1e3/(i-o)-l)),o=i,e.addSample(l),n.invalidate(),requestAnimationFrame(t)})}function Qt(t){if(void 0===t&&(t=jt.HideMin|jt.HideMean),Gt(),void 0!==performance.memory){var e=new Pt(Ht),n=new Bt("Memory",t,"MB",e);Vt.appendChild(n.element),function t(){e.addSample(Math.round(performance.memory.usedJSHeapSize/1048576)),n.invalidate(),setTimeout(t,30)}()}}var Ut=function(t,e,n){this.data=new Pt(Ht),this.widget=new Bt(t,n,e,this.data),this.startTime=-1},zt={};function Dt(t,e){void 0===e&&(e=0),Gt();var n=zt[t];void 0===n&&(zt[t]=n=new Ut(t,"ms",e),Vt.appendChild(n.widget.element))}function Jt(t){var e=performance.now(),n=zt[t];void 0!==n&&-1!==n.startTime&&(n.data.addSample(e-n.startTime),n.widget.invalidate())}function Kt(t){return t>0?t>=10?"Query elapsed warn_long":t>=1?"Query elapsed warn":"Query elapsed short":""}function Wt(t){return t>=20?"label label-important":t>=10?"label label-warning":"label label-success"}let Xt=.5,Yt=50;function Zt(t){if(0===t.length)return{};const e={};for(let n=0;n<t.length;++n){const o=t[n].split("=",2);1===o.length?e[o[0]]="":e[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return e}function $t(){let t;return{elapsed:15*Math.random(),query:t=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something"}}function te(){const t=[],e=Math.floor(10*Math.random()+1);for(let n=0;n<e;n++)t.push($t());return t}const ee={elapsed:0,query:"***"};let ne=0;function oe(t,e){return void 0===e&&(e=ne++),{id:e,name:t,queries:te()}}function le(t){const e=t.queries.slice(0,5);for(e.sort((t,e)=>t.elapsed-e.elapsed);e.length<5;)e.push(ee);return e}function ie(t,e){for(let n=0;n<t.length;n++)if(Math.random()<e){const{id:e,name:o}=t[n];t[n]=oe(o,e)}}function ae(t){if(0===t)return"";if(t>60){const e=Math.floor(t/60),n=(t%60).toFixed(2).split(".");return e+":"+n[0]+"."+n[1]}return t.toFixed(2)}const re=Mt("arrow"),se=t=>Mt("popover left",d,[Mt("popover-content",d,t),re]),ce=({elapsed:t,query:e})=>Et(Kt(t),d,[ae(t),se(e)]);function ue(t){const e=le(t),n=t.queries.length;return Ot(d,d,[Et("dbname",d,t.name),Et("query-count",d,Tt(Wt(n),d,n)),ce(e[0]),ce(e[1]),ce(e[2]),ce(e[3]),ce(e[4])])}const de=t=>Ct("table table-striped latest-data",d,_t(d,d,v(t.map(t=>m(t.id,ue(t))))));!function(){const t=Zt(window.location.search.substr(1).split("&"));void 0!==t.n&&(Yt=parseInt(t.n,10)),void 0!==t.m&&(Xt=parseFloat(t.m)),document.addEventListener("DOMContentLoaded",()=>{It(),Qt(),Dt("view update");const t=document.createElement("div");t.style.display="flex";const e=document.createElement("input");e.type="range",e.style.marginBottom="10px",e.style.marginTop="5px";const n=document.createElement("label");n.textContent="mutations : "+(100*Xt).toFixed(0)+"%",e.addEventListener("change",t=>{Xt=Number.parseFloat(t.target.value)/100,n.textContent="mutations : "+(100*Xt).toFixed(0)+"%"}),t.appendChild(n),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild)})}();const fe=function(t){const e=[];for(let n=0;n<t;n++)e.push(oe("cluster"+(n+1))),e.push(oe("cluster"+(n+1)+" slave"));return e}(Yt),pe=document.getElementById("app");mt(()=>{xt(de(fe),pe)})(),function t(){var e;ie(fe,Xt),void 0!==(e=zt["view update"])&&(e.startTime=performance.now()),mt(()=>{xt(de(fe),pe)})(),Jt("view update"),requestAnimationFrame(t)}()}]);