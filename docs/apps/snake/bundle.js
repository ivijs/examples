!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);class o{constructor(t,e,n,o,i){this._f=t,this._l=this,this._r=null,this._c=null,this._t=e,this._k=0,this._p=n,this._i=null,this._s=i,this._cs=o,this._e=null}k(t){return this._f|=64,this._k=t,this}e(t){return null!==t&&(this._f|=256,this._e=t),this}t(t){return this._f|=-2147483616,this._c=t,this}c(){const t=arguments;let e=null,n=null;for(let i=0,r=0;i<t.length;++i,++r){let l=t[i];if(null!==l){"object"!==typeof l&&(l=new o(1,null,l,"",void 0));const t=l._l,i=l._f;if(t===l)0===(64&i)&&(l._k=r);else if(0===(128&i)){let t=l;do{0===(64&t._f)&&(t._k=r),++r,t=t._r}while(null!==t);--r}null!==n?(l._l=n,n._r=l):e=l,n=t}}return null!==e&&(e._l=n,this._f|=16,this._c=e),this}}function i(t){return 0!==(1032&t._f)?i(t._c):t._i}function r(t,e){const n=t.length-1,o=t.pop();e!==n&&(t[e]=o)}const l=[];function s(t){return(...e)=>{try{return t(...e)}catch(n){for(const t of l)t(n);throw n}}}const c=[];function f(t){for(const e of c)if(e.container===t)return e}function u(t,e,n){for(const{container:o,current:i}of c)if(o.contains(e)){a(t,n,e,o,i);break}}function a(t,e,n,o,i){const r=n.parentNode;if(r!==o){if(null!==(i=a(t,e,r,o,i))&&0!==(1048&i._f)){let o=i._c;for(;null!==o;){const i=d(t,e,n,o);if(i)return i;o=o._r}}return null}return d(t,e,n,i)}function d(t,e,n,o){const i=o._f;let r;if(2&i){if(o._i===n)return h(t,o,e),o}else if(1032&i&&(r=d(t,e,n,o._c)))return h(t,o,e),r;return null}function h(t,e,n){const o=e._e;if(o){let i;if(o instanceof Array){let t=0;for(const e of o)null!==e&&!0===n(e)&&(0===t?i=e:1===t?i=[i,e]:i.push(e),++t)}else!0===n(o)&&(i=o);void 0!==i&&t.push({target:e,handlers:i})}}function _(t,e,n,o){let i=t.length;for(;--i>=0;)if(p(t[i],e,1,o),2&e.flags)return;if(n)for(;++i<t.length;)if(p(t[i],e,2,o),2&e.flags)return}function p(t,e,n,o){const i=t.handlers;let r=0;if(i instanceof Array)for(const l of i)l.flags&n&&(r|=g(l,o,e));else i.flags&n&&(r=g(i,o,e));e.flags|=r}function g(t,e,n){const o=void 0===e?t.handler(n):e(t,n);return void 0===o?0:o}class v{constructor(t,e){this.flags=t,this.timestamp=e}}class y extends v{constructor(t,e,n,o){super(t,n),this.target=e,this.native=o}}function m(t,e,n){const o={src:{add(){++o.listeners,w(o)},remove(){--o.listeners,b(o)}},deps:0,listeners:0,flags:t,options:void 0===n||n,name:e,before:null,after:null,dispatch:null},i=t=>t.src===o.src;return o.dispatch=s(t=>{const e=t.target,n=[];if(o.listeners&&u(n,e,i),n.length||o.before||o.after){const i=new y(0,e,t.timeStamp,t);k(o.before,i),n.length&&_(n,i,0!==(4&o.flags)),k(o.after,i),1&i.flags&&t.preventDefault()}}),o}function w(t){0===t.deps++&&document.addEventListener(t.name,t.dispatch,t.options)}function b(t){0===--t.deps&&document.removeEventListener(t.name,t.dispatch,t.options)}function k(t,e){if(t){const n=t.slice();for(const t of n)t(e)}}(()=>{let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});window.addEventListener("test",null,n)}catch(e){}})(),KeyboardEvent.prototype.hasOwnProperty("key"),MouseEvent.prototype.hasOwnProperty("buttons"),window,window,window;const x="GestureEvent"in window,O=m(5,"keydown");function A(t,e,n){return{src:t,flags:!0===n?1:2,handler:e,listeners:0,props:null,state:null}}function j(t,e=!1){return A(O.src,t,e)}function N(t,e){let n=null,o=null;for(let i=0;i<t.length;++i){const r=e(t[i],i);null!==r&&(null!==o?(r._l=o,o._r=r):n=r,o=r)}return null!==n?(n._l=o,n._f|=128,n):null}function P(){}const D=Node.prototype,E=Element.prototype,S=(Object.prototype.hasOwnProperty,D.insertBefore),T=D.removeChild,C=D.replaceChild,I=D.cloneNode,M=E.setAttribute,F=(E.setAttributeNS,E.removeAttribute),B="http://www.w3.org/2000/svg";function G(t,e){let n,o,i;if(null===t)L(e);else if(null===e)R(t);else if(t instanceof Array)if(e instanceof Array){for(n=0;n<t.length&&n<e.length;)(o=t[n])!==(i=e[n++])&&(null!==i&&U(i),null!==o&&$(o));for(;n<e.length;)null!==(o=e[n++])&&U(o);for(;n<t.length;)null!==(o=t[n++])&&$(o)}else for(U(e),n=0;n<t.length;++n)null!==(o=t[n])&&$(o);else L(e),$(t)}function L(t){if(t instanceof Array)for(let e=0;e<t.length;++e){const n=t[e];null!==n&&U(n)}else U(t)}function R(t){if(t instanceof Array)for(let e=0;e<t.length;++e){const n=t[e];null!==n&&$(n)}else $(t)}function U(t){t.src.add(t)}function $(t){t.src.remove(t)}let q,H={};function K(t){const e=H;return H=t,e}function V(t){H=t}function z(){return H}function J(t,e){T.call(t,i(e)),Q(e)}function Q(t){const e=t._f;if(0!==(1048&e)){let n=t._c;for(;null!==n;)Q(n),n=n._r;if(0!==(8&e)){const e=t._i.detached;if(null!==e)if("function"===typeof e)e();else for(let t=0;t<e.length;t++)e[t]()}}0!==(256&e)&&R(t._e)}function W(t,e,n){const o=e._f;if((-2147482600&o)>0){const i=e._i;let r=e._c;if(0!==(16&o))for(;null!==r;)W(i,r,n),r=r._r;else if(0!==(8&o)){const o=i.select;!0===i.dirty||null!==o&&!0===o(z())?tt(t,r,e._c=i.update(e._p),n):W(t,r,n)}else{!0===n&&(e._i=Object.assign({},z(),e._p));const o=K(e._i);W(t,r,n),V(o)}}}function X(t,e){t.textContent="";do{Q(e),e=e._r}while(null!==e)}function Y(t,e){const n=e._f,o=e._p;let i,r=null;if(0!==(1&n))r=i=document.createTextNode(o);else{const l=e._t;if(0!==(256&n)&&L(e._e),0!==(2&n)){const s=0!==(512&n);0===(4&n)?i=s?document.createElementNS(B,l):document.createElement(l):(null===l._i&&Y(t,l),i=I.call(l._i,!0)),r=i;const c=e._cs;if(c&&(!0===s?M.call(i,"class",c):i.className=c),void 0!==o&&lt(i,void 0,o),void 0!==e._s&&it(i,void 0,e._s),0!==(16&n)){let t=e._c;for(;null!==t;)Z(i,null,t),t=t._r}else 0!==(32&n)&&""!==e._c&&(i.textContent=e._c)}else if(0!==(8&n)){r={dirty:!1,update:null,select:null,detached:null};const n=l.c(r);r.update=n,i=Y(t,e._c=n(o))}else{const n=K(r=Object.assign({},z(),o));i=Y(t,e._c),V(n)}}return e._i=r,i}function Z(t,e,n){S.call(t,Y(t,n),e)}function tt(t,e,n,o){if(e===n)return void W(t,n,o);let r;const l=e._f,s=n._f;if(0!==(523887&(l^s))||0!==(12&l)&&e._t!==n._t||e._k!==n._k)C.call(t,Y(t,n),i(e)),Q(e);else{const i=e._p,c=n._p;if(n._i=r=e._i,0!==(1&s))i!==c&&(r.data=c);else{const f=e._c;let u=n._c;if(e._e!==n._e&&G(e._e,n._e),0!==(2&s)){let t=n._cs;if(e._cs!==t&&(void 0===t&&(t=""),0!==(512&s)?M.call(r,"class",t):r.className=t),i!==c&&lt(r,i,c),e._s!==n._s&&it(r,e._s,n._s),f!==u)if(0===(32&l))if(null===f)do{Z(r,null,u),u=u._r}while(null!==u);else null===u?X(r,f):et(r,f,u,o);else{const t=r.firstChild;null!==t?t.nodeValue=u:r.textContent=u}}else if(0!==(8&s)){const e=n._t;!0===r.dirty||i!==c&&(void 0===e.shouldUpdate||!0===e.shouldUpdate(i,c))?(tt(t,f,n._c=r.update(c),o),r.dirty=!1):(n._c=f,W(t,n,o))}else{i===c&&!0!==o||(r=Object.assign({},z(),c),o=!0),n._i=r;const e=K(r);tt(t,f,u,o),V(e)}}}}function et(t,e,n,o){let r=e._l,l=n._l,s=0,c=0;t:for(;;){for(;e._k===n._k&&0===(64&(e._f^n._f));){if(tt(t,e,n,o),c++,e===r?s=1:e=e._r,n===l){s|=2;break t}if(n=n._r,s)break t}for(;r._k===l._k&&0===(64&(r._f^l._f));){if(tt(t,r,l,o),c++,e===r?s=1:r=r._l,n===l){s|=2;break t}if(l=l._l,s)break t}break}if(s){if(s<3)if(s<2){const e=nt(l);for(;Z(t,e,n),n!==l;)n=n._r}else for(;J(t,e),e!==r;)e=e._r}else{let f=0,u=0,a=0;const d=[];let h,_,p,g=n;for(;p=g._k,64&g._f?(void 0===h&&(h=new Map),h.set(p,u)):(void 0===_&&(_=new Map),_.set(p,u)),d[u++]=g,g!==l;)g=g._r;const v=new Array(u).fill(-1);let y=0;for(g=e;p=g._k,void 0===(s=0!==(64&g._f)?void 0===h?void 0:h.get(p):void 0===_?void 0:_.get(p))?g._k=null:(a=a>s?1e9:s,v[s]=f,tt(t,g,d[s],o),y++),f++,g!==r;)g=g._r;if(c||y){for(s=f-y;s>0;)null===e._k&&(J(t,e),s--),e=e._r;if(1e9===a){const e=ot(v);for(s=e.length-1;u>0;)v[--u]<0?Z(t,nt(l),l):s<0||u!==e[s]?S.call(t,i(l),nt(l)):s--,l=l._l}else if(y!==u)for(;u>0;)v[--u]<0&&Z(t,nt(l),l),l=l._l}else{X(t,e);do{Z(t,null,n),n=n._r}while(null!==n)}}}function nt(t){const e=t._r;return null===e?null:i(e)}function ot(t){const e=t.slice(),n=[];n[0]=0;let o,i,r,l=0;for(let s=0;s<t.length;++s){const c=t[s];if(-1!==c)if(t[r=n[l]]<c)e[s]=r,n[++l]=s;else{for(o=0,i=l;o<i;)t[n[r=(o+i)/2|0]]<c?o=r+1:i=r;c<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}for(i=n[l];l>=0;)n[l--]=i,i=e[i];return n}function it(t,e,n){const o=t.style;let i,r;if(void 0===e)for(i in n)void 0!==(r=n[i])&&o.setProperty(i,r);else if(void 0!==n)for(i in n)r=n[i],e[i]!==r&&(void 0!==r?o.setProperty(i,r):o.removeProperty(i))}function rt(t,e,n,o){n!==o&&("object"===typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):("boolean"===typeof o&&(o=o?"":void 0),void 0===o?F.call(t,e):M.call(t,e,o)))}function lt(t,e,n){let o;if(void 0===e)for(o in n)rt(t,o,void 0,n[o]);else if(void 0!==n)for(o in n)rt(t,o,e[o],n[o])}let st=0;function ct(t){q(t)}s(()=>{for(st|=2;2===st;)st>>=1,ut(),st^=1});const ft=[];function ut(){for(let e=0;e<c.length;++e){const t=c[e],{container:n,current:o,next:i}=t;t.next=void 0,i?(o?tt(n,o,i,!1):(Z(n,null,i),x&&(n.onclick=P)),t.current=i):o&&(null===i?(J(n,o),r(c,c.indexOf(t)),--e):W(n,o,!1))}const t=ft;if(t.length>0){for(let e=0;e<t.length;e++)t[e]();ft.length=0}}function at(t,e,n){const o=f(e);o?o.next=t:c.push({container:e,next:t,current:null}),ct(n)}function dt(t){for(let e=0;e<t.length;++e)!0===t[e]()&&r(t,e--)}const ht={v:void 0,u:P};function _t(t){const e=t.a;t.a=[];for(const n of e)n()}let pt=0;const gt={a:[]},vt=[],yt=[];let mt={f:0,w:{a:[]},r:{a:[]}},wt={f:0,w:{a:[]},r:{a:[]}},bt=0,kt=null;const xt=s(()=>{for(;gt.a.length>0;)_t(gt);pt^=1});function Ot(){4&pt&&requestAnimationFrame(At)}const At=s(t=>{pt^=12,bt=t;const e=wt;wt=mt,mt=e,dt(vt);do{for(;4&e.f;)e.f^=4,_t(e.r);for(;3&e.f;)2&e.f&&(e.f^=2,_t(e.w)),1&e.f&&(e.f^=1,ut())}while(7&e.f);pt^=8,dt(yt),null!==kt&&(kt.focus(),kt=null)});function jt(t,e,n,o){var i;void 0===n&&o&&(i=t)instanceof Element&&(kt=i)}const Nt={v:!1,u:jt},Pt={v:!0,u:jt};function Dt(t){return void 0===t?ht:t?Pt:Nt}const Et=(t,e,n)=>new o(47106,"div",e,t,n),St={x:-1,y:0},Tt={x:1,y:0},Ct={x:0,y:-1},It={x:0,y:1};class Mt{constructor(t={x:0,y:0}){this.body=[],this.grow=4,this.body.push(t)}get head(){return this.body[this.body.length-1]}move(t){if(this.body.push(t),this.grow)return this.grow--,null;{const t=this.body[0];return this.body=this.body.splice(1),t}}}class Ft{constructor(t=20,e=20){this.rows=t,this.cols=e,this.cells=new Array(t*e).fill(0)}pointToIndex(t){return this.cols*t.y+t.x}mark(t,e){this.cells[this.pointToIndex(t)]|=e}unmark(t,e){this.cells[this.pointToIndex(t)]&=~e}createRandomFood(){let t=0;do{t=Math.random()*this.cells.length|0}while(0!==this.cells[t]);this.cells[t]|=4}isBodyAt(t){return!!(1&this.cells[this.pointToIndex(t)])}isHeadAt(t){return!!(2&this.cells[this.pointToIndex(t)])}isFoodAt(t){return!!(4&this.cells[this.pointToIndex(t)])}}function Bt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Gt(t,e){return(t%e+e)%e}function Lt(t){return 1&t?2&t?"Cell body head":"Cell body":4&t?"Cell food":"Cell"}const Rt=function(t,e){const n={c:()=>{let t;const e=j(e=>{switch(e.native.keyCode){case 37:return t.setNewDirection(St),1;case 38:return t.setNewDirection(Ct),1;case 39:return t.setNewDirection(Tt),1;case 40:return t.setNewDirection(It),1}});return n=>(t=n.value,Et(t.gameOver?"SnakeGame gameOver":"SnakeGame").c(Et("Grid",{tabIndex:0,autofocus:Dt(!0)},{width:`${30*t.grid.cols}px`,height:`${30*t.grid.rows}px`}).e(e).c(N(t.grid.cells,(t,e)=>Et(Lt(t)).k(e)))))},shouldUpdate:void 0};return t=>new o(8,n,t,"",void 0)}(),Ut=document.getElementById("app"),$t=new class{constructor(){this.gameOver=!1,this.startTime=0,this.currentTime=0,this.direction={x:1,y:0},this.grid=new Ft,this.snake=new Mt,this.newDirection=null,this.snake.body.forEach(t=>{this.grid.mark(t,1)}),this.grid.mark(this.snake.head,2),this.grid.createRandomFood()}setNewDirection(t){this.newDirection=t}updateState(){if(!this.gameOver){this.newDirection&&(e={x:0,y:0},((t=Bt(this.direction,this.newDirection)).x!==e.x||t.y!==e.y)&&(this.direction=this.newDirection),this.newDirection=null);let n=Bt(this.snake.head,this.direction);n={x:Gt(n.x,this.grid.cols),y:Gt(n.y,this.grid.rows)},this.grid.unmark(this.snake.head,2);const o=this.snake.move(n);o&&this.grid.unmark(o,1),this.grid.mark(n,2),this.grid.isBodyAt(n)?this.gameOver=!0:this.grid.isFoodAt(n)&&(this.snake.grow=3,this.grid.unmark(n,4),this.grid.createRandomFood()),this.grid.mark(n,1)}var t,e}};q=function(t){var e;8&pt?mt.f|=1:(wt.f|=1,void 0!==t&&1&t?At(performance.now()):4&pt||(e=Ot,1&(pt|=4)||(pt|=1,Promise.resolve().then(xt)),gt.a.push(e)))},function t(){$t.updateState(),at(Rt({value:$t}),Ut),setTimeout(t,100)}()}]);