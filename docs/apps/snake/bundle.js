!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}({2:function(t,e,n){n.r(e);const o=(t,e)=>({f:t,d:e}),i=o(16,null),r=(o(4128,null),o(8,null)),l=(t,e)=>({t:t,v:e}),s=(t,e,n)=>({t:t,v:e,c:n}),c=(t,e,n,o)=>({t:t,v:e,c:n,n:o}),f=(t,e)=>s(i,t,e),u=(t,e)=>({k:t,v:e}),d=t=>l(r,t);function a(t,e){const n=o(e,t);return(t,e,o=null)=>c(n,e,o,t)}const h=t=>a(t,2),v=(t,e)=>Object.getOwnPropertyDescriptor(t,e),y=Node.prototype,p=Element.prototype,g=document,m=Object.prototype.hasOwnProperty,w=y.insertBefore,b=y.removeChild,x=(y.replaceChild,y.cloneNode),k=p.setAttribute,A=(p.setAttributeNS,p.removeAttribute),O=v(y,"textContent").set,j=v(p,"className").set,D=v(HTMLElement.prototype,"style").get,P=v(SVGElement.prototype,"style").get,T={},N={},S={},E=t=>({v:t}),C=[];let I=!1;function M(t){return function(){if(!I)try{return t.apply(void 0,arguments)}catch(e){throw I=!0,C.forEach(t=>{t(e)}),e}}}let F=1;function _(){return F}function B(){F++}const G=()=>{};function R(t,e){const n=t.length-1,o=t.pop();e!==n&&(t[e]=o)}function H(t){for(let e=0;e<t.length;++e)!0===t[e]()&&R(t,e--)}let L=null;const V=t=>({t:_(),v:t});function $(){const t=L;return L=null,t}function q(t){const e=t[0];for(let n=1;n<t.length;n++){const o=t[n];if("object"!==typeof o)return o(N,e);if(o.t>e)return!0}return!1}const z="http://www.w3.org/2000/svg",J=t=>({f:0,o:t,c:null,s:null});let K,Q=null;function U(t){return Q=t}function W(t,e,n,o){const i=e.f,r=e.c;let l,s,c;if(0!==(3&i))l=e.s,!0===n&&w.call(t,l,K),null!==r&&(K=null,W(l,r,!1,!0)),K=l;else if(0!==(4&i))l=e.s,0!==(512&i)||null!==l.d&&!0===q(l.d)?(c=e.o,c=l.r(c.v,c.c),l.d=$(),e.c=rt(t,r,c,n,o)):null!==r&&W(t,r,n,o);else if(0!==(136&i))for(s=r.length;s>0;)null!==(l=r[--s])&&W(t,l,n,!1);else 0!==(16&i)?W(t,r,n,o):(l=U(e.s),W(t,r,n,o),U(l))}function X(t){const e=t.f;let n,o,i;if(null!==(n=t.c))if(0!==(136&e))for(o=0;o<n.length;o++)null!==(i=n[o])&&X(i);else X(n);if(0!==(4&e)&&null!==(i=t.s.u))if("function"===typeof i)i(S);else for(o=0;o<i.length;o++)i[o](S)}function Y(t,e,n){let o,i=e.f;if(0!==(3&i))b.call(t,e.s);else if(e=e.c,0!==(136&i))if(!0===n)O.call(t,"");else for(i=0;i<e.length;++i)null!==(o=e[i])&&Y(t,o,!1);else null!==e&&Y(t,e,n)}function Z(t,e,n){Y(t,e,n),X(e)}function tt(t,e,n){const o=g.createTextNode(n);w.call(t,o,K),K=o,e.s=o,e.f=1}function et(t,e){const{t:n,v:o,n:i}=e,r=0!==(256&n.f);if(void 0===t){const e=n.d;t=r?g.createElementNS(z,e):g.createElement(e)}return i&&ct(t,i,r),void 0!==o&&ut(t,void 0,o,r),t}function nt(t,e,n){const o=n.t,i=o.f;let r,l,s,c;if(0!==(4&i))e.s=r={r:null,d:null,u:null},r.r=l=o.d.c(e),s=l(n.v,n.c),r.d=$(),e.c=it(t,s),e.f|=i;else{if(0!==(2&i))l=o.d,0!==(64&i)&&(null===(s=l.n)&&(l.n=s=et(void 0,l.p)),s=x.call(s,!1)),e.s=s=et(s,n),r=K,null!==(l=n.c)&&(K=null,e.c=it(s,l)),K=s,w.call(t,s,r);else if(0!==(48&i))0!==(32&i)?(e.s=r=0!==(4096&i)?U(n.v):(f=o.d,u=n.v,Q={n:Q,d:f,v:V(u)}),e.c=it(t,n.c),U(r)):e.c=it(t,n.c);else for(c=(s=n.v).length,e.c=l=Array(c);c>0;)l[--c]=it(t,s[c].v);e.f=i}var f,u}function ot(t,e,n){let o=n.length;const i=Array(o);for(;o>0;)i[--o]=it(t,n[o]);e.c=i,e.f=128}function it(t,e){if(null!==e){const n=J(e);return"object"===typeof e?e instanceof Array?ot(t,n,e):nt(t,n,e):tt(t,n,e),n}return null}function rt(t,e,n,o,i){if(null===n)return null!==e&&Z(t,e,i),null;if(null===e)return it(t,n);const{f:r,o:l,s:s}=e;if(0!==(1&r)){if("object"===typeof n)return b.call(t,s),it(t,n);e.o=n,l!==n&&(s.nodeValue=n),!0===o&&w.call(t,s,K),K=s}else{if(l===n)return W(t,e,o,i),e;if(0!==(128&r)?!(n instanceof Array):n instanceof Array||l.t!==n.t)return Z(t,e,i),it(t,n);e.o=n;const u=e.c;let d,a,h,v,y,p;if(0!==(4&r))d=l.v,h=l.c,a=n.v,v=n.c,y=n.t.d,h!==v&&(void 0===y.e2||!0!==y.e2(h,v))||d!==a&&(void 0===y.e1||!0!==y.e1(d,a))?(a=s.r(a,v),s.d=$(),e.c=rt(t,u,a,o,i)):W(t,e,o,i);else if(0!==(2&r))p=0!==(256&r),l.n!==(y=n.n)&&(void 0===y&&(y=""),ct(s,y,p)),l.v!==(y=n.v)&&ut(s,l.v,y,p),!0===o&&w.call(t,s,K),K=null,e.c=rt(s,u,n.c,!1,!0),K=s;else if(0!==(136&r))if(0!==(128&r))if(0===(p=n.length))Z(t,e,i);else{if(p!==(d=u.length)){for(e.c=y=Array(p);d>p;)null!==(a=u[--d])&&Z(t,a,!1);for(;p>d;)y[--p]=it(t,n[p])}else y=u;for(;p>0;)y[--p]=rt(t,u[p],n[p],o,!1)}else lt(t,e,l.v,n.v,o,i);else 0!==(16&r)?e.c=rt(t,u,n.c,o,i):(a=n.v,0!==(4096&r)?e.s=a:(y=s.v).v!==a&&(f=a,(c=y).t=_(),c.v=f),y=U(e.s),e.c=rt(t,u,n.c,o,i),U(y))}var c,f;return e}function lt(t,e,n,o,i,r){let l=o.length,s=n.length;const c=Array(l);if(0===l)s>0&&Z(t,e,r);else if(0===s)for(;l>0;)c[--l]=it(t,o[l].v);else{const f=e.c;let u=s-1,d=l-1,a=0,h=o[d];t:for(;;){for(;n[u].k===h.k;){if(c[d]=rt(t,f[u--],h.v,i,!1),a>--d||a>u)break t;h=o[d]}for(;n[a].k===o[a].k&&++a<=u&&a<=d;);break}if(a>u)for(;d>=a;)c[d]=it(t,o[d--].v);else if(a>d){l=a;do{null!==(h=f[l++])&&Z(t,h,!1)}while(l<=u)}else{let v=0,y=0;const p=u-a+1,g=d-a+1,m=Array(g),w=new Map;for(l=0;l<g;++l)s=l+a,m[l]=-1,w.set(o[s].k,s);for(l=a;l<=u&&y<g;++l)void 0!==(s=w.get(n[l].k))&&(v=v<s?s:99999999,++y,m[s-a]=l,c[s]=f[l],f[l]=null);if(p===n.length&&0===y)for(Z(t,e,r);d>=0;)c[d]=it(t,o[d--].v);else{for(l=a;l<=u;l++)null!==(h=f[l])&&Z(t,h,!1);if(l=g,!0===i||99999999!==v)for(;l>0;)h=o[v=--l+a].v,c[v]=-1===m[l]?it(t,h):rt(t,c[v],h,i,!1);else{const e=st(m);for(s=e.length-1;l>0;)h=o[v=--l+a].v,-1===m[l]?c[v]=it(t,h):(s<0||l!==e[s]?i=!0:--s,c[v]=rt(t,c[v],h,i,!1),i=!1)}}}for(;a>0;)c[--a]=rt(t,f[a],o[a].v,i,!1)}e.c=c}function st(t){const e=t.slice(),n=[];let o,i,r,l=0,s=0;for(n[0]=0;s<t.length;++s){const c=t[s];if(c>-1)if(t[r=n[l]]<c)e[s]=r,n[++l]=s;else{for(o=0,i=l;o<i;)t[n[r=o+i>>1]]<c?o=r+1:i=r;c<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}for(i=n[l];l>=0;)n[l--]=i,i=e[i];return n}function ct(t,e,n){!0===n?k.call(t,"class",e):j.call(t,e)}function ft(t,e,n,o){const i=!0===o?P.call(t):D.call(t);let r,l;if(void 0===e)for(r in n)void 0!==(l=n[r])&&i.setProperty(r,l);else if(void 0===n)for(r in e)void 0!==e[r]&&i.removeProperty(r);else{let t=0,o=0;for(r in e)e[r]!==(l=!0===m.call(n,r)?(t++,n[r]):void 0)&&(void 0!==l?i.setProperty(r,l):i.removeProperty(r));const s=Object.keys(n);for(;t<s.length&&o<s.length;++o)r=s[o],!1===m.call(e,r)&&(l=n[r],++t,void 0!==l&&i.setProperty(r,n[r]))}}function ut(t,e,n,o){let i;if(void 0===e)for(i in n)dt(t,i,void 0,n[i],o);else if(void 0===n)for(i in e)dt(t,i,e[i],void 0,o);else{let r=0,l=0;for(i in e)dt(t,i,e[i],!0===m.call(n,i)?(r++,n[i]):void 0,o);const s=Object.keys(n);for(;r<s.length&&l<s.length;++l)i=s[l],!1===m.call(e,i)&&(dt(t,i,void 0,n[i],o),++r)}}function dt(t,e,n,o,i){"style"!==e?"object"===typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):"object"===typeof n?n.u(t,e,n.v,void 0):n!==o&&("boolean"===typeof o&&(o=o?"":void 0),void 0===o?void 0!==n&&!1!==n&&A.call(t,e):k.call(t,e,o)):n!==o&&ft(t,n,o,i)}const at=[],ht=t=>at.find(t);function vt(){for(let t=0;t<at.length;++t){const e=at[t],{container:n,state:o,next:i}=e;K=null,void 0!==i?(e.next=void 0,e.state=rt(n,o,i,!1,!0)):null!==o&&W(n,o,!1,!0)}}function yt(t){for(;t.v.length>0;){const e=t.v;t.v=[];for(let t=0;t<e.length;++t)e[t](T)}}let pt=0,gt=0;const mt=Promise.resolve(),wt=E([]),bt=E([]),xt=E([]),kt=[],At=[],Ot=t=>M(function(){pt|=1,t.apply(void 0,arguments),yt(wt),pt&=-4,B()}),jt=Ot(G),Dt=(t=>Ot(e=>{pt|=16,t(e),0!==(4&pt)&&(void 0!==e&&(gt=e),H(kt),0!==(32&pt)&&vt(),yt(bt),H(At),yt(xt)),pt&=-61}))(G),Pt=()=>{Dt()};function Tt(t){var e;void 0!==t&&0!==(1&t)&&0===(8&pt)?0===(16&(pt|=12))&&(e=Pt,wt.v.push(e),0===(3&pt)&&(pt|=2,mt.then(jt))):0===(4&pt)&&0===(16&(pt|=4))&&requestAnimationFrame(Dt)}function Nt(t){pt|=32,Tt(t)}function St(t,e,n){const o=ht(t=>t.container===e);o?o.next=t:at.push({container:e,state:null,next:t}),Nt(n)}function Et(t,e){const n=[],o=ht(e=>e.container.contains(t));if(o){const i=o.container;i!==t&&Ct(n,e,t,i,o.state)}return n}function Ct(t,e,n,o,i){const r=n.parentNode;return r===o||null!==(i=Ct(t,e,r,o,i))?It(t,e,n,i):null}function It(t,e,n,o){if(null!==o){const{f:i,c:r}=o;let l;if(0!==(2&i)){if(o.s===n)return o;if(null!==r)return It(t,e,n,r)}else if(0!==(52&i)){if(null!==(l=It(t,e,n,o.c)))return 0!==(16&i)&&Mt(t,o,o.o.v,e),l}else if(0!==(136&i))for(let o=0;o<r.length;o++)if(null!==(l=It(t,e,n,r[o])))return l}return null}function Mt(t,e,n,o){if(null!==n)if(n instanceof Array){let i=n.length;for(;--i>=0;)Mt(t,e,n[i],o)}else{const i=n.d.s;("function"===typeof i&&!0===i(o)||i===o)&&t.push({t:e,h:n})}}function Ft(t,e,n){const o=Et(e,t);let i,r,l=o.length;if(l>0){for(;--l>=0;)if(0!==(1&(r=(i=o[l]).h.d).f)&&!0===r.h(n,i,t))return;for(;++l<o.length;)if(0===(1&(r=(i=o[l]).h.d).f)&&!0===r.h(n,i,t))return}}window,window,window,window;const _t=(t,e,n)=>e.h.h(t,e.t,n);function Bt(t,e=!0){const n={next:t=>{Ft(n,t.target,t)}};return g.addEventListener(t,Ot(t=>{n.next(t)}),e),n}function Gt(t){const e={s:t,h:_t,f:0},n={s:t,h:_t,f:1};return(t,o)=>({d:!0===o?n:e,h:t})}const Rt=Gt(Bt("keydown"));function Ht(t,e,n,o){var i;void 0===n&&o&&(i=()=>{t.focus()},xt.v.push(i),Tt(void 0))}const Lt={v:!1,u:Ht},Vt={v:!0,u:Ht},$t=t=>t?Vt:Lt,qt=h("div"),zt={x:-1,y:0},Jt={x:1,y:0},Kt={x:0,y:-1},Qt={x:0,y:1};class Ut{constructor(t={x:0,y:0}){this.body=[],this.grow=4,this.body.push(t)}get head(){return this.body[this.body.length-1]}move(t){if(this.body.push(t),this.grow)return this.grow--,null;{const t=this.body[0];return this.body=this.body.splice(1),t}}}class Wt{constructor(t=20,e=20){this.rows=t,this.cols=e,this.cells=new Array(t*e).fill(0)}pointToIndex(t){return this.cols*t.y+t.x}mark(t,e){this.cells[this.pointToIndex(t)]|=e}unmark(t,e){this.cells[this.pointToIndex(t)]&=~e}createRandomFood(){let t=0;do{t=Math.random()*this.cells.length|0}while(0!==this.cells[t]);this.cells[t]|=4}isBodyAt(t){return!!(1&this.cells[this.pointToIndex(t)])}isHeadAt(t){return!!(2&this.cells[this.pointToIndex(t)])}isFoodAt(t){return!!(4&this.cells[this.pointToIndex(t)])}}function Xt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Yt(t,e){return(t%e+e)%e}function Zt(t){return 1&t?2&t?"Cell body head":"Cell body":4&t?"Cell food":"Cell"}const te=function(t,e,n){const i=o(4,{c:()=>{let t;const e=Rt(e=>{switch(e.keyCode){case 37:t.setNewDirection(zt),e.preventDefault();break;case 38:t.setNewDirection(Kt),e.preventDefault();break;case 39:t.setNewDirection(Jt),e.preventDefault();break;case 40:t.setNewDirection(Qt),e.preventDefault()}});return n=>(t=n.v,qt(t.gameOver?"SnakeGame gameOver":"SnakeGame",void 0,f(e,qt("Grid",{tabIndex:0,autofocus:$t(!0),style:{width:`${30*t.grid.cols}px`,height:`${30*t.grid.rows}px`}},d(t.grid.cells.map((t,e)=>u(e,qt(Zt(t)))))))))},e1:void 0,e2:void 0});return(t,e)=>s(i,t,e)}(),ee=document.getElementById("app"),ne=new class{constructor(){this.gameOver=!1,this.startTime=0,this.currentTime=0,this.direction={x:1,y:0},this.grid=new Wt,this.snake=new Ut,this.newDirection=null,this.snake.body.forEach(t=>{this.grid.mark(t,1)}),this.grid.mark(this.snake.head,2),this.grid.createRandomFood()}setNewDirection(t){this.newDirection=t}updateState(){if(!this.gameOver){this.newDirection&&(e={x:0,y:0},((t=Xt(this.direction,this.newDirection)).x!==e.x||t.y!==e.y)&&(this.direction=this.newDirection),this.newDirection=null);let n=Xt(this.snake.head,this.direction);n={x:Yt(n.x,this.grid.cols),y:Yt(n.y,this.grid.rows)},this.grid.unmark(this.snake.head,2);const o=this.snake.move(n);o&&this.grid.unmark(o,1),this.grid.mark(n,2),this.grid.isBodyAt(n)?this.gameOver=!0:this.grid.isFoodAt(n)&&(this.snake.grow=3,this.grid.unmark(n,4),this.grid.createRandomFood()),this.grid.mark(n,1)}var t,e}};!function t(){ne.updateState(),St(te(E(ne)),ee),setTimeout(t,100)}()}});