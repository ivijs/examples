!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}({2:function(t,e,n){n.r(e);const o=(t,e)=>({f:t,d:e}),r=o(16,null),i=(o(1056,null),o(8,null)),l=(t,e,n)=>({t:t,v:e,c:n}),s=t=>function(t,e){const n=o(2,t);return(t,e,o=null)=>((t,e,n,o)=>({t:t,v:e,c:n,n:o}))(n,e,o,t)}(t),c=(t,e)=>Object.getOwnPropertyDescriptor(t,e),u=Node.prototype,f=Element.prototype,a=document,d=Object.prototype.hasOwnProperty,h=u.insertBefore,v=u.removeChild,y=(u.replaceChild,u.cloneNode),p=f.setAttribute,g=(f.setAttributeNS,f.removeAttribute),m=c(f,"className").set,w=c(HTMLElement.prototype,"style").get,b=c(SVGElement.prototype,"style").get,x={},k={},A={},O=t=>({v:t}),j=[];let D=!1,P=1;function T(){return P}function N(){P++}const S=()=>{};let I=null;const E=t=>({t:T(),v:t});function C(){const t=I;return I=null,t}let M,F=null;function _(t){return F=t}function B(t,e,n){const o=e.f,r=e.c;let i,l,s;if(0!=(3&o))i=e.s,!0===n&&h.call(t,i,M),null!==r&&(M=null,B(i,r,!1)),M=i;else if(0!=(4&o))i=e.s,0!=(512&o)||null!==i.d&&!0===function(t){const e=t[0];for(let n=1;n<t.length;n++){const o=t[n];if("object"==typeof o){if(o.t>e)return!0}else if(!0===o(k,e))return!0}return!1}(i.d)?(s=e.o,s=i.r(s.v,s.c),i.d=C(),e.c=L(t,r,s,n)):null!==r&&B(t,r,n);else if(0!=(136&o))for(l=r.length;l>0;)null!==(i=r[--l])&&B(t,i,n);else 0!=(16&o)?B(t,r,n):(i=_(e.s),B(t,r,n),_(i))}function G(t,e){!function t(e,n){let o,r=n.f;if(0!=(3&r))v.call(e,n.s);else if(n=n.c,0!=(136&r))for(r=0;r<n.length;++r)null!==(o=n[r])&&t(e,o);else null!==n&&t(e,n)}(t,e),function t(e){const n=e.f;let o,r,i;if(null!==(o=e.c))if(0!=(136&n))for(r=0;r<o.length;r++)null!==(i=o[r])&&t(i);else t(o);if(0!=(4&n)&&null!==(i=e.s.u))if("function"==typeof i)i(A);else for(r=0;r<i.length;r++)i[r](A)}(e)}function R(t,e){const{t:n,v:o,n:r}=e,i=0!=(256&n.f);if(void 0===t){const e=n.d;t=i?a.createElementNS("http://www.w3.org/2000/svg",e):a.createElement(e)}return r&&V(t,r,i),void 0!==o&&$(t,void 0,o,i),t}function H(t,e){return null!==e?"object"==typeof e?e instanceof Array?function(t,e){let n=e.length;const o=Array(n);for(;n>0;)o[--n]=H(t,e[n]);return{f:128,o:e,c:o,s:null}}(t,e):function(t,e){const n=e.t,o=n.f,r={f:o,o:e,c:null,s:null};let i,l,s,c;if(0!=(4&o))r.s=i={r:null,d:null,u:null},i.r=l=n.d.c(r),s=l(e.v,e.c),i.d=C(),r.c=H(t,s);else if(0!=(2&o))l=n.d,0!=(64&o)&&(s=l.n,null===s&&(l.n=s=R(void 0,l.p)),s=y.call(s,!1)),r.s=s=R(s,e),i=M,null!==(l=e.c)&&(M=null,r.c=H(s,l)),M=s,h.call(t,s,i);else if(0!=(48&o))0!=(32&o)?(r.s=i=0!=(1024&o)?_(e.v):(u=n.d,f=e.v,F={n:F,d:u,v:E(f)}),r.c=H(t,e.c),_(i)):r.c=H(t,e.c);else for(s=e.v,c=s.length,r.c=l=Array(c);c>0;)l[--c]=H(t,s[c].v);var u,f;return r}(t,e):function(t,e){const n=a.createTextNode(e);return h.call(t,n,M),M=n,{f:1,o:e,c:null,s:n}}(t,e):null}function L(t,e,n,o){if(null===n)return null!==e&&G(t,e),null;if(null===e)return H(t,n);const{f:r,o:i,s:l}=e;if(0!=(1&r)){if("object"==typeof n)return v.call(t,l),H(t,n);e.o=n,i!==n&&(l.nodeValue=n),!0===o&&h.call(t,l,M),M=l}else{if(i===n)return B(t,e,o),e;if(0!=(128&r)?!(n instanceof Array):n instanceof Array||i.t!==n.t)return G(t,e),H(t,n);e.o=n;const u=e.c;let f,a,d,v,y,p;if(0!=(4&r))f=i.v,d=i.c,a=n.v,v=n.c,y=n.t.d,d!==v&&(void 0===y.e2||!0!==y.e2(d,v))||f!==a&&(void 0===y.e1||!0!==y.e1(f,a))?(a=l.r(a,v),l.d=C(),e.c=L(t,u,a,o)):B(t,e,o);else if(0!=(2&r))p=0!=(256&r),i.n!==(y=n.n)&&(void 0===y&&(y=""),V(l,y,p)),i.v!==(y=n.v)&&$(l,i.v,y,p),!0===o&&h.call(t,l,M),M=null,e.c=L(l,u,n.c,!1),M=l;else if(0!=(136&r))if(0!=(128&r))if(p=n.length,0===p)G(t,e);else{if(f=u.length,p!==f){for(e.c=y=Array(p);f>p;)a=u[--f],null!==a&&G(t,a);for(;p>f;)y[--p]=H(t,n[p])}else y=u;for(;p>0;)y[--p]=L(t,u[p],n[p],o)}else!function(t,e,n,o,r){let i=o.length,l=n.length,s=Array(i);if(0===i)l>0&&G(t,e);else if(0===l)for(;i>0;)s[--i]=H(t,o[i].v);else{let c=e.c,u=l-1,f=i-1,a=0,d=o[f];t:for(;;){for(;n[u].k===d.k;){if(s[f]=L(t,c[u--],d.v,r),a>--f||a>u)break t;d=o[f]}for(;n[a].k===o[a].k&&++a<=u&&a<=f;);break}if(a>u)for(;f>=a;)s[f]=H(t,o[f--].v);else if(a>f){i=a;do{null!==(d=c[i++])&&G(t,d)}while(i<=u)}else{let e=0,h=f-a+1,v=new Int32Array(h),y=new Map;for(i=0;i<h;++i)l=i+a,v[i]=-1,y.set(o[l].k,l);for(i=a;i<=u;++i)l=y.get(n[i].k),d=c[i],void 0!==l?(e=e<l?l:99999999,v[l-a]=i,s[l]=d):null!==d&&G(t,d);for(!1===r&&99999999===e&&function(t){let e,n,o,r,i=t.length,l=new Int32Array(i),s=new Int32Array(i),c=0,u=0;for(;-1===t[u];++u);for(s[0]=u++;u<i;++u)if(n=t[u],-1!==n)if(e=s[c],t[e]<n)l[u]=e,s[++c]=u;else{for(o=0,r=c;o<r;)e=o+r>>1,t[s[e]]<n?o=e+1:r=e;n<t[s[o]]&&(o>0&&(l[u]=s[o-1]),s[o]=u)}for(e=s[c];c-- >=0;)t[e]=-2,e=l[e]}(v);h-- >0;)f=h+a,d=o[f].v,l=v[h],s[f]=-1===l?H(t,d):L(t,s[f],d,r||99999999===e&&-2!==l)}for(;a>0;)s[--a]=L(t,c[a],o[a].v,r)}e.c=s}(t,e,i.v,n.v,o);else 0!=(16&r)?e.c=L(t,u,n.c,o):(a=n.v,0!=(1024&r)?e.s=a:(y=l.v,y.v!==a&&(c=a,(s=y).t=T(),s.v=c)),y=_(e.s),e.c=L(t,u,n.c,o),_(y))}var s,c;return e}function V(t,e,n){!0===n?p.call(t,"class",e):m.call(t,e)}function $(t,e,n,o){let r;if(void 0===e)for(r in n)q(t,r,void 0,n[r],o);else if(void 0===n)for(r in e)q(t,r,e[r],void 0,o);else{let i=0,l=0;for(r in e)q(t,r,e[r],!0===d.call(n,r)?(i++,n[r]):void 0,o);const s=Object.keys(n);for(;i<s.length&&l<s.length;++l)r=s[l],!1===d.call(e,r)&&(q(t,r,void 0,n[r],o),++i)}}function q(t,e,n,o,r){"style"!==e?"object"==typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):"object"==typeof n?n.u(t,e,n.v,void 0):n!==o&&(void 0===o?g.call(t,e):p.call(t,e,o)):n!==o&&function(t,e,n,o){const r=!0===o?b.call(t):w.call(t);let i,l;if(void 0===e)for(i in n)l=n[i],void 0!==l&&r.setProperty(i,l);else if(void 0===n)for(i in e)void 0!==e[i]&&r.removeProperty(i);else{let t=0,o=0;for(i in e){const o=e[i];l=!0===d.call(n,i)?(t++,n[i]):void 0,o!==l&&(void 0!==l?r.setProperty(i,l):r.removeProperty(i))}const s=Object.keys(n);for(;t<s.length&&o<s.length;++o)i=s[o],!1===d.call(e,i)&&(l=n[i],++t,void 0!==l&&r.setProperty(i,n[i]))}}(t,n,o,r)}const z=[],J=t=>z.find(t);function K(t){for(;t.v.length>0;){const e=t.v;t.v=[];for(let t=0;t<e.length;++t)e[t](x)}}let Q=0,U=0;Promise.resolve();const W=O([]),X=O([]),Y=O([]),Z=t=>{return e=function(){Q|=1,t.apply(void 0,arguments),K(W),Q&=-4,N()},function(){if(!D)try{return e.apply(void 0,arguments)}catch(t){throw D=!0,j.forEach(e=>{e(t)}),t}};var e};Z(S);const tt=(et=S,Z(t=>{Q|=8,et(t),0!=(4&Q)&&(void 0!==t&&(U=t),0!=(16&Q)&&function(){for(let t=0;t<z.length;++t){const e=z[t],{container:n,state:o,next:r}=e;M=null,void 0!==r?(e.next=void 0,e.state=L(n,o,r,!1)):null!==o&&B(n,o,!1)}}(),K(X),K(Y)),Q&=-29}));var et;function nt(){0==(4&Q)&&(Q|=4,0==(8&Q)&&requestAnimationFrame(tt))}window,window,window,window;const ot=(t,e,n)=>e.h.h(t,e.t,n);function rt(t,e=!0){const n={next:t=>{!function(t,e,n){const o=function(t,e){const n=[],o=J(e=>e.container.contains(t));if(o){const r=o.container;r!==t&&function t(e,n,o,r,i){const l=o.parentNode;return l===r||null!==(i=t(e,n,l,r,i))?function t(e,n,o,r){if(null!==r){const{f:i,c:l}=r;let s;if(0!=(2&i)){if(r.s===o)return r;if(null!==l)return t(e,n,o,l)}else if(0!=(52&i)){if(null!==(s=t(e,n,o,r.c)))return 0!=(16&i)&&function t(e,n,o,r){if(null!==o)if(o instanceof Array){let i=o.length;for(;--i>=0;)t(e,n,o[i],r)}else{const t=o.d.s;("function"==typeof t&&!0===t(r)||t===r)&&e.push({t:n,h:o})}}(e,r,r.o.v,n),s}else if(0!=(136&i))for(let r=0;r<l.length;r++)if(null!==(s=t(e,n,o,l[r])))return s}return null}(e,n,o,i):null}(n,e,t,r,o.state)}return n}(e,t);let r,i,l=o.length;if(l>0){for(;--l>=0;)if(r=o[l],i=r.h.d,0!=(1&i.f)&&1!==i.h(n,r,t))return;for(;++l<o.length;)if(r=o[l],i=r.h.d,0==(1&i.f)&&1!==i.h(n,r,t))return}}(n,t.target,t)}};return a.addEventListener(t,Z(t=>{n.next(t)}),e),n}function it(t){const e={s:t,h:ot,f:0},n={s:t,h:ot,f:1};return(t,o)=>({d:!0===o?n:e,h:t})}const lt=it(rt("keydown"));const st={v:!0,u:function(t,e,n,o){var r;void 0===n&&o&&(r=()=>{t.focus()},Y.v.push(r),nt())}},ct=s("div"),ut={x:-1,y:0},ft={x:1,y:0},at={x:0,y:-1},dt={x:0,y:1};class ht{constructor(t={x:0,y:0}){this.body=[],this.grow=4,this.body.push(t)}get head(){return this.body[this.body.length-1]}move(t){if(this.body.push(t),this.grow)return this.grow--,null;{const t=this.body[0];return this.body=this.body.splice(1),t}}}class vt{constructor(t=20,e=20){this.rows=t,this.cols=e,this.cells=new Array(t*e).fill(0)}pointToIndex(t){return this.cols*t.y+t.x}mark(t,e){this.cells[this.pointToIndex(t)]|=e}unmark(t,e){this.cells[this.pointToIndex(t)]&=~e}createRandomFood(){let t=0;do{t=Math.random()*this.cells.length|0}while(0!==this.cells[t]);this.cells[t]|=4}isBodyAt(t){return!!(1&this.cells[this.pointToIndex(t)])}isHeadAt(t){return!!(2&this.cells[this.pointToIndex(t)])}isFoodAt(t){return!!(4&this.cells[this.pointToIndex(t)])}}function yt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function pt(t,e){return(t%e+e)%e}const gt=function(t,e,n){const s=o(4,{c:()=>{let t;const e=lt(e=>{switch(e.keyCode){case 37:t.setNewDirection(ut),e.preventDefault();break;case 38:t.setNewDirection(at),e.preventDefault();break;case 39:t.setNewDirection(ft),e.preventDefault();break;case 40:t.setNewDirection(dt),e.preventDefault()}});return n=>{return t=n.v,ct(t.gameOver?"SnakeGame gameOver":"SnakeGame",void 0,((t,e)=>l(r,t,e))(e,ct("Grid",{tabIndex:0,autofocus:st,style:{width:`${30*t.grid.cols}px`,height:`${30*t.grid.rows}px`}},(o=t.grid.cells.map((t,e)=>{return((t,e)=>({k:t,v:e}))(e,ct(1&(n=t)?2&n?"Cell body head":"Cell body":4&n?"Cell food":"Cell"));var n}),{t:i,v:o}))));var o}},e1:void 0,e2:void 0});return(t,e)=>l(s,t,e)}(),mt=document.getElementById("app"),wt=new class{constructor(){this.gameOver=!1,this.startTime=0,this.currentTime=0,this.direction={x:1,y:0},this.grid=new vt,this.snake=new ht,this.newDirection=null,this.snake.body.forEach(t=>{this.grid.mark(t,1)}),this.grid.mark(this.snake.head,2),this.grid.createRandomFood()}setNewDirection(t){this.newDirection=t}updateState(){if(!this.gameOver){this.newDirection&&(e={x:0,y:0},((t=yt(this.direction,this.newDirection)).x!==e.x||t.y!==e.y)&&(this.direction=this.newDirection),this.newDirection=null);let n=yt(this.snake.head,this.direction);n={x:pt(n.x,this.grid.cols),y:pt(n.y,this.grid.rows)},this.grid.unmark(this.snake.head,2);const o=this.snake.move(n);o&&this.grid.unmark(o,1),this.grid.mark(n,2),this.grid.isBodyAt(n)?this.gameOver=!0:this.grid.isFoodAt(n)&&(this.snake.grow=3,this.grid.unmark(n,4),this.grid.createRandomFood()),this.grid.mark(n,1)}var t,e}};!function t(){wt.updateState(),function(t,e){const n=J(t=>t.container===e);n?n.next=t:z.push({container:e,state:null,next:t}),Q|=16,nt()}(gt(O(wt)),mt),setTimeout(t,100)}()}});