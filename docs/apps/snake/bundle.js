!function(t){var e={};function n(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)n.d(o,l,function(e){return t[e]}.bind(null,l));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);const o=(t,e)=>({flags:t,descriptor:e}),l=o(16,null),i=(o(128,null),o(32,null),o(1032,null)),r=(t,e)=>({type:t,data:e}),s=(t,e)=>r(l,{data:t,child:e}),c=(t,e)=>({k:t,v:e}),a=t=>r(i,t);function f(t,e){const n=o(!0===e?514:2,t);return(t,e,o=null)=>r(n,{className:t,attrs:e,children:o})}const u=t=>f(t,!1);function d(t,e){const n=t.length-1,o=t.pop();e!==n&&(t[e]=o)}function h(t,e){const n=t.indexOf(e);d(t,n)}function g(t){requestAnimationFrame(t)}function p(t){for(let e=0;e<t.length;++e)!0===t[e]()&&d(t,e--)}const v=()=>{},y=[];function m(t){return function(){try{return t.apply(void 0,arguments)}catch(e){throw y.forEach(t=>{t(e)}),e}}}(()=>{let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});window.addEventListener("test",null,n)}catch(e){}})(),KeyboardEvent.prototype.hasOwnProperty("key"),MouseEvent.prototype.hasOwnProperty("buttons"),window,window,window;const b="GestureEvent"in window,w=Node.prototype,k=Element.prototype,x=Object.prototype.hasOwnProperty,O=w.insertBefore,j=w.removeChild,A=(w.replaceChild,w.cloneNode),N=k.setAttribute,P=(k.setAttributeNS,k.removeAttribute),D="http://www.w3.org/2000/svg",S=t=>({op:t,flags:0,children:null,state:null});function T(t){if(0===(3&t.flags)){const e=t.children;return null===e?null:T(e)}return t.state}let C,E,I,M,F={};function _(t){const e=F;return F=t,e}function B(t){F=t}function G(){return F}let R=!1,U=!1;function L(){const t=I;return I=0,t}function $(t,e){const n=e|I;return I|=t,n}function q(t,e){const{flags:n,children:o}=e;let l,i,r;if(0!==(4&n)){const r=e.state;i=L(),0!==(256&n)&&(0!==(2048&n)||null!==r.dirtyCheck&&!0===r.dirtyCheck(G()))?e.children=Y(t,o,r.update(e.op.data)):0!==(16384&n)?q(t,o):null!==(l=T(e))&&(!0===R&&(R=!1,O.call(t,l,C)),C=l),e.flags=14335&e.flags|I,I|=i|(12288&e.flags)<<2}else if(0!==(16384&n)){if(i=L(),0!==(3&n)){if(l=e.state,!0===R&&(R=!1,O.call(t,l,C)),null!==o)if(0!==(1024&n))for(r=0;r<o.length;r++){const t=o[r];null!==t&&q(l,t)}else U=!0,q(l,o),U=!1;C=l}else if(0!==(8&n))for(r=o.length;--r>=0;)q(t,o[r]);else if(0!==(144&n))q(t,e.children);else{!0===M&&(e.state=Object.assign({},G(),e.op.data.data));const n=_(e.state);q(t,e.children),B(n)}e.flags=$(i,e.flags)}else null!==(l=T(e))&&(!0===R&&(R=!1,O.call(t,l,C)),C=l)}function H(t){const e=t.flags;let n;if(0!==(32768&e)){const o=t.children;if(null!==o)if(0!==(1024&e))for(n=0;n<o.length;n++){const t=o[n];"object"===typeof t&&null!==t&&H(t)}else H(o)}if(0!==(8192&e)){const e=t.state.unmount;if(null!==e)if("function"===typeof e)e();else for(n=0;n<e.length;n++)e[n](!0)}}function K(t,e){let n;0!==(8&e.flags)?V(t,e.children):(null!==(n=T(e))&&j.call(t,n),H(e))}function V(t,e){let n=0;if(!0===U)for(t.textContent="";n<e.length;)H(e[n++]);else for(;n<e.length;)K(t,e[n++])}function z(t,e,n){const o=document.createTextNode(n);O.call(t,o,C),C=o,e.state=o,e.flags=1}function J(t,e){const n=e.type,o=0!==(512&n.flags);if(void 0===t){const e=n.descriptor;t=o?document.createElementNS(D,e):document.createElement(e)}const{className:l,attrs:i}=e.data;return l&&(o?N.call(t,"class",l):t.className=l),void 0!==i&&lt(t,void 0,i),t}function Q(t,e,n){const o=n.type,l=n.data,i=o.flags;let r;if(0!==(4&i)){let o;r=L();const s=(o=0!==(256&i)?(e.state={update:null,dirtyCheck:null,unmount:null}).update=n.type.descriptor.c(e):n.type.descriptor.c)(l);e.children=X(t,s),e.flags=14335&e.flags|i|I,I|=r|(12288&e.flags)<<2}else{if(r=L(),0!==(2&i)){let r;const s=o.descriptor;0!==(64&i)&&(null===(r=s.node)&&(s.node=r=J(void 0,s.proto)),r=A.call(r,!1)),r=J(r,n);let c=null;const a=l.children,f=C;C=null,null!==a&&(a instanceof Array?(e.flags|=1024,W(r,a,c=[])):c=X(r,a)),O.call(t,r,f),e.children=c,e.state=r,C=r}else if(0!==(176&i))if(0!==(32&i)){const n=_(e.state=Object.assign({},G(),l.data));e.children=X(t,l.child),B(n)}else 0!==(128&i)&&(l.data.v=e),e.children=X(t,l.child);else{let n=l.length;const o=Array(n);for(e.children=o;--n>=0;)o[n]=X(t,l[n].v)}e.flags=$(r,e.flags|i)}}function W(t,e,n){let o=e.length;for(;--o>=0;){const l=e[o];l instanceof Array?W(t,l,n):n.push(X(t,l))}}function X(t,e){if(null!==e){const n=S(e);return"object"===typeof e?Q(t,n,e):z(t,n,e),n}return null}function Y(t,e,n){if(null===n)return null!==e&&K(t,e),null;if(null===e)return X(t,n);const o=e.op;if(o===n)return q(t,e),e;if(typeof o!==typeof n||"object"===typeof o&&o.type!==n.type)return K(t,e),X(t,n);e.op=n;const l=e.flags,i=e.state;let r;if(0!==(1&l))i.nodeValue=n;else{const s=e.children,c=o.data,a=n.data;if(0!==(4&l)){const o=n.type.descriptor;if(0!==(2048&l)||c!==a&&(void 0===o.shouldUpdate||!0===o.shouldUpdate(c,a))){r=L();const n=0!==(256&l)?e.state.update(a):o.c(a);e.children=Y(t,s,n),e.flags=14335&e.flags|I,I|=r|(12288&e.flags)<<2}else q(t,e)}else{if(r=L(),0!==(2&l)){!0===R&&(R=!1,O.call(t,i,C));let n=a.className;c.className!==n&&(void 0===n&&(n=""),0!==(512&l)?N.call(i,"class",n):i.className=n),c.attrs!==a.attrs&&lt(i,c.attrs,a.attrs);const o=a.children;c.children!==o&&(C=null,0!==(1024&l)?(E=0,Z(i,s,o)):(U=!0,e.children=null===s?X(i,o):Y(i,s,o),U=!1)),C=i}else if(0!==(8&l))tt(t,e,c,a);else if(0!==(144&l))e.children=Y(t,s,a.child);else{const n=M;c.data===a.data&&!0!==M||(e.state=Object.assign({},G(),a.data),M=!0);const o=_(e.state);Y(t,s,a.child),B(o),M=n}e.flags=$(r,e.flags)}}return e}function Z(t,e,n){let o=n.length;for(;--o>=0;){let l=E;const i=n[o];if(i instanceof Array)Z(t,e,i);else{const n=e[l];e[l]=null===n?X(t,i):Y(t,n,i),E=++l}}}function tt(t,e,n,o){const l=e.children,i=Array(o.length);let r;if(e.children=i,0===o.length)l.length>0&&V(t,l);else if(0===l.length)for(r=o.length;--r>=0;)i[r]=X(t,o[r].v);else{let e,s,c=n[0],a=o[0],f=n.length-1,u=o.length-1,d=n[f],h=o[u],g=0;t:for(;;){for(;d.k===h.k;){if(i[u]=Y(t,l[f--],h.v),g>--u||g>f)break t;d=n[f],h=o[u]}for(;c.k===a.k;){if(++g>f||g>u)break t;c=n[g],a=o[g]}break}if(g>f)for(;u>=g;)i[u]=X(t,o[u--].v);else if(g>u){r=g;do{K(t,s=l[r++])}while(r<=f)}else{const c=f-g+1,a=u-g+1,d=l,h=Array(a);for(r=0;r<a;++r)h[r]=-1;let p=0,v=0;const y=new Map;for(e=g;e<=u;++e)y.set(o[e].k,e);for(r=g;r<=f&&v<a;++r)void 0!==(e=y.get(n[r].k))&&(p=p>e?1e6:e,++v,h[e-g]=r,i[e]=l[r],d[r]=null);if(c===n.length&&0===v)for(V(t,l);u>=0;)i[u]=X(t,o[u--].v);else{for(r=g;r<=f;r++)null!==(s=l[r])&&K(t,s);let n;if(1e6===p){const l=et(h);for(e=l.length-1,r=a;--r>=0;)n=o[p=g+r].v,-1===h[r]?i[p]=X(t,n):(s=i[p],e<0||r!==l[e]?R=!0:--e,i[p]=Y(t,s,n),R=!1)}else for(r=a;--r>=0;)n=o[p=g+r].v,i[p]=-1===h[r]?X(t,n):Y(t,i[p],n)}}for(;--g>=0;)i[g]=Y(t,l[g],o[g].v)}}function et(t){const e=t.slice(),n=[];n[0]=0;let o,l,i,r=0;for(let s=0;s<t.length;++s){const c=t[s];if(-1!==c)if(t[i=n[r]]<c)e[s]=i,n[++r]=s;else{for(o=0,l=r;o<l;)t[n[i=(o+l)/2|0]]<c?o=i+1:l=i;c<t[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}for(l=n[r];r>=0;)n[r--]=l,l=e[l];return n}function nt(t,e,n){const o=t.style;let l,i;if(void 0===e)for(l in n)void 0!==(i=n[l])&&o.setProperty(l,i);else if(void 0===n)for(l in e)o.removeProperty(l);else{let t=0;for(l in e)i=void 0,!0===x.call(n,l)&&(i=n[l],t++),e[l]!==i&&(void 0!==i?o.setProperty(l,i):o.removeProperty(l));const r=Object.keys(n);for(let i=0;t<r.length&&i<r.length;++i)l=r[i],!1===x.call(e,l)&&(o.setProperty(l,n[l]),++t)}}function ot(t,e,n,o){"style"!==e?"object"===typeof o?o.u(t,e,void 0===n?void 0:n.v,o.v):n!==o&&("object"===typeof n?n.u(t,e,n.v,void 0):("boolean"===typeof o&&(o=o?"":void 0),void 0===o?P.call(t,e):N.call(t,e,o))):n!==o&&nt(t,n,o)}function lt(t,e,n){let o;if(void 0===e)for(o in n)ot(t,o,void 0,n[o]);else if(void 0===n)for(o in e)ot(t,o,e[o],void 0);else{let l=0;for(o in e){let i=void 0;!0===x.call(n,o)&&(i=n[o],l++),ot(t,o,e[o],i)}const i=Object.keys(n);for(let r=0;l<i.length&&r<i.length;++r)o=i[r],!1===x.call(e,o)&&(ot(t,o,void 0,n[o]),++l)}}const it=[],rt=t=>it.find(e=>e.container===t);function st(){for(let t=0;t<it.length;++t){const e=it[t],{container:n,state:o,next:l}=e;e.next=void 0,C=null,I=0,M=!1,l?o?e.state=Y(n,o,l):(e.state=X(n,l),b&&(n.onclick=v)):o&&(null===l?(K(n,o),h(it,e),--t):q(n,o))}}function ct(t){for(;t.v.length>0;){const e=t.v;let n=0;t.v=[];do{e[n++]()}while(n<e.length)}}let at=0;const ft={v:[]},ut={v:[]},dt={v:[]},ht=[],gt=[];let pt=0;const vt=t=>m(function(){at|=1,t.apply(void 0,arguments),ct(ft),at&=-4}),yt=vt(v),mt=(t=>vt(e=>{at|=16,t(e),0!==(4&at)&&(pt=void 0===e?performance.now():e,p(ht),0!==(32&at)&&st(),ct(ut),p(gt),ct(dt)),at&=-61}))(v);function bt(t){var e,n;void 0!==t&&0!==(1&t)&&0===(8&at)?0===(16&(at|=12))&&(e=mt,ft.v.push(e),0===(3&at)&&(at|=2,n=yt,Promise.resolve().then(n))):0===(4&at)&&0===(16&(at|=4))&&g(mt)}function wt(t){at|=32,bt(t)}function kt(t,e,n){const o=rt(e);o?o.next=t:it.push({container:e,next:t,state:null}),wt(n)}function xt(t,e,n){for(let o=0;o<it.length;o++){const{container:l,state:i}=it[o];if(l.contains(e)){l!==e&&Ot(t,n,e,l,i);break}}}function Ot(t,e,n,o,l){const i=n.parentNode;return i===o||null!==(l=Ot(t,e,i,o,l))?jt(t,e,n,l):null}function jt(t,e,n,o){if(null===o)return null;const{flags:l,children:i}=o;let r,s;if(0!==(2&l)){if(o.state===n)return o;if(0!==(1024&l)){for(r=i.length;--r>=0;)if(null!==(s=jt(t,e,n,i[r])))return s}else if(null!==i)return jt(t,e,n,i)}else if(0!==(180&l)){if(null!==(s=jt(t,e,n,o.children)))return 0!==(16&l)&&At(t,o,e),s}else if(0!==(8&l))for(r=0;r<i.length;r++)if(null!==(s=jt(t,e,n,i[r])))return s;return null}function At(t,e,n){const o=e.op.data.data;if(null!==o){let l;if(o instanceof Array){let t=0;for(let e=0;e<o.length;e++){const i=o[e];null!==i&&!0===n(i)&&(0===t?l=i:1===t?l=[l,i]:l.push(i),++t)}}else!0===n(o)&&(l=o);void 0!==l&&t.push({target:e,handlers:l})}}function Nt(t,e,n,o){let l=t.length;for(;--l>=0;)if(Pt(t[l],e,1,o),2&e.flags)return;if(n)for(;++l<t.length;)if(Pt(t[l],e,2,o),2&e.flags)return}function Pt(t,e,n,o){const l=t.handlers;let i=0;if(e.node=t.target,l instanceof Array)for(let r=0;r<l.length;++r){const t=l[r];t.d.flags&n&&(i|=Dt(t,o,e))}else l.d.flags&n&&(i=Dt(l,o,e));e.flags|=i}function Dt(t,e,n){const o=void 0===e?t.h(n):e(t,n);return void 0===o?0:o}function St(t,e,n,o){return{flags:t,timestamp:e,node:n,native:o}}function Tt(t,e,n){const o={flags:t,options:void 0===n||n,before:null,after:null,dispatch:null},l=t=>t.d.src===o;return document.addEventListener(e,vt(t=>{const e=[];if(xt(e,t.target,l),e.length||o.before||o.after){const n=St(0,t.timeStamp,null,t);Ct(o.before,n),e.length&&Nt(e,n,0!==(4&o.flags)),Ct(o.after,n),1&n.flags&&t.preventDefault()}})),o}function Ct(t,e){if(null!==t){e.node=null;const n=t.slice();for(let t=0;t<n.length;t++)n[t](e)}}function Et(t){const e={src:t,flags:2},n={src:t,flags:1};return(t,o)=>({d:!0===o?n:e,h:t})}const It=Et(Tt(5,"keydown")),Mt={v:void 0,u:v};function Ft(t,e,n,o){var l;void 0===n&&o&&(l=(()=>{t.focus()}),dt.v.push(l),bt(void 0))}const _t={v:!1,u:Ft},Bt={v:!0,u:Ft},Gt=t=>void 0===t?Mt:t?Bt:_t,Rt=u("div"),Ut={x:-1,y:0},Lt={x:1,y:0},$t={x:0,y:-1},qt={x:0,y:1};class Ht{constructor(t={x:0,y:0}){this.body=[],this.grow=4,this.body.push(t)}get head(){return this.body[this.body.length-1]}move(t){if(this.body.push(t),this.grow)return this.grow--,null;{const t=this.body[0];return this.body=this.body.splice(1),t}}}class Kt{constructor(t=20,e=20){this.rows=t,this.cols=e,this.cells=new Array(t*e).fill(0)}pointToIndex(t){return this.cols*t.y+t.x}mark(t,e){this.cells[this.pointToIndex(t)]|=e}unmark(t,e){this.cells[this.pointToIndex(t)]&=~e}createRandomFood(){let t=0;do{t=Math.random()*this.cells.length|0}while(0!==this.cells[t]);this.cells[t]|=4}isBodyAt(t){return!!(1&this.cells[this.pointToIndex(t)])}isHeadAt(t){return!!(2&this.cells[this.pointToIndex(t)])}isFoodAt(t){return!!(4&this.cells[this.pointToIndex(t)])}}function Vt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function zt(t,e){return(t%e+e)%e}function Jt(t){return 1&t?2&t?"Cell body head":"Cell body":4&t?"Cell food":"Cell"}const Qt=function(t,e){const n=o(4356,{c:()=>{let t;const e=It(e=>{switch(e.native.keyCode){case 37:return t.setNewDirection(Ut),1;case 38:return t.setNewDirection($t),1;case 39:return t.setNewDirection(Lt),1;case 40:return t.setNewDirection(qt),1}});return n=>(t=n.value,Rt(t.gameOver?"SnakeGame gameOver":"SnakeGame",void 0,s(e,Rt("Grid",{tabIndex:0,autofocus:Gt(!0),style:{width:`${30*t.grid.cols}px`,height:`${30*t.grid.rows}px`}},a(t.grid.cells.map((t,e)=>c(e,Rt(Jt(t)))))))))},shouldUpdate:void 0});return t=>r(n,t)}(),Wt=document.getElementById("app"),Xt=new class{constructor(){this.gameOver=!1,this.startTime=0,this.currentTime=0,this.direction={x:1,y:0},this.grid=new Kt,this.snake=new Ht,this.newDirection=null,this.snake.body.forEach(t=>{this.grid.mark(t,1)}),this.grid.mark(this.snake.head,2),this.grid.createRandomFood()}setNewDirection(t){this.newDirection=t}updateState(){if(!this.gameOver){this.newDirection&&(e={x:0,y:0},((t=Vt(this.direction,this.newDirection)).x!==e.x||t.y!==e.y)&&(this.direction=this.newDirection),this.newDirection=null);let n=Vt(this.snake.head,this.direction);n={x:zt(n.x,this.grid.cols),y:zt(n.y,this.grid.rows)},this.grid.unmark(this.snake.head,2);const o=this.snake.move(n);o&&this.grid.unmark(o,1),this.grid.mark(n,2),this.grid.isBodyAt(n)?this.gameOver=!0:this.grid.isFoodAt(n)&&(this.snake.grow=3,this.grid.unmark(n,4),this.grid.createRandomFood()),this.grid.mark(n,1)}var t,e}};!function t(){Xt.updateState(),kt(Qt({value:Xt}),Wt),setTimeout(t,100)}()}]);